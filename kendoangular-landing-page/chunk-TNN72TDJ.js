import{c as hs,d as fs}from"./chunk-EIBZHSEW.js";import{A as gs,B as Rt,C as rt,D as He}from"./chunk-WJRNDAQE.js";import{a as ms}from"./chunk-SRVYF3JF.js";import{a as Ci,d as As,p as vs,r as Ss,s as Es}from"./chunk-7XAHRYGP.js";import{a as ri,f as yn,t as kn}from"./chunk-TDB5YJF6.js";import{Bc as cs,Cc as Ni,Db as qn,Dc as S,E as Fn,Ec as us,F as Pn,Fc as he,G as Kn,Ga as Wn,Gb as Ot,Gc as se,Ha as Ai,Ia as vi,Ib as Xn,Kb as Jn,La as Qn,Lb as Zn,M as vt,Mb as Yn,N as St,O as _i,Ob as es,Oc as ps,P as Et,Pb as ts,Q as mi,Qb as is,R as Nt,Rb as ns,S as Vn,Sb as ss,Tb as os,Ub as as,V as gi,Wc as ze,X as Bn,Yc as fe,Zc as M,a as Ce,ac as ge,bc as ke,bd as de,ca as zn,dc as Ct,ec as ve,g as li,ha as Hn,ia as jn,ic as ce,id as ot,ja as $n,jd as Oi,kd as Le,l as Un,la as Ve,ld as ae,m as wn,mb as Si,n as Gn,nb as Be,pc as rs,pd as ds,qd as _s,r as ci,rc as Ei,rd as at,s as ui,t as pi,u as di,ua as hi,uc as ls,va as fi}from"./chunk-LQCEIJVJ.js";import{$a as h,$b as Ke,$c as ai,A as Wt,Aa as Me,B as Qt,Ba as Fe,Ca as k,Cb as E,Db as Zt,Dc as Oe,Eb as c,Ec as oe,Fb as Rn,Fc as H,Gb as In,Gc as Mn,Hb as F,Hc as Dn,I as Nn,Ia as xe,Ib as P,J as it,Jb as O,Jc as Tn,Kb as C,Kc as ne,La as l,Lb as Z,Mb as Pe,Na as B,Nb as G,Pb as Yt,Qa as X,Qb as I,Qc as At,Ra as u,Rb as V,Rc as si,Sb as $,Sc as xn,Ta as qt,Tc as Ln,Uc as bn,Vb as ei,Wa as L,Wb as ti,Xb as ii,Ya as D,_a as w,_b as K,_c as oi,a as q,ac as me,ba as z,bc as Se,bd as De,ca as ie,cc as nt,cd as st,eb as N,ec as ni,ed as ye,f as Ae,fa as On,ga as te,ha as Cn,i as ee,la as m,ma as g,mb as r,nb as d,nc as pe,ob as _,pa as ft,pb as T,qb as Xt,rb as Jt,ta as f,tb as b,tc as Ee,ua as j,ub as y,uc as Ne,vb as Q,wb as R,y as tt}from"./chunk-USDRQVEU.js";var oa=["fileSelectButton"],aa=["clearButton"],ra=["uploadButton"];function la(i,o){if(i&1&&(d(0,"span",5),I(1),_()),i&2){let e=c();l(),$("",e.progress,"%")}}function ca(i,o){if(i&1){let e=R();d(0,"button",6),E("pointerdown",function(n){return m(e),g(n.preventDefault())})("click",function(){m(e);let n=c();return g(n.onRetryClick())}),_()}if(i&2){let e=c();r("svgIcon",e.retrySVGIcon),N("tabIndex",-1)("aria-hidden",!0)("title",e.retryButtonTitle)}}function ua(i,o){if(i&1){let e=R();d(0,"button",7),E("pointerdown",function(n){return m(e),g(n.preventDefault())})("click",function(){m(e);let n=c();return g(n.onPauseResumeClick())}),_()}if(i&2){let e=c();r("svgIcon",e.isPaused?e.playSVGIcon:e.pauseSVGIcon)("icon",e.isPaused?"play-sm":"pause-sm"),N("tabIndex",-1)("aria-hidden",!0)("title",e.pauseResumeButtonTitle)}}function pa(i,o){if(i&1){let e=R();d(0,"button",8),E("click",function(n){m(e);let s=c();return g(s.onRemoveCancelClick(n))}),_()}if(i&2){let e=c();G("k-delete",!e.isUploading),r("svgIcon",e.isUploading?e.cancelSVGIcon:e.deleteSVGIcon)("icon",e.isUploading?"cancel":"x"),N("tabIndex",-1)("aria-hidden",!0)("title",e.actionButtonTitle)}}var ks=()=>({visible:!1}),da=(i,o)=>({"k-file-validation-message":i,"k-file-size":o}),wi=(i,o,e)=>({templateRef:i,state:o,$implicit:e});function _a(i,o){if(i&1&&(d(0,"span",9)(1,"span",10),I(2),_(),d(3,"span",11),I(4),_()()),i&2){let e=o.$implicit,t=c(2);l(),r("title",e.name),l(),$(" ",e.name," "),l(),r("ngClass",Se(5,da,e.validationErrors,!e.validationErrors)),N("aria-live","polite"),l(),V(t.fileStatusText(e))}}function ma(i,o){if(i&1&&(b(0),h(1,_a,5,8,"span",7),d(2,"span",8),I(3),_(),y()),i&2){let e=c();l(),r("ngForOf",e.files),l(2),V(e.batchStatusText)}}function ga(i,o){if(i&1&&Q(0,12),i&2){let e=c();r("ngTemplateOutlet",e.fileInfoTemplate.templateRef)("ngTemplateOutletContext",nt(2,wi,e.fileInfoTemplate.templateRef,e.files[0].state,e.files))}}var ha=(i,o,e)=>({"k-file-validation-message":i,"k-file-size":o,"k-file-summary":e}),fa=i=>[i];function Aa(i,o){if(i&1&&(b(0),d(1,"span",7),I(2),_(),d(3,"span",8),I(4),_(),y()),i&2){let e=c();l(),r("title",e.file.name),l(),V(e.file.name),l(),r("ngClass",nt(5,ha,e.file.validationErrors,!e.file.validationErrors&&e.isNotYetUploaded,e.isUploadSuccessful||e.isUploadFailed)),N("aria-live","polite"),l(),V(e.fileStatusText)}}function va(i,o){if(i&1&&Q(0,9),i&2){let e=c();r("ngTemplateOutlet",e.fileInfoTemplate.templateRef)("ngTemplateOutletContext",nt(4,wi,e.fileInfoTemplate.templateRef,e.file.state,me(2,fa,e.file)))}}var Sa=["kendo-upload-file-list",""];function Ea(i,o){if(i&1&&T(0,"kendo-upload-file-list-single-item",5),i&2){let e=c().$implicit,t=c();r("disabled",t.disabled)("file",e[0])("fileInfoTemplate",t.fileInfoTemplate)}}function Na(i,o){if(i&1&&T(0,"kendo-upload-file-list-multiple-items",6),i&2){let e=c().$implicit,t=c();r("disabled",t.disabled)("files",e)("fileInfoTemplate",t.fileInfoTemplate)}}function Oa(i,o){if(i&1&&Q(0,7),i&2){let e=c().$implicit,t=c();r("ngTemplateOutlet",t.fileTemplate.templateRef)("ngTemplateOutletContext",nt(2,wi,t.fileTemplate.templateRef,e[0].state,e))}}function Ca(i,o){if(i&1&&(d(0,"li",1),h(1,Ea,1,3,"kendo-upload-file-list-single-item",2)(2,Na,1,3,"kendo-upload-file-list-multiple-items",3)(3,Oa,1,6,"ng-container",4),_()),i&2){let e=o.$implicit,t=o.index,n=c();r("files",e)("index",t),l(),r("ngIf",e.length===1&&!n.fileTemplate),l(),r("ngIf",e.length>1&&!n.fileTemplate),l(),r("ngIf",n.fileTemplate)}}var Us=["fileSelectInput"];function Ra(i,o){if(i&1&&T(0,"kendo-upload-status-total",11),i&2){let e=c();r("fileList",e.fileList)}}function Ia(i,o){if(i&1&&T(0,"ul",12),i&2){let e=c();r("disabled",e.disabled)("fileList",e.fileList.files)("fileTemplate",e.fileTemplate)("fileInfoTemplate",e.fileInfoTemplate)("id",e.fileListId)}}function Ma(i,o){if(i&1&&T(0,"kendo-upload-action-buttons",13),i&2){let e=c();r("disabled",e.disabled)("actionsLayout",e.actionsLayout)}}var Da=["*"];function Ta(i,o){if(i&1&&T(0,"ul",9),i&2){let e=c();r("disabled",e.disabled)("fileList",e.fileList.files)("fileTemplate",e.fileTemplate)("fileInfoTemplate",e.fileInfoTemplate)("id",e.fileListId)}}var v=(function(i){return i[i.Failed=0]="Failed",i[i.Initial=1]="Initial",i[i.Selected=2]="Selected",i[i.Uploaded=3]="Uploaded",i[i.Uploading=4]="Uploading",i[i.Paused=5]="Paused",i})(v||{}),Ri=class{_files;constructor(){this._files={}}add(o){let e=o.uid;this.has(e)?o.validationErrors&&o.validationErrors.length>0?this._files[e].unshift(o):this._files[e].push(o):this._files[e]=[o]}remove(o){this.has(o)&&(this._files[o]=null,delete this._files[o])}clear(){let o=this._files;for(let e in o)if(o.hasOwnProperty(e)){for(let t of o[e])t.httpSubscription&&t.httpSubscription.unsubscribe();o[e]=null,delete o[e]}}has(o){return o in this._files}get(o){return this._files[o]}setFilesState(o,e){for(let t of o)this.setFilesStateByUid(t.uid,e)}setFilesStateByUid(o,e){this.get(o).forEach(t=>{t.state=e})}get count(){return Object.getOwnPropertyNames(this._files).length}get files(){let o=this._files,e=[];for(let t in o)o.hasOwnProperty(t)&&e.push(o[t]);return e}get filesFlat(){let o=this._files,e=[];for(let t in o)o.hasOwnProperty(t)&&o[t].forEach(s=>{e.push(s)});return e}get filesToUpload(){let o=this._files,e=[];for(let t in o)if(o.hasOwnProperty(t)){let n=o[t],s=!0;for(let a of n)(a.state!==v.Selected||a.validationErrors&&a.validationErrors.length>0)&&(s=!1);s&&e.push(n)}return e}get firstFileToUpload(){let o=this._files;for(let e in o)if(o.hasOwnProperty(e)){let t=o[e],n=!0;for(let s of t)(s.state!==v.Selected||s.validationErrors&&s.validationErrors.length>0)&&(n=!1);if(n)return t}return null}getFilesWithState(o){return this.filesFlat.filter(e=>e.state===o)}hasFileWithState(o){let e=this._files;for(let t in e)if(e.hasOwnProperty(t)){let n=e[t];for(let s of n)if(o.indexOf(s.state)>=0)return!0}return!1}},Ii=class{files;constructor(o){this.files=o}},Ue=class{prevented=!1;preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}},Mi=class extends Ue{constructor(){super()}},Di=class{files;operation;response;constructor(o,e,t){this.files=o,this.operation=e,this.response=t}},Ti=class{file;constructor(o){this.file=o}},xi=class extends Ue{data;files;headers;constructor(o,e){super(),this.files=o,this.headers=e}},Li=class{file;constructor(o){this.file=o}},bi=class extends Ue{files;constructor(o){super(),this.files=o}},yi=class extends Ue{files;operation;response;constructor(o,e,t){super(),this.files=o,this.operation=e,this.response=t}},ki=class extends Ue{data;files;headers;constructor(o,e){super(),this.files=o,this.headers=e}},It=class{files;percentComplete;constructor(o,e){this.files=o,this.percentComplete=e}},Mt={audio:[".aif",".iff",".m3u",".m4a",".mid",".mp3",".mpa",".wav",".wma",".ogg",".wav",".wma",".wpl"],video:[".3g2",".3gp",".avi",".asf",".flv",".m4u",".rm",".h264",".m4v",".mkv",".mov",".mp4",".mpg",".rm",".swf",".vob",".wmv"],image:[".ai",".dds",".heic",".jpe","jfif",".jif",".jp2",".jps",".eps",".bmp",".gif",".jpeg",".jpg",".png",".ps",".psd",".svg",".svgz",".tif",".tiff"],txt:[".doc",".docx",".log",".pages",".tex",".wpd",".wps",".odt",".rtf",".text",".txt",".wks"],presentation:[".key",".odp",".pps",".ppt",".pptx"],data:[".xlr",".xls",".xlsx"],programming:[".tmp",".bak",".msi",".cab",".cpl",".cur",".dll",".dmp",".drv",".icns",".ico",".link",".sys",".cfg",".ini",".asp",".aspx",".cer",".csr",".css",".dcr",".htm",".html",".js",".php",".rss",".xhtml"],pdf:[".pdf"],config:[".apk",".app",".bat",".cgi",".com",".exe",".gadget",".jar",".wsf"],zip:[".7z",".cbr",".gz",".sitx",".arj",".deb",".pkg",".rar",".rpm",".tar.gz",".z",".zip",".zipx"],discImage:[".dmg",".iso",".toast",".vcd",".bin",".cue",".mdf"]},xa={audio:ts,video:es,image:is,txt:Xn,presentation:ns,data:ss,programming:as,pdf:Jn,config:Zn,zip:Yn,discImage:os},Gi=i=>{let o=0,e;if(typeof i[0].size=="number")for(e=0;e<i.length;e++)i[e].size&&(o+=i[e].size);else return"";return o/=1024,o<1024?o.toFixed(2)+" KB":(o/1024).toFixed(2)+" MB"},La=i=>{let o=i.lastIndexOf("\\");return o!==-1?i.substr(o+1):i},Fi=i=>{let o=/\.([^\.]+)$/,e=i.match(o);return e?e[0]:""},ws=i=>!!(i instanceof Object&&i.hasOwnProperty("name")),ba=i=>!!(i instanceof File||ws(i)),Ns=i=>(i.extension=i.extension||Fi(i.name),i.name=i.name,i.size=i.size||0,i.hasOwnProperty("state")||(i.state=v.Initial),i.hasOwnProperty("uid")||(i.uid=ve()),i),ya=i=>{let o=Gs(i);return o.uid=ve(),o.state=v.Selected,o},Gs=i=>{let o=i.name,e=i.size;return{extension:Fi(o),name:o,rawFile:i,size:e,state:v.Selected}},Pi=i=>{let o=new Array,e;for(e=0;e<i.length;e++)o.push(Gs(i[e]));return o},Fs=i=>!!(i.validationErrors&&i.validationErrors.length>0),Ps=i=>{for(let o of i)if(Fs(o))return!0;return!1},ka=i=>i.files?Pi(i.files):i.value.split("|").map((e,t)=>{let n=e.trim();return{extension:Fi(n),name:La(n),rawFile:null,size:(t+1)*1e3,state:v.Selected}}),Dt=(i,o)=>{let e=ve();return i.map(t=>(t.uid=o?ve():e,t))};var Ua=/^(?:a|input|select|textarea|button|object)$/i,Ki="k-icon k-select k-input k-multiselect-wrap",Ks="k-upload-button k-clear-selected k-upload-selected k-upload-action k-file",wa=i=>{if(!ge())return!1;let o=i.getBoundingClientRect();return!!(o.width&&o.height)&&window.getComputedStyle(i).visibility!=="hidden"},Os=i=>String(i).trim().split(" "),lt=(i,o)=>{let e=Os(o);return!!Os(i.className).find(t=>e.indexOf(t)>=0)},Vi=(i,o=!0)=>{if(i.tagName){let e=i.tagName.toLowerCase(),t=i.getAttribute("tabIndex"),n=t!==null&&!isNaN(t)&&t>-1,s=!1;return Ua.test(e)?s=!i.disabled:s=n,s&&(!o||wa(i))}return!1},Ga=i=>{let o="file";for(let e in Mt)if(Mt[e].indexOf(i)>=0)return e==="discImage"?`${o}-disc-image`:`${o}-${e}`;return o},Bi=i=>i!=null,zi=i=>{let o=Ot;if(i){for(let e in Mt)if(Mt[e].indexOf(i.toLowerCase())>=0)return xa[e]}return o},Hi=i=>Ga(i||""),Ui=class{_files;constructor(){this._files={}}add(o,e){let t={index:0,position:0,retries:0,totalChunks:e};return this._files[o]=t,t}remove(o){this.has(o)&&(this._files[o]=null,delete this._files[o])}has(o){return o in this._files}get(o){return this._files[o]}},le=(()=>{class i{http;cancelEvent=new f;clearEvent=new f;completeEvent=new f;errorEvent=new f;pauseEvent=new f;removeEvent=new f;resumeEvent=new f;selectEvent=new f;successEvent=new f;uploadEvent=new f;uploadProgressEvent=new f;changeEvent=new f;async={autoUpload:!0,batch:!1,chunk:!1,concurrent:!0,removeField:"fileNames",removeHeaders:new At,removeMethod:"POST",removeUrl:"",responseType:"json",saveField:"files",saveHeaders:new At,saveMethod:"POST",saveUrl:"",withCredentials:!0};chunk={autoRetryAfter:100,size:1024*1024,maxAutoRetries:1,resumable:!0};component="Upload";chunkMap=new Ui;fileList=new Ri;constructor(e){this.http=e}get files(){return this.fileList}setChunkSettings(e){e!==!1&&(this.async.chunk=!0,typeof e=="object"&&(this.chunk=Object.assign({},this.chunk,e)))}onChange(){let e=this.fileList.filesFlat.filter(t=>t.state===v.Initial||t.state===v.Uploaded);this.changeEvent.emit(e.length>0?e:null)}addFiles(e){let t=new bi(e);if(this.selectEvent.emit(t),!t.isDefaultPrevented()){for(let n of e)this.fileList.add(n);this.async.autoUpload&&this.uploadFiles()}if(this.component==="FileSelect"){let n=this.fileList.filesFlat;this.changeEvent.emit(n.length>0?n:null)}}addInitialFiles(e){this.fileList.clear(),e.forEach(t=>{let n=Ns(t);this.fileList.add(n)})}addInitialFileSelectFiles(e){this.fileList.clear(),e.forEach(t=>{t instanceof File?this.fileList.add(ya(t)):this.fileList.add(Ns(t))})}resumeFile(e){let t=this.fileList.get(e);this.resumeEvent.emit(new Li(t[0])),this.fileList.setFilesStateByUid(e,v.Uploading),this._uploadFiles([t])}pauseFile(e){let t=this.fileList.get(e)[0];this.pauseEvent.emit(new Ti(t)),this.fileList.setFilesStateByUid(e,v.Paused)}removeFiles(e){let t=this.fileList.get(e),n=new xi(t,this.cloneRequestHeaders(this.async.removeHeaders));if(this.removeEvent.emit(n),!n.isDefaultPrevented()){if(this.component==="Upload"&&(t[0].state===v.Uploaded||t[0].state===v.Initial))this.performRemove(t,n);else if(this.fileList.remove(e),this.component==="FileSelect"){let s=this.fileList.filesFlat;this.changeEvent.emit(s.length>0?s:null)}}}cancelFiles(e){let t=this.fileList.get(e),n=new Ii(t);this.cancelEvent.emit(n);for(let s of t)s.httpSubscription&&s.httpSubscription.unsubscribe();this.fileList.remove(e),this.checkAllComplete()}clearFiles(){let e=new Mi;if(this.clearEvent.emit(e),!e.isDefaultPrevented()){let t=this.fileList.hasFileWithState([v.Initial,v.Uploaded]);this.fileList.clear(),t&&this.onChange()}}uploadFiles(){let e=[];this.async.concurrent&&(e=this.fileList.filesToUpload),!this.async.concurrent&&!this.fileList.hasFileWithState([v.Uploading])&&(e=this.fileList.firstFileToUpload?[this.fileList.firstFileToUpload]:[]),e&&e.length>0&&this._uploadFiles(e)}retryFiles(e){let t=[this.fileList.get(e)];t&&this._uploadFiles(t)}_uploadFiles(e){for(let t of e){if(t[0].state===v.Paused)return;let n=new ki(t,this.cloneRequestHeaders(this.async.saveHeaders));if(this.uploadEvent.emit(n),n.isDefaultPrevented())this.fileList.remove(t[0].uid),this.checkAllComplete();else{this.fileList.setFilesState(t,v.Uploading);let s=this.performUpload(t,n);t.forEach(a=>{a.httpSubscription=s})}}}performRemove(e,t){let n=this.async,s=e.map(x=>x.name),a=this.populateRemoveFormData(s,t.data),p=this.populateRequestOptions(t.headers,!1),A=new si(n.removeMethod,n.removeUrl,a,p);this.http.request(A).subscribe(x=>{this.onSuccess(x,e,"remove")},x=>{this.onError(x,e,"remove")})}performUpload(e,t){let n=this.async,s=this.populateUploadFormData(e,t.data),a=this.populateRequestOptions(t.headers),p=new si(n.saveMethod,n.saveUrl,s,a);return this.http.request(p).subscribe(x=>{x.type===xn.UploadProgress&&!this.async.chunk?this.onProgress(x,e):x instanceof Ln&&(this.onSuccess(x,e,"upload"),this.checkAllComplete())},x=>{this.onError(x,e,"upload"),this.checkAllComplete()})}onSuccess(e,t,n){if(n==="upload"&&this.async.chunk)if(this.onChunkProgress(t),this.isChunkUploadComplete(t[0].uid))this.removeChunkInfo(t[0].uid);else{this.updateChunkInfo(t[0].uid),this._uploadFiles([t]);return}let s=new yi(t,n,e);this.successEvent.emit(s),n==="upload"?this.fileList.setFilesState(t,s.isDefaultPrevented()?v.Failed:v.Uploaded):s.isDefaultPrevented()||this.fileList.remove(t[0].uid),s.isDefaultPrevented()||this.onChange()}onError(e,t,n){if(n==="upload"&&this.async.chunk){let a=this.chunk.maxAutoRetries,p=this.chunkMap.get(t[0].uid);if(p.retries<a){p.retries+=1,setTimeout(()=>{this.retryFiles(t[0].uid)},this.chunk.autoRetryAfter);return}}let s=new Di(t,n,e);this.errorEvent.emit(s),n==="upload"&&this.fileList.setFilesState(t,v.Failed)}onProgress(e,t){let n=Math.round(100*e.loaded/e.total),s=new It(t,n<100?n:100);this.uploadProgressEvent.emit(s)}onChunkProgress(e){let t=this.chunkMap.get(e[0].uid),n=0;t&&(t.index===t.totalChunks-1?n=100:n=Math.round((t.index+1)/t.totalChunks*100));let s=new It(e,n<100?n:100);this.uploadProgressEvent.emit(s)}checkAllComplete(){!this.fileList.hasFileWithState([v.Uploading,v.Paused])&&this.areAllSelectedFilesHandled()?this.completeEvent.emit():this.shouldUploadNextFile()&&this.uploadFiles()}shouldUploadNextFile(){return!this.async.concurrent&&this.fileList.hasFileWithState([v.Selected])&&!this.fileList.hasFileWithState([v.Uploading])}areAllSelectedFilesHandled(){return this.fileList.getFilesWithState(v.Selected).filter(t=>!t.validationErrors).length===0}cloneRequestHeaders(e){let t={};return e&&e.keys().forEach(n=>{n!=="constructor"&&n!=="__proto__"&&n!=="prototype"&&(t[n]=e.get(n))}),new At(t)}populateRequestOptions(e,t=!0){return{headers:e,reportProgress:t,responseType:this.async.responseType,withCredentials:this.async.withCredentials}}populateUploadFormData(e,t){let n=this.async.saveField,s=new FormData;if(this.populateClientFormData(s,t),this.async.chunk)s.append(n,this.getNextChunk(e[0])),s.append("metadata",this.getChunkMetadata(e[0]));else for(let a of e)s.append(n,a.rawFile);return s}populateRemoveFormData(e,t){let n=new FormData;this.populateClientFormData(n,t);for(let s of e)n.append(this.async.removeField,s);return n}populateClientFormData(e,t){for(let n in t)t.hasOwnProperty(n)&&e.append(n,t[n])}getNextChunk(e){let t=this.getChunkInfo(e),n=t.position+this.chunk.size;return e.rawFile.slice(t.position,n)}getChunkInfo(e){let t=this.chunkMap.get(e.uid);if(!t){let n=e.size>0?Math.ceil(e.size/this.chunk.size):1;t=this.chunkMap.add(e.uid,n)}return t}updateChunkInfo(e){let t=this.chunkMap.get(e);t.index<t.totalChunks-1&&(t.index+=1,t.position+=this.chunk.size,t.retries=0)}removeChunkInfo(e){this.chunkMap.remove(e)}getChunkMetadata(e){let t=this.chunkMap.get(e.uid),n={chunkIndex:t.index,contentType:e.rawFile.type,fileName:e.name,fileSize:e.size,fileUid:e.uid,totalChunks:t.totalChunks};return JSON.stringify(n)}isChunkUploadComplete(e){let t=this.chunkMap.get(e);return t?t.index+1===t.totalChunks:!1}static \u0275fac=function(t){return new(t||i)(te(bn))};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),Re=(()=>{class i{uploadService;zone;onActionButtonFocus=new f;onFileAction=new f;onFileFocus=new f;onTabOut=new f;onWrapperFocus=new f;onSelectButtonFocus=new f;actionButtonsVisible=!1;fileListVisible=!1;focused=!1;keyBindings;focusedFileIndex=0;_focusedIndex=-1;constructor(e,t){this.uploadService=e,this.zone=t}action(e){let t=he(e);return this.keyBindings[t]}process(e,t){let n=this.action(e);n&&n(e,t)}computeKeys(){this.keyBindings={[S.Space]:()=>this.handleSpace(),[S.Enter]:()=>this.handleEnter(),[S.NumpadEnter]:()=>this.handleEnter(),[S.Escape]:()=>this.handleEscape(),[S.Delete]:()=>this.handleDelete(),[S.Tab]:(e,t)=>this.handleTab(e,t),[S.ArrowUp]:e=>this.handleUpDown(e,-1),[S.ArrowDown]:e=>this.handleUpDown(e,1)}}focusSelectButton(){this.focused=!0,this._focusedIndex=-1,this.onSelectButtonFocus.emit()}handleEnter(){this.lastIndex>=0&&this.focusedIndex>=0&&this.focusedIndex<=this.lastFileIndex&&this.zone.run(()=>this.onFileAction.emit(S.Enter))}handleSpace(){this.lastIndex>=0&&this.focusedIndex>=0&&this.focusedIndex<=this.lastFileIndex&&this.zone.run(()=>this.onFileAction.emit(S.Space))}handleDelete(){this.focusedIndex>=0&&this.focusedIndex<=this.lastFileIndex&&this.zone.run(()=>this.onFileAction.emit(S.Delete))}handleEscape(){this.focusedIndex>=0&&this.focusedIndex<=this.lastFileIndex&&this.zone.run(()=>this.onFileAction.emit(S.Escape))}handleTab(e,t){let n=e.shiftKey;if(this.focusedIndex===-1&&this.fileListVisible&&!n){this.focusedIndex=this.focusedFileIndex,e.preventDefault(),this.onFileFocus.emit(this.focusedFileIndex);return}if(this.focusedIndex>-1&&this.focusedIndex<=this.lastFileIndex){if(n)this.focusedIndex=-1;else if(t!=="fileselect"&&this.actionButtonsVisible){this.focusedIndex=this.lastFileIndex+1;return}}if(this.focusedIndex===this.lastFileIndex+1){this.focusedIndex=n?this.focusedFileIndex:this.lastIndex,n&&(e.preventDefault(),this.onFileFocus.emit(this.focusedFileIndex));return}if(this.focusedIndex===this.lastIndex&&this.actionButtonsVisible&&n){this.focusedIndex-=1;return}this.onTabOut.emit()}handleUpDown(e,t){let n=this.focusedIndex>-1&&this.uploadService.files.count>=0,s=t>0?this.focusedFileIndex<this.lastFileIndex:this.focusedFileIndex>0;n&&s&&(e.preventDefault(),this.zone.run(()=>{this.focusedIndex+=t,this.focusedFileIndex+=t}))}get focusedIndex(){return this._focusedIndex}set focusedIndex(e){this.focused||this.onWrapperFocus.emit(),this._focusedIndex=e,this.focused=!0,this._focusedIndex>=0&&this._focusedIndex<=this.lastFileIndex&&this.onFileFocus.emit(e)}get lastFileIndex(){return this.actionButtonsVisible?this.lastIndex-2:this.lastIndex}get lastIndex(){let e=this.uploadService.files.count;return this.actionButtonsVisible?e+1:e-1}static \u0275fac=function(t){return new(t||i)(te(le),te(j))};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),je={},$e=(()=>{class i{addComponent(e,t){this.has(t)?je[t].push(e):je[t]=[e]}clearComponent(e,t){if(this.has(t)){let n=je[t].indexOf(e);je[t].splice(n,1)}}getComponents(e){return je[e]}has(e){return e in je}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),Cs="invalidMaxFileSize",Rs="invalidMinFileSize",Is="invalidFileExtension",Fa=(i,o)=>{o.length>0&&o.indexOf(i.extension.toLowerCase())<0&&(i.validationErrors=i.validationErrors||[],i.validationErrors.indexOf(Is)<0&&i.validationErrors.push(Is))},Pa=(i,o,e)=>{o!==0&&i.size<o&&(i.validationErrors=i.validationErrors||[],i.validationErrors.indexOf(Rs)<0&&i.validationErrors.push(Rs)),e!==0&&i.size>e&&(i.validationErrors=i.validationErrors||[],i.validationErrors.indexOf(Cs)<0&&i.validationErrors.push(Cs))},Ka=i=>i.map(e=>(e.substring(0,1)==="."?e:"."+e).toLowerCase()),ji=(i,o)=>{let e=Ka(o.allowedExtensions),t=o.maxFileSize,n=o.minFileSize,s;for(s=0;s<i.length;s++)Fa(i[s],e),Pa(i[s],n,t)},Vs={name:"@progress/kendo-angular-upload",productName:"Kendo UI for Angular",productCode:"KENDOUIANGULAR",productCodes:["KENDOUIANGULAR"],publishDate:1763638767,version:"21.1.0",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/"},$i=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B))};static \u0275dir=D({type:i,selectors:[["","kendoUploadFileTemplate",""],["","kendoFileSelectFileTemplate",""]]})}return i})(),Wi=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B))};static \u0275dir=D({type:i,selectors:[["","kendoUploadFileInfoTemplate",""],["","kendoFileSelectFileInfoTemplate",""]]})}return i})(),Bs=(()=>{class i{uploadService;navigation;cdr;injector;zone;fileTemplate;fileInfoTemplate;fileSelectButton;accept;disabled=!1;multiple=!0;showFileList=!0;tabindex=0;set restrictions(e){let t=Object.assign({},this.restrictions,e);this._restrictions=t}get restrictions(){return this._restrictions}zoneId;focusableId=`k-${ve()}`;hostDefaultClasses=!0;get hostDisabledClass(){return this.disabled}onBlur=new f;onFocus=new f;select=new f;remove=new f;_restrictions={allowedExtensions:[],maxFileSize:0,minFileSize:0};fileList;constructor(e,t,n,s,a){this.uploadService=e,this.navigation=t,this.cdr=n,this.injector=s,this.zone=a,this.fileList=this.uploadService.files}get formControl(){return this.injector.get(yn,null)?.control||null}get isControlRequired(){return rs(this.formControl)}get hasFileList(){let e=this.showFileList&&this.fileList.count>0;return this.navigation.fileListVisible=e,e}writeValue(e,t,n){let s=!0;e instanceof Array&&(e.forEach(a=>{t(a)||(s=!1)}),s&&this.uploadService[n](e)),e===null&&this.fileList.clear(),this.cdr.markForCheck()}onTouchedCallback=e=>{};onChangeCallback=e=>{};registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}onFileSelectButtonFocus(){this.navigation.focused||(this.navigation.focusedIndex=-1)}focus(){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.fileSelectButton.nativeElement.focus(),this.navigation.focused=!0})})}focusComponent(){this.focus()}blur(){this.navigation.focused&&(this.navigation.focused=!1,document.activeElement.blur())}blurComponent(){this.blur()}static \u0275fac=function(t){return new(t||i)(u(le),u(Re),u(Ne),u(ft),u(j))};static \u0275dir=D({type:i,contentQueries:function(t,n,s){if(t&1&&(F(s,$i,5),F(s,Wi,5)),t&2){let a;O(a=C())&&(n.fileTemplate=a.first),O(a=C())&&(n.fileInfoTemplate=a.first)}},viewQuery:function(t,n){if(t&1&&P(oa,7,k),t&2){let s;O(s=C())&&(n.fileSelectButton=s.first)}},hostVars:4,hostBindings:function(t,n){t&2&&G("k-upload",n.hostDefaultClasses)("k-disabled",n.hostDisabledClass)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",showFileList:"showFileList",tabindex:"tabindex",restrictions:"restrictions",zoneId:"zoneId",focusableId:"focusableId"},outputs:{onBlur:"blur",onFocus:"focus",select:"select",remove:"remove"},standalone:!1})}return i})(),zs=(()=>{class i{uploadService;localization;navigation;disabled;actionsLayout;clearButton;uploadButton;hostDefaultClass=!0;get actionButtonsEndClassName(){return this.actionsLayout==="end"}get actionButtonsStretchedClassName(){return this.actionsLayout==="stretched"}get actionButtonsStartClassName(){return this.actionsLayout==="start"}get actionButtonsCenterClassName(){return this.actionsLayout==="center"}constructor(e,t,n){this.uploadService=e,this.localization=t,this.navigation=n}onUploadButtonFocus(){this.navigation.focused||(this.navigation.focusedIndex=this.navigation.lastIndex)}onUploadButtonClick(e){e.stopImmediatePropagation(),this.performUpload()}performUpload(){this.disabled||(this.uploadService.uploadFiles(),this.navigation.focusSelectButton())}onClearButtonClick(e){e.stopImmediatePropagation(),this.clearFiles()}clearFiles(){this.disabled||(this.uploadService.clearFiles(),this.navigation.focusSelectButton())}textFor(e){return this.localization.get(e)}static \u0275fac=function(t){return new(t||i)(u(le),u(M),u(Re))};static \u0275cmp=L({type:i,selectors:[["kendo-upload-action-buttons"]],viewQuery:function(t,n){if(t&1&&(P(aa,7),P(ra,7)),t&2){let s;O(s=C())&&(n.clearButton=s.first),O(s=C())&&(n.uploadButton=s.first)}},hostVars:10,hostBindings:function(t,n){t&2&&G("k-actions",n.hostDefaultClass)("k-actions-end",n.actionButtonsEndClassName)("k-actions-stretched",n.actionButtonsStretchedClassName)("k-actions-start",n.actionButtonsStartClassName)("k-actions-center",n.actionButtonsCenterClassName)},inputs:{disabled:"disabled",actionsLayout:"actionsLayout"},decls:6,vars:2,consts:[["clearButton",""],["uploadButton",""],["role","button",1,"k-button","k-button-md","k-rounded-md","k-button-solid","k-button-solid-base","k-clear-selected",3,"click"],["role","button",1,"k-button","k-button-md","k-rounded-md","k-button-solid","k-button-solid-primary","k-upload-selected",3,"focus","click"]],template:function(t,n){if(t&1){let s=R();Xt(0,"button",2,0),Zt("click",function(p){return m(s),g(n.onClearButtonClick(p))}),I(2),Jt(),Xt(3,"button",3,1),Zt("focus",function(){return m(s),g(n.onUploadButtonFocus())})("click",function(p){return m(s),g(n.onUploadButtonClick(p))}),I(5),Jt()}t&2&&(l(2),$(" ",n.textFor("clearSelectedFiles")," "),l(3),$(" ",n.textFor("uploadSelectedFiles")," "))},encapsulation:2})}return i})(),Ms=(()=>{class i{navigationService;uploadService;files;index;fileClass=!0;focused=!1;element;constructor(e,t,n){this.navigationService=t,this.uploadService=n,this.element=e}focus(){this.element.nativeElement.focus()}get uidAttribute(){return this.files[0].uid}get tabIndex(){return this.navigationService.focusedFileIndex===this.index?"0":"-1"}get kFileError(){return this.files[0].state===v.Failed}get kFileInvalid(){return Ps(this.files)}get kFileProgress(){return this.files[0].state===v.Uploading||this.files[0].state===v.Paused}get kFileSuccess(){return this.uploadService.component==="Upload"?this.files[0].state===v.Uploaded||this.files[0].state===v.Initial:!1}get kStateFocused(){return this.focused}onFocus(){this.focused=!0}onBlur(){this.focused=!1}onClick(e){(!Vi(e.target)&&!lt(e.target,Ki)||e.target.closest(".k-upload-action"))&&(this.navigationService.focusedIndex=this.navigationService.focusedFileIndex=this.index)}static \u0275fac=function(t){return new(t||i)(u(k),u(Re),u(le))};static \u0275dir=D({type:i,selectors:[["","kendoUploadFileListItem",""]],hostVars:14,hostBindings:function(t,n){t&1&&E("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("click",function(a){return n.onClick(a)}),t&2&&(N("data-uid",n.uidAttribute)("tabIndex",n.tabIndex),G("k-file",n.fileClass)("k-file-error",n.kFileError)("k-file-invalid",n.kFileInvalid)("k-file-progress",n.kFileProgress)("k-file-success",n.kFileSuccess)("k-focus",n.kStateFocused))},inputs:{files:"files",index:"index"}})}return i})(),Hs=(()=>{class i{uploadService;progressComplete=0;localization;uploadProgressSubscription;constructor(e){this.uploadService=e}subscribeUploadProgress(e){this.uploadProgressSubscription=this.uploadService.uploadProgressEvent.subscribe(e)}fileHasValidationErrors(e){return Fs(e)}filesHaveValidationErrors(e){return Ps(e)}ngOnDestroy(){this.uploadProgressSubscription.unsubscribe()}getFileValidationMessage(e){let t;return e.validationErrors&&e.validationErrors.length>0&&(t=this.localization.get(e.validationErrors[0])),t}getTotalFilesSizeMessage(e){return Gi(e)}textFor(e){return this.localization.get(e)}static \u0275fac=function(t){return new(t||i)(u(le))};static \u0275cmp=L({type:i,selectors:[["ng-component"]],standalone:!1,decls:0,vars:0,template:function(t,n){},encapsulation:2})}return i})(),js=(()=>{class i{uploadService;localization;navigation;file;disabled;progress;retrySVGIcon=Bn;playSVGIcon=Wn;pauseSVGIcon=Ai;cancelSVGIcon=Hn;deleteSVGIcon=Ve;constructor(e,t,n){this.uploadService=e,this.localization=t,this.navigation=n}onRetryClick(){this.disabled||this.uploadService.retryFiles(this.file.uid)}onRemoveCancelClick(e){if(this.disabled)return;e.stopImmediatePropagation();let t=this.file.uid;this.file.state===v.Uploading?this.uploadService.cancelFiles(t):this.uploadService.removeFiles(t),this.navigation.focusSelectButton()}onPauseResumeClick(){if(this.disabled)return;let e=this.file.uid;this.file.state===v.Paused?this.uploadService.resumeFile(e):this.uploadService.pauseFile(e)}get actionButtonTitle(){return this.file.state===v.Uploading?this.localization.get("cancel"):this.localization.get("remove")}get retryButtonTitle(){return this.localization.get("retry")}get pauseResumeButtonTitle(){return this.file.state===v.Uploading?this.localization.get("pause"):this.localization.get("resume")}get isUploading(){return this.file.state===v.Uploading}get isFailed(){return this.file.state===v.Failed}get isPaused(){return this.file.state===v.Paused}get isResumable(){let e=this.uploadService,t=e.async.chunk&&e.chunk.resumable,n=this.file.state===v.Paused||this.file.state===v.Uploading;return t&&n}get isActionButtonVisible(){return!((this.file.state===v.Uploaded||this.file.state===v.Initial)&&!this.uploadService.async.removeUrl&&this.uploadService.component==="Upload")}static \u0275fac=function(t){return new(t||i)(u(le),u(M),u(Re))};static \u0275cmp=L({type:i,selectors:[["kendo-upload-file-list-item-action-button"]],inputs:{file:"file",disabled:"disabled",progress:"progress"},decls:5,vars:4,consts:[[1,"k-upload-actions"],["class","k-upload-pct",4,"ngIf"],["kendoButton","","type","button","class","k-upload-action k-retry","fillMode","flat","icon","refresh-sm",3,"svgIcon","pointerdown","click",4,"ngIf"],["kendoButton","","type","button","class","k-upload-action","fillMode","flat",3,"svgIcon","icon","pointerdown","click",4,"ngIf"],["kendoButton","","class","k-upload-action","fillMode","flat","type","button",3,"k-delete","svgIcon","icon","click",4,"ngIf"],[1,"k-upload-pct"],["kendoButton","","type","button","fillMode","flat","icon","refresh-sm",1,"k-upload-action","k-retry",3,"pointerdown","click","svgIcon"],["kendoButton","","type","button","fillMode","flat",1,"k-upload-action",3,"pointerdown","click","svgIcon","icon"],["kendoButton","","fillMode","flat","type","button",1,"k-upload-action",3,"click","svgIcon","icon"]],template:function(t,n){t&1&&(d(0,"span",0),h(1,la,2,1,"span",1)(2,ca,1,4,"button",2)(3,ua,1,5,"button",3)(4,pa,1,7,"button",4),_()),t&2&&(l(),r("ngIf",n.isUploading||n.isPaused),l(),r("ngIf",n.isFailed),l(),r("ngIf",n.isResumable),l(),r("ngIf",n.isActionButtonVisible))},dependencies:[H,ae],encapsulation:2})}return i})(),Va=(()=>{class i extends Hs{localization;disabled;files;fileInfoTemplate;filesHaveErrors;copySVGIcon=Be;constructor(e,t){super(t),this.localization=e,this.subscribeUploadProgress(n=>{n.files[0].uid===this.files[0].uid&&(this.progressComplete=n.percentComplete)})}get showProgress(){return this.files[0].state===v.Uploading||this.files[0].state===v.Paused?"active":"inactive"}ngOnInit(){this.filesHaveErrors=super.filesHaveValidationErrors(this.files)}fileStatusText(e){let t=e.validationErrors;return Bi(t)?this.getFileValidationMessage(e):this.getTotalFilesSizeMessage([e])}get batchStatusText(){let e=this.files[0].state,t=this.files.length;return e===v.Uploaded?`${t} ${this.textFor("filesBatchStatusUploaded")}`:e===v.Failed?`${t} ${this.textFor("filesBatchStatusFailed")}`:`${t} ${this.textFor("filesBatchStatus")}`}get isUploadSuccessful(){return this.files[0].state===v.Uploaded}get isUploadFailed(){return this.files[0].state===v.Failed}static \u0275fac=function(t){return new(t||i)(u(M),u(le))};static \u0275cmp=L({type:i,selectors:[["kendo-upload-file-list-multiple-items"]],inputs:{disabled:"disabled",files:"files",fileInfoTemplate:"fileInfoTemplate"},features:[w],decls:7,vars:10,consts:[[3,"value","label"],[1,"k-file-icon-wrapper"],["name","copy","size","xxlarge","innerCssClass","k-file-icon",3,"svgIcon"],[1,"k-multiple-files-wrapper"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"file","disabled","progress"],["class","k-file-info",4,"ngFor","ngForOf"],[1,"k-file-summary"],[1,"k-file-info"],[1,"k-file-name",3,"title"],[3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){t&1&&(T(0,"kendo-progressbar",0),d(1,"span",1),T(2,"kendo-icon-wrapper",2),_(),d(3,"span",3),h(4,ma,4,2,"ng-container",4)(5,ga,1,6,"ng-container",5),_(),T(6,"kendo-upload-file-list-item-action-button",6)),t&2&&(r("@progressState",n.showProgress)("value",n.progressComplete)("label",Ke(9,ks)),l(2),r("svgIcon",n.copySVGIcon),l(2),r("ngIf",!n.fileInfoTemplate),l(),r("ngIf",n.fileInfoTemplate),l(),r("file",n.files[0])("disabled",n.disabled)("progress",n.progressComplete))},dependencies:[Ci,de,H,oe,Oe,ne,js],encapsulation:2,data:{animation:[oi("progressState",[st("active",De({opacity:1})),st("inactive",De({opacity:0})),ye("void => active",De({opacity:0})),ye("inactive => active",De({opacity:1})),ye("active => inactive",ai("1s 2s ease-out"))])]}})}return i})(),Ba=(()=>{class i extends Hs{localization;disabled;file;fileInfoTemplate;constructor(e,t){super(t),this.localization=e,this.subscribeUploadProgress(n=>{n.files[0].uid===this.file.uid&&(this.progressComplete=n.percentComplete)})}get fileStatusText(){let e=this.file.validationErrors;return this.file.state===v.Uploaded?`${this.textFor("fileStatusUploaded")}`:this.file.state===v.Failed?`${this.textFor("fileStatusFailed")}`:Bi(e)?this.getFileValidationMessage(this.file):this.getTotalFilesSizeMessage([this.file])}get showProgress(){return this.file.state===v.Uploading||this.file.state===v.Paused?"active":"inactive"}get fileGroupClass(){return Hi(this.file.extension)}get fileSVGGroupIcon(){return zi(this.file.extension)}get isUploadSuccessful(){return this.file.state===v.Uploaded}get isUploadFailed(){return this.file.state===v.Failed}get isNotYetUploaded(){return!this.isUploadFailed&&!this.isUploadSuccessful}static \u0275fac=function(t){return new(t||i)(u(M),u(le))};static \u0275cmp=L({type:i,selectors:[["kendo-upload-file-list-single-item"]],inputs:{disabled:"disabled",file:"file",fileInfoTemplate:"fileInfoTemplate"},features:[w],decls:7,vars:11,consts:[[3,"value","label"],[1,"k-file-icon-wrapper"],["size","xxlarge","innerCssClass","k-file-icon",3,"name","svgIcon"],[1,"k-file-info"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"file","disabled","progress"],[1,"k-file-name",3,"title"],[3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){t&1&&(T(0,"kendo-progressbar",0),d(1,"span",1),T(2,"kendo-icon-wrapper",2),_(),d(3,"span",3),h(4,Aa,5,9,"ng-container",4)(5,va,1,8,"ng-container",5),_(),T(6,"kendo-upload-file-list-item-action-button",6)),t&2&&(r("@progressState",n.showProgress)("value",n.progressComplete)("label",Ke(10,ks)),l(2),r("name",n.fileGroupClass)("svgIcon",n.fileSVGGroupIcon),l(2),r("ngIf",!n.fileInfoTemplate),l(),r("ngIf",n.fileInfoTemplate),l(),r("file",n.file)("disabled",n.disabled)("progress",n.progressComplete))},dependencies:[Ci,de,H,Oe,ne,js],encapsulation:2,data:{animation:[oi("progressState",[st("active",De({opacity:1})),st("inactive",De({opacity:0})),ye("void => active",De({opacity:0})),ye("inactive => active",De({opacity:1})),ye("active => inactive",ai("1s 2s ease-out"))])]}})}return i})(),$s=(()=>{class i{uploadService;navigation;disabled;fileList;fileTemplate;fileInfoTemplate;fileListItems;fileListRole="list";focusSubscription;actionSubscription;constructor(e,t){this.uploadService=e,this.navigation=t,this.onItemFocus(),this.onItemAction()}onItemFocus(){this.focusSubscription=this.navigation.onFileFocus.subscribe(e=>{this.fileListItems.toArray()[e].focus()})}onItemAction(){this.actionSubscription=this.navigation.onFileAction.subscribe(e=>{this.itemActionHandler(e)})}itemActionHandler(e){let t=this.navigation.focusedIndex,n=this.fileListItems.toArray(),s=n.length,a=n[t],p=a.uidAttribute,A=this.uploadService.files.get(p);if(e===S.Escape&&A[0].state===v.Uploading){this.uploadService.cancelFiles(p),this.navigation.focusSelectButton();return}if((e===S.Enter||e===S.NumpadEnter)&&A[0].state===v.Failed){this.uploadService.retryFiles(p);return}e===S.Delete&&(A[0].state===v.Uploading?this.uploadService.cancelFiles(p):this.hasDelete(a)&&this.uploadService.removeFiles(p),t<s-1?n[t+1].focus():s===1?this.navigation.focusSelectButton():t===s-1&&(this.navigation.focusedIndex=this.navigation.focusedFileIndex=t-1,n[t-1].focus()));let x=this.uploadService.async.chunk;e===S.Space&&A[0].state!==v.Uploaded&&x&&(A[0].state===v.Paused?this.uploadService.resumeFile(p):this.uploadService.pauseFile(p))}hasDelete(e){return e.element.nativeElement.getElementsByClassName("k-svg-i-x").length>0}ngOnDestroy(){this.focusSubscription.unsubscribe(),this.actionSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(u(le),u(Re))};static \u0275cmp=L({type:i,selectors:[["","kendo-upload-file-list",""]],viewQuery:function(t,n){if(t&1&&P(Ms,5),t&2){let s;O(s=C())&&(n.fileListItems=s)}},hostVars:1,hostBindings:function(t,n){t&2&&N("role",n.fileListRole)},inputs:{disabled:"disabled",fileList:"fileList",fileTemplate:"fileTemplate",fileInfoTemplate:"fileInfoTemplate"},attrs:Sa,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["kendoUploadFileListItem","","role","listitem",3,"files","index"],["class","k-file-single",3,"disabled","file","fileInfoTemplate",4,"ngIf"],["class","k-file-multiple",3,"disabled","files","fileInfoTemplate",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[1,"k-file-single",3,"disabled","file","fileInfoTemplate"],[1,"k-file-multiple",3,"disabled","files","fileInfoTemplate"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){t&1&&h(0,Ca,4,5,"ng-template",0),t&2&&r("ngForOf",n.fileList)},dependencies:[oe,Ms,H,Ba,Va,ne],encapsulation:2})}return i})(),Ws=(()=>{class i{localization;fileList;isFailed;isPaused;isUploading;statusText;checkmarkIcon=$n;exceptionSVGIcon=Qn;uploadSVGIcon=fi;pauseSVGIcon=Ai;constructor(e){this.localization=e}get iconClass(){if(!this.isUploading&&!this.isFailed)return"checkmark";if(!this.isUploading&&this.isFailed)return"exception";if(this.isUploading)return"upload";if(this.isPaused)return"pause-sm"}get SVGIconClass(){if(!this.isUploading&&!this.isFailed)return this.checkmarkIcon;if(!this.isUploading&&this.isFailed)return this.exceptionSVGIcon;if(this.isUploading)return this.uploadSVGIcon;if(this.isPaused)return this.pauseSVGIcon}ngDoCheck(){this.isPaused=this.fileList.hasFileWithState([v.Paused]),this.isFailed=this.fileList.hasFileWithState([v.Failed]),this.isUploading=this.fileList.hasFileWithState([v.Uploading]),this.isPaused&&!this.isUploading?this.statusText=this.localization.get("headerStatusPaused"):this.statusText=this.isUploading?this.localization.get("headerStatusUploading"):this.localization.get("headerStatusUploaded")}static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275cmp=L({type:i,selectors:[["kendo-upload-status-total"]],inputs:{fileList:"fileList"},decls:2,vars:3,consts:[[3,"name","svgIcon"]],template:function(t,n){t&1&&(T(0,"kendo-icon-wrapper",0),I(1)),t&2&&(r("name",n.iconClass)("svgIcon",n.SVGIconClass),l(),$(" ",n.statusText," "))},dependencies:[de],encapsulation:2})}return i})(),Qs=(()=>{class i{uploadService;navigation;dir;disabled;multiple;restrictions;accept;required;type="file";autocomplete="off";tabIndex=-1;ariaHidden=!0;element;constructor(e,t,n){this.uploadService=e,this.navigation=t,this.element=n}classNames=!0;get nameAttribute(){return this.uploadService.async.saveField}get multipleAttribute(){return this.multiple?"multiple":null}get dirAttribute(){return this.dir}get disabledAttribute(){return this.disabled?"true":null}get acceptAttribute(){return this.accept?this.accept:null}get requiredAttribute(){return this.required?"":null}onInputChange(e){let t=navigator.userAgent,n=/(webkit)[ \/]([\w.]+)/i,s=/(windows)[ \/]([\w.]+)/i,a=ka(e.target);a=Dt(a,!this.uploadService.async.batch),ji(a,this.restrictions),this.multiple||this.uploadService.clearFiles(),this.uploadService.addFiles(a);let p=this.element.nativeElement;(t.match(n)||t.match(s))&&(p.type="",p.type="file"),setTimeout(()=>{this.navigation.focusedIndex=-1})}static \u0275fac=function(t){return new(t||i)(u(le),u(Re),u(k))};static \u0275dir=D({type:i,selectors:[["","kendoFileSelect",""]],hostVars:12,hostBindings:function(t,n){t&1&&E("change",function(a){return n.onInputChange(a)}),t&2&&(N("type",n.type)("autocomplete",n.autocomplete)("tabindex",n.tabIndex)("aria-hidden",n.ariaHidden)("name",n.nameAttribute)("multiple",n.multipleAttribute)("dir",n.dirAttribute)("disabled",n.disabledAttribute)("accept",n.acceptAttribute)("required",n.requiredAttribute),G("k-hidden",n.classNames))},inputs:{dir:"dir",disabled:"disabled",multiple:"multiple",restrictions:"restrictions",accept:"accept",required:"required"}})}return i})(),qs=(()=>{class i{element;renderer;hoverClass;lastDragElement;hideIntervalElement=null;onElementDragEnterListener(){return this.addClass(this.hoverClass),this.lastDragElement=new Date,this.hideIntervalElement||(this.hideIntervalElement=setInterval(()=>{this.calculateTimeDiff(this.lastDragElement)<100||(this.removeClass(this.hoverClass),clearInterval(this.hideIntervalElement),this.hideIntervalElement=null)},100)),!1}onElementDragOverListener(){return this.lastDragElement=new Date,!1}constructor(e,t,n){this.element=e,this.renderer=t,this.hoverClass=n}calculateTimeDiff(e){return new Date().getTime()-e.getTime()}addClass(e){this.renderer.addClass(this.element.nativeElement,e)}removeClass(e){this.renderer.removeClass(this.element.nativeElement,e)}static \u0275fac=function(t){return new(t||i)(u(k),u(X),u("hoverClass"))};static \u0275dir=D({type:i,hostBindings:function(t,n){t&1&&E("dragenter",function(){return n.onElementDragEnterListener()})("dragover",function(){return n.onElementDragOverListener()})},standalone:!1})}return i})(),Xs=(()=>{class i extends qs{ngZone;uploadService;disabled;multiple;restrictions;initialClassName=!0;unsubscribeDocumentDragEnter;unsubscribeDocumentDragOver;lastDragDocument;hideIntervalDocument=null;activeClass="k-dropzone-active";constructor(e,t,n,s){super(e,t,"k-hover"),this.ngZone=n,this.uploadService=s,this.ngZone.runOutsideAngular(()=>{this.unsubscribeDocumentDragEnter=this.renderer.listen("document","dragenter",()=>this.onDocumentDragEnter()),this.unsubscribeDocumentDragOver=this.renderer.listen("document","dragover",()=>this.onDocumentDragOver())})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{this.unsubscribeDocumentDragEnter&&this.unsubscribeDocumentDragEnter(),this.unsubscribeDocumentDragOver&&this.unsubscribeDocumentDragOver()})}onDocumentDragEnter(){return this.addClass(this.activeClass),this.lastDragDocument=new Date,this.hideIntervalDocument||(this.hideIntervalDocument=setInterval(()=>{this.calculateTimeDiff(this.lastDragDocument)<100||(this.removeClass(this.activeClass),clearInterval(this.hideIntervalDocument),this.hideIntervalDocument=null)},100)),!1}onDocumentDragOver(){return this.lastDragDocument=new Date,!1}onDropListener(e){let t=e.dataTransfer.files;if(t.length>0&&!this.disabled){let n=Pi(t);n=Dt(n,!this.uploadService.async.batch),this.multiple||(n.splice(1,n.length-1),this.uploadService.clearFiles()),ji(n,this.restrictions),this.uploadService.addFiles(n)}return!1}static \u0275fac=function(t){return new(t||i)(u(k),u(X),u(j),u(le))};static \u0275dir=D({type:i,selectors:[["","kendoUploadInternalDropZone",""],["","kendoFileSelectInternalDropZone",""]],hostVars:4,hostBindings:function(t,n){t&1&&E("drop",function(a){return n.onDropListener(a)}),t&2&&G("k-dropzone",n.initialClassName)("k-upload-dropzone",n.initialClassName)},inputs:{disabled:"disabled",multiple:"multiple",restrictions:"restrictions"},features:[w]})}return i})(),Tt=(()=>{class i extends ze{cancel;clearSelectedFiles;dropFilesHere;externalDropFilesHere;filesBatchStatus;filesBatchStatusFailed;filesBatchStatusUploaded;fileStatusFailed;fileStatusUploaded;headerStatusPaused;headerStatusUploaded;headerStatusUploading;invalidFileExtension;invalidMaxFileSize;invalidMinFileSize;pause;remove;resume;retry;select;uploadSelectedFiles;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Fe(i)))(n||i)}})();static \u0275dir=D({type:i,inputs:{cancel:"cancel",clearSelectedFiles:"clearSelectedFiles",dropFilesHere:"dropFilesHere",externalDropFilesHere:"externalDropFilesHere",filesBatchStatus:"filesBatchStatus",filesBatchStatusFailed:"filesBatchStatusFailed",filesBatchStatusUploaded:"filesBatchStatusUploaded",fileStatusFailed:"fileStatusFailed",fileStatusUploaded:"fileStatusUploaded",headerStatusPaused:"headerStatusPaused",headerStatusUploaded:"headerStatusUploaded",headerStatusUploading:"headerStatusUploading",invalidFileExtension:"invalidFileExtension",invalidMaxFileSize:"invalidMaxFileSize",invalidMinFileSize:"invalidMinFileSize",pause:"pause",remove:"remove",resume:"resume",retry:"retry",select:"select",uploadSelectedFiles:"uploadSelectedFiles"},standalone:!1,features:[w]})}return i})(),Qi=(()=>{class i extends Tt{service;constructor(e){super(),this.service=e}static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275dir=D({type:i,selectors:[["","kendoUploadLocalizedMessages",""],["","kendoFileSelectLocalizedMessages",""],["","kendoUploadDropZoneLocalizedMessages",""]],features:[K([{provide:Tt,useExisting:z(()=>i)}]),w]})}return i})(),za={multi:!0,provide:ri,useExisting:z(()=>qi)},Ha=0,qi=(()=>{class i extends Bs{uploadService;localization;navigation;dropZoneService;zone;renderer;cdr;injector;set autoUpload(e){this.uploadService.async.autoUpload=e}get autoUpload(){return this.uploadService.async.autoUpload}set batch(e){this.uploadService.async.batch=e}get batch(){return this.uploadService.async.batch}set withCredentials(e){this.uploadService.async.withCredentials=e}get withCredentials(){return this.uploadService.async.withCredentials}set saveField(e){this.uploadService.async.saveField=e}get saveField(){return this.uploadService.async.saveField}set saveHeaders(e){this.uploadService.async.saveHeaders=e}get saveHeaders(){return this.uploadService.async.saveHeaders}set saveMethod(e){this.uploadService.async.saveMethod=e}get saveMethod(){return this.uploadService.async.saveMethod}set saveUrl(e){this.uploadService.async.saveUrl=e}get saveUrl(){return this.uploadService.async.saveUrl}set responseType(e){this.uploadService.async.responseType=e}get responseType(){return this.uploadService.async.responseType}set removeField(e){this.uploadService.async.removeField=e}get removeField(){return this.uploadService.async.removeField}set removeHeaders(e){this.uploadService.async.removeHeaders=e}get removeHeaders(){return this.uploadService.async.removeHeaders}set removeMethod(e){this.uploadService.async.removeMethod=e}get removeMethod(){return this.uploadService.async.removeMethod}set removeUrl(e){this.uploadService.async.removeUrl=e}get removeUrl(){return this.uploadService.async.removeUrl}chunkable=!1;set concurrent(e){this.uploadService.async.concurrent=e}get concurrent(){return this.uploadService.async.concurrent}showFileList=!0;set tabIndex(e){this.tabindex=e}get tabIndex(){return this.tabindex}actionsLayout="end";fileSelectInput;cancel=new f;clear=new f;complete=new f;error=new f;pause=new f;resume=new f;success=new f;upload=new f;uploadProgress=new f;valueChange=new f;get dir(){return this.direction}direction;wrapper;fileListId;documentClick;blurSubscription;wrapperFocusSubscription;selectButtonFocusSubscription;localizationChangeSubscription;subs;constructor(e,t,n,s,a,p,A,x,U){super(e,n,A,U,a),this.uploadService=e,this.localization=t,this.navigation=n,this.dropZoneService=s,this.zone=a,this.renderer=p,this.cdr=A,this.injector=U,Ce(Vs),this.fileList=this.uploadService.files,this.localizationChangeSubscription=t.changes.subscribe(({rtl:W})=>{this.direction=W?"rtl":"ltr"}),this.direction=t.rtl?"rtl":"ltr",this.navigation.computeKeys(),this.wrapper=x.nativeElement,this.subscribeBlur(),this.subscribeFocus(),this.attachEventHandlers()}ngOnInit(){this.verifySettings();let{buttonId:e,fileListId:t}=this.getIds();this.focusableId=e,this.fileListId=t,this.uploadService.setChunkSettings(this.chunkable),this.zoneId&&this.dropZoneService.addComponent(this,this.zoneId),this.zone.runOutsideAngular(()=>{this.subs.add(this.renderer.listen(this.wrapper,"keydown",n=>this.handleKeydown(n)))})}ngOnChanges(e){if(ke("chunkable",e)){let t=e.chunkable.currentValue;typeof t=="boolean"&&(this.uploadService.async.chunk=t),typeof t=="object"&&t!==null&&(this.uploadService.async.chunk=!0,this.uploadService.chunk=Object.assign({},this.uploadService.chunk,t))}}ngOnDestroy(){this.fileList.clear(),this.zoneId&&this.dropZoneService.clearComponent(this,this.zoneId),this.blurSubscription&&this.blurSubscription.unsubscribe(),this.wrapperFocusSubscription&&this.wrapperFocusSubscription.unsubscribe(),this.selectButtonFocusSubscription&&this.selectButtonFocusSubscription.unsubscribe(),this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe(),this.subs&&this.subs.unsubscribe()}writeValue(e){super.writeValue(e,ws,"addInitialFiles")}get showActionButtons(){let e=!1;if(!this.autoUpload){let t=this.fileList.filesToUpload.length>0,n=this.fileList.hasFileWithState([v.Uploading]);this.concurrent&&t&&(e=!0),!this.concurrent&&t&&!n&&(e=!0)}return this.navigation.actionButtonsVisible=e,e}get showTotalStatus(){let e=[v.Uploaded,v.Uploading,v.Failed,v.Paused];return!!this.fileList.hasFileWithState(e)}textFor(e){return this.localization.get(e)}getIds(){let e=++Ha,t=`k-upload-button-${e}`,n=`k-upload-file-list-${e}`;return{buttonId:t,fileListId:n}}pauseFileByUid(e){this.uploadService.pauseFile(e)}resumeFileByUid(e){this.uploadService.resumeFile(e)}removeFilesByUid(e){this.uploadService.removeFiles(e)}retryUploadByUid(e){this.uploadService.retryFiles(e)}cancelUploadByUid(e){this.uploadService.cancelFiles(e)}uploadFiles(){this.fileList.filesToUpload.length&&this.uploadService.uploadFiles()}clearFiles(){this.uploadService.clearFiles()}addFiles(e){this.uploadService.addFiles(e)}isEmpty(){return!1}verifySettings(){if(Ee()&&this.batch&&this.chunkable!==!1)throw new Error("The file chunking functionality requires the batch setting to be disabled.")}subscribeBlur(){ge()&&this.zone.runOutsideAngular(()=>{this.documentClick=tt(document,"click").pipe(Qt(e=>!(this.wrapper!==e.target&&this.wrapper.contains(e.target)))),this.blurSubscription=Wt(this.documentClick,this.navigation.onTabOut).subscribe(()=>{this.navigation.focused&&this.zone.run(()=>{this.navigation.focused=!1,this.onTouchedCallback(),this.onBlur.emit()})})})}handleKeydown(e){if(!this.disabled){if(e.target===this.fileSelectButton.nativeElement&&(e.code===S.Enter||e.code===S.Space)){e.preventDefault(),this.fileSelectInput.nativeElement.click();return}(lt(e.target,Ks)||!Vi(e.target)&&!lt(e.target,Ki))&&this.navigation.process(e)}}subscribeFocus(){this.wrapperFocusSubscription=this.navigation.onWrapperFocus.subscribe(()=>{this.onFocus.emit()}),this.selectButtonFocusSubscription=this.navigation.onSelectButtonFocus.subscribe(()=>{this.fileSelectButton.nativeElement.focus()})}attachEventHandlers(){this.subs=this.uploadService.cancelEvent.subscribe(e=>{this.cancel.emit(e)}),this.subs.add(this.uploadService.changeEvent.subscribe(e=>{this.onChangeCallback(e),this.valueChange.emit(e)})),this.subs.add(this.uploadService.clearEvent.subscribe(e=>{this.clear.emit(e)})),this.subs.add(this.uploadService.completeEvent.subscribe(()=>{this.complete.emit()})),this.subs.add(this.uploadService.errorEvent.subscribe(e=>{this.error.emit(e)})),this.subs.add(this.uploadService.pauseEvent.subscribe(e=>{this.pause.emit(e)})),this.subs.add(this.uploadService.removeEvent.subscribe(e=>{this.remove.emit(e)})),this.subs.add(this.uploadService.resumeEvent.subscribe(e=>{this.resume.emit(e)})),this.subs.add(this.uploadService.selectEvent.subscribe(e=>{this.select.emit(e)})),this.subs.add(this.uploadService.successEvent.subscribe(e=>{this.success.emit(e)})),this.subs.add(this.uploadService.uploadEvent.subscribe(e=>{this.upload.emit(e)})),this.subs.add(this.uploadService.uploadProgressEvent.subscribe(e=>{this.uploadProgress.emit(e)}))}static \u0275fac=function(t){return new(t||i)(u(le),u(M),u(Re),u($e),u(j),u(X),u(Ne),u(k),u(ft))};static \u0275cmp=L({type:i,selectors:[["kendo-upload"]],viewQuery:function(t,n){if(t&1&&P(Us,7),t&2){let s;O(s=C())&&(n.fileSelectInput=s.first)}},hostVars:1,hostBindings:function(t,n){t&2&&N("dir",n.dir)},inputs:{autoUpload:"autoUpload",batch:"batch",withCredentials:"withCredentials",saveField:"saveField",saveHeaders:"saveHeaders",saveMethod:"saveMethod",saveUrl:"saveUrl",responseType:"responseType",removeField:"removeField",removeHeaders:"removeHeaders",removeMethod:"removeMethod",removeUrl:"removeUrl",chunkable:"chunkable",concurrent:"concurrent",showFileList:"showFileList",tabIndex:"tabIndex",actionsLayout:"actionsLayout"},outputs:{cancel:"cancel",clear:"clear",complete:"complete",error:"error",pause:"pause",resume:"resume",success:"success",upload:"upload",uploadProgress:"uploadProgress",valueChange:"valueChange"},exportAs:["kendoUpload"],features:[K([M,Re,le,$e,za,{provide:fe,useValue:"kendo.upload"},{provide:Ni,useExisting:z(()=>i)}]),w,Me],decls:13,vars:19,consts:()=>{let e;e=$localize`:kendo.upload.cancel|The text for the Cancel button:Cancel`;let t;t=$localize`:kendo.upload.clearSelectedFiles|The text for the Clear button:Clear`;let n;n=$localize`:kendo.upload.dropFilesHere|The drop zone hint:Drop files here to upload`;let s;s=$localize`:kendo.upload.filesBatchStatus|The status message for a batch of files:files`;let a;a=$localize`:kendo.upload.filesBatchStatusFailed|The status message for a batch of files after failed upload:files failed to upload.`;let p;p=$localize`:kendo.upload.filesBatchStatusUploaded|The status message for a batch of files after successful upload:files successfully uploaded.`;let A;A=$localize`:kendo.upload.fileStatusFailed|The file status message after failed upload:File failed to upload.`;let x;x=$localize`:kendo.upload.fileStatusUploaded|The file status message after successful upload:File successfully uploaded.`;let U;U=$localize`:kendo.upload.headerStatusPaused|The header status message when the file upload is paused:Paused`;let W;W=$localize`:kendo.upload.headerStatusUploaded|The header status message after file upload completion:Done`;let re;re=$localize`:kendo.upload.headerStatusUploading|The header status message during file upload:Uploading...`;let Qe;Qe=$localize`:kendo.upload.invalidFileExtension|The text for the invalid allowed extensions restriction message:File type not allowed.`;let qe;qe=$localize`:kendo.upload.invalidMaxFileSize|The text for the invalid max file size restriction message:File size too large.`;let Xe;Xe=$localize`:kendo.upload.invalidMinFileSize|The text for the invalid min file size restriction message:File size too small.`;let Je;Je=$localize`:kendo.upload.pause|The text for the Pause button:Pause`;let Ze;Ze=$localize`:kendo.upload.remove|The text for the Remove button:Remove`;let Ye;Ye=$localize`:kendo.upload.resume|The text for the Resume button:Resume`;let et;et=$localize`:kendo.upload.retry|The text for the Retry button:Retry`;let J;J=$localize`:kendo.upload.select|The text for the Select button:Select files...`;let En;return En=$localize`:kendo.upload.uploadSelectedFiles|The text for the Upload files button:Upload`,[["fileSelectButton",""],["fileSelectInput",""],["kendoUploadLocalizedMessages","","cancel",e,"clearSelectedFiles",t,"dropFilesHere",n,"filesBatchStatus",s,"filesBatchStatusFailed",a,"filesBatchStatusUploaded",p,"fileStatusFailed",A,"fileStatusUploaded",x,"headerStatusPaused",U,"headerStatusUploaded",W,"headerStatusUploading",re,"invalidFileExtension",Qe,"invalidMaxFileSize",qe,"invalidMinFileSize",Xe,"pause",Je,"remove",Ze,"resume",Ye,"retry",et,"select",J,"uploadSelectedFiles",En],["kendoUploadInternalDropZone","",3,"restrictions","multiple","disabled"],[1,"k-upload-button-wrap"],["kendoButton","","type","button",1,"k-upload-button",3,"click","focus","id"],["kendoFileSelect","",3,"dir","accept","restrictions","multiple","disabled","required"],["class","k-upload-status",3,"fileList",4,"ngIf"],[1,"k-dropzone-hint"],["kendo-upload-file-list","","class","k-upload-files k-reset",3,"disabled","fileList","fileTemplate","fileInfoTemplate","id",4,"ngIf"],[3,"disabled","actionsLayout",4,"ngIf"],[1,"k-upload-status",3,"fileList"],["kendo-upload-file-list","",1,"k-upload-files","k-reset",3,"disabled","fileList","fileTemplate","fileInfoTemplate","id"],[3,"disabled","actionsLayout"]]},template:function(t,n){if(t&1){let s=R();Q(0,2),d(1,"div",3)(2,"div",4)(3,"button",5,0),E("click",function(){m(s);let p=Z(7);return g(p.click())})("focus",function(){return m(s),g(n.onFileSelectButtonFocus())}),I(5),_(),T(6,"input",6,1),_(),h(8,Ra,1,1,"kendo-upload-status-total",7),d(9,"div",8),I(10),_()(),h(11,Ia,1,5,"ul",9)(12,Ma,1,2,"kendo-upload-action-buttons",10)}t&2&&(l(),r("restrictions",n.restrictions)("multiple",n.multiple)("disabled",n.disabled),l(2),r("id",n.focusableId),N("aria-label",n.textFor("select"))("tabindex",n.tabindex)("aria-expanded",n.hasFileList)("aria-controls",n.hasFileList?n.fileListId:void 0),l(2),$(" ",n.textFor("select")," "),l(),r("dir",n.direction)("accept",n.accept)("restrictions",n.restrictions)("multiple",n.multiple)("disabled",n.disabled)("required",n.isControlRequired),l(2),r("ngIf",n.showTotalStatus),l(2),V(n.textFor("dropFilesHere")),l(),r("ngIf",n.hasFileList),l(),r("ngIf",n.showActionButtons))},dependencies:[Qi,Xs,ae,Qs,H,Ws,$s,zs],encapsulation:2})}return i})(),Xi=(()=>{class i{dropZoneService;zoneId;fileSelectZoneId;constructor(e){this.dropZoneService=e}onElementDragEnter(){return!1}onElementDragOver(){return!1}onDropListener(e){let t=this.componentInstance;if(Bi(t))return t.forEach(n=>{let s=e.dataTransfer.files;if(s.length>0&&!n.disabled){let a=Pi(s);n instanceof qi?a=Dt(a,!n.batch):a=Dt(a,!0),n.multiple||(a.splice(1,a.length-1),n.clearFiles()),ji(a,n.restrictions),n.addFiles(a)}}),!1}get componentInstance(){let e=this.zoneId||this.fileSelectZoneId;return this.dropZoneService.getComponents(e)}static \u0275fac=function(t){return new(t||i)(u($e))};static \u0275dir=D({type:i,selectors:[["","kendoUploadDropZone",""],["","kendoFileSelectDropZone",""]],hostBindings:function(t,n){t&1&&E("dragenter",function(){return n.onElementDragEnter()})("dragover",function(){return n.onElementDragOver()})("drop",function(a){return n.onDropListener(a)})},inputs:{zoneId:[0,"kendoUploadDropZone","zoneId"],fileSelectZoneId:[0,"kendoFileSelectDropZone","fileSelectZoneId"]},features:[K([$e])]})}return i})(),Js=(()=>{class i extends qs{localization;hostClass=!0;get dirAttribute(){return this.direction}zoneId;icon;iconClass;set svgIcon(e){if(Ee()&&e&&this.icon&&this.iconClass)throw new Error("Setting both icon/svgIcon and iconClass options at the same time is not supported.");this._svgIcon=e}get svgIcon(){return this._svgIcon}direction;localizationChangeSubscription;_svgIcon=fi;constructor(e,t,n){super(e,t,"k-external-dropzone-hover"),this.localization=n,this.localizationChangeSubscription=this.localization.changes.subscribe(({rtl:s})=>{this.direction=s?"rtl":"ltr"})}textFor(e){return this.localization.get(e)}get iconClasses(){if(this.icon)return`${this.icon}`;if(!this.icon&&!this.iconClass)return"upload"}ngOnDestroy(){this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(u(k),u(X),u(M))};static \u0275cmp=L({type:i,selectors:[["kendo-uploaddropzone"]],hostVars:3,hostBindings:function(t,n){t&2&&(N("dir",n.dirAttribute),G("k-external-dropzone",n.hostClass))},inputs:{zoneId:"zoneId",icon:"icon",iconClass:"iconClass",svgIcon:"svgIcon"},exportAs:["kendoUploadDropZone"],features:[K([M,{provide:fe,useValue:"kendo.uploaddropzone"}]),w],ngContentSelectors:Da,decls:7,vars:5,consts:()=>{let e;return e=$localize`:kendo.uploaddropzone.externalDropFilesHere|Sets the external drop-zone hint:Drag and drop files here to upload`,[["kendoUploadDropZoneLocalizedMessages","","externalDropFilesHere",e],[1,"k-dropzone-inner",3,"kendoUploadDropZone"],["size","xxxlarge","innerCssClass","k-dropzone-icon",3,"name","customFontClass","svgIcon"],[1,"k-dropzone-hint"],[1,"k-dropzone-note"]]},template:function(t,n){t&1&&(Rn(),Q(0,0),d(1,"div",1),T(2,"kendo-icon-wrapper",2),d(3,"span",3),I(4),_(),d(5,"span",4),In(6),_()()),t&2&&(l(),r("kendoUploadDropZone",n.zoneId),l(),r("name",n.iconClasses)("customFontClass",n.iconClass)("svgIcon",n.svgIcon),l(2),V(n.textFor("externalDropFilesHere")))},dependencies:[Qi,Xi,de],encapsulation:2})}return i})(),ja={multi:!0,provide:ri,useExisting:z(()=>xt)},$a=0,xt=(()=>{class i extends Bs{uploadService;localization;navigation;dropZoneService;ngZone;renderer;cdr;injector;fileSelectInput;get dir(){return this.direction}set name(e){this.uploadService.async.saveField=e}get name(){return this.uploadService.async.saveField}valueChange=new f;_restrictions={allowedExtensions:[],maxFileSize:0,minFileSize:0};direction;wrapper;fileListId;documentClick;blurSubscription;wrapperFocusSubscription;selectButtonFocusSubscription;localizationChangeSubscription;subs;constructor(e,t,n,s,a,p,A,x,U){super(e,n,A,U,a),this.uploadService=e,this.localization=t,this.navigation=n,this.dropZoneService=s,this.ngZone=a,this.renderer=p,this.cdr=A,this.injector=U,Ce(Vs),this.wrapper=x.nativeElement,this.direction=t.rtl?"rtl":"ltr",this.navigation.computeKeys(),this.localizationChangeSubscription=t.changes.subscribe(({rtl:W})=>{this.direction=W?"rtl":"ltr"}),this.subscribeBlur(),this.subscribeFocus(),this.attachEventHandlers(),this.setDefaultSettings()}ngOnInit(){let{buttonId:e,fileListId:t}=this.getIds();this.focusableId=e,this.fileListId=t,this.zoneId&&this.dropZoneService.addComponent(this,this.zoneId),this.subs.add(this.renderer.listen(this.fileSelectInput.nativeElement,"mouseenter",()=>{this.renderer.addClass(this.fileSelectButton.nativeElement,"k-hover")})),this.subs.add(this.renderer.listen(this.fileSelectInput.nativeElement,"mouseleave",()=>{this.renderer.removeClass(this.fileSelectButton.nativeElement,"k-hover")})),this.ngZone.runOutsideAngular(()=>{this.subs.add(this.renderer.listen(this.wrapper,"keydown",n=>this.handleKeydown(n)))})}textFor(e){return this.localization.get(e)}ngOnDestroy(){this.fileList.clear(),this.blurSubscription&&this.blurSubscription.unsubscribe(),this.wrapperFocusSubscription&&this.wrapperFocusSubscription.unsubscribe(),this.selectButtonFocusSubscription&&this.selectButtonFocusSubscription.unsubscribe(),this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe(),this.subs&&this.subs.unsubscribe()}removeFileByUid(e){this.uploadService.removeFiles(e)}clearFiles(){this.uploadService.clearFiles()}isEmpty(){return!1}addFiles(e){this.uploadService.addFiles(e)}get selectButtonTabIndex(){return this.disabled?void 0:this.tabindex}getIds(){let e=++$a,t=`k-fileselect-button-${e}`,n=`k-fileselect-file-list-${e}`;return{buttonId:t,fileListId:n}}writeValue(e){super.writeValue(e,ba,"addInitialFileSelectFiles")}subscribeBlur(){ge()&&this.ngZone.runOutsideAngular(()=>{this.documentClick=tt(document,"click").pipe(Qt(e=>!(this.wrapper!==e.target&&this.wrapper.contains(e.target)))),this.blurSubscription=Wt(this.documentClick,this.navigation.onTabOut).subscribe(()=>{this.navigation.focused&&this.ngZone.run(()=>{this.navigation.focused=!1,this.onTouchedCallback(),this.onBlur.emit()})})})}subscribeFocus(){this.wrapperFocusSubscription=this.navigation.onWrapperFocus.subscribe(()=>{this.onFocus.emit()}),this.selectButtonFocusSubscription=this.navigation.onSelectButtonFocus.subscribe(()=>{this.fileSelectButton.nativeElement.focus()})}handleKeydown(e){if(!this.disabled){if(e.target===this.fileSelectButton.nativeElement&&(e.code===S.Enter||e.code===S.NumpadEnter||e.code===S.Space)){e.preventDefault(),this.fileSelectInput.nativeElement.click();return}(lt(e.target,Ks)||!Vi(e.target)&&!lt(e.target,Ki))&&this.navigation.process(e,"fileselect")}}attachEventHandlers(){this.subs=this.uploadService.changeEvent.subscribe(e=>{let t=[];e!==null&&e.forEach(n=>{n.state===v.Initial&&t.push(n),n.state===v.Selected&&n.rawFile&&!n.validationErrors&&t.push(n.rawFile)}),t.length===0&&(t=null),this.onChangeCallback(t),this.valueChange.emit(t)}),this.subs.add(this.uploadService.removeEvent.subscribe(e=>{this.remove.emit(e)})),this.subs.add(this.uploadService.selectEvent.subscribe(e=>{this.select.emit(e)}))}setDefaultSettings(){this.uploadService.async.autoUpload=!1,this.uploadService.component="FileSelect"}static \u0275fac=function(t){return new(t||i)(u(le),u(M),u(Re),u($e),u(j),u(X),u(Ne),u(k),u(ft))};static \u0275cmp=L({type:i,selectors:[["kendo-fileselect"]],viewQuery:function(t,n){if(t&1&&P(Us,7),t&2){let s;O(s=C())&&(n.fileSelectInput=s.first)}},hostVars:1,hostBindings:function(t,n){t&2&&N("dir",n.dir)},inputs:{name:"name"},outputs:{valueChange:"valueChange"},exportAs:["kendoFileSelect"],features:[K([M,Re,le,$e,ja,{provide:fe,useValue:"kendo.fileselect"},{provide:Ni,useExisting:z(()=>i)}]),w],decls:11,vars:17,consts:()=>{let e;e=$localize`:kendo.fileselect.dropFilesHere|The drop zone hint:Drop files here to select`;let t;t=$localize`:kendo.fileselect.invalidFileExtension|The text for the invalid allowed extensions restriction message:File type not allowed.`;let n;n=$localize`:kendo.fileselect.invalidMaxFileSize|The text for the invalid max file size restriction message:File size too large.`;let s;s=$localize`:kendo.fileselect.invalidMinFileSize|The text for the invalid min file size restriction message:File size too small.`;let a;a=$localize`:kendo.fileselect.remove|The text for the Remove button:Remove`;let p;return p=$localize`:kendo.fileselect.select|The text for the Select button:Select files...`,[["fileSelectButton",""],["fileSelectInput",""],["kendoFileSelectLocalizedMessages","","dropFilesHere",e,"invalidFileExtension",t,"invalidMaxFileSize",n,"invalidMinFileSize",s,"remove",a,"select",p],["kendoFileSelectInternalDropZone","",3,"restrictions","multiple","disabled"],[1,"k-upload-button-wrap"],["kendoButton","","type","button","role","button",1,"k-upload-button",3,"click","focus","id"],["kendoFileSelect","",3,"dir","accept","restrictions","multiple","disabled","required"],[1,"k-dropzone-hint"],["kendo-upload-file-list","","class","k-upload-files k-reset",3,"disabled","fileList","fileTemplate","fileInfoTemplate","id",4,"ngIf"],["kendo-upload-file-list","",1,"k-upload-files","k-reset",3,"disabled","fileList","fileTemplate","fileInfoTemplate","id"]]},template:function(t,n){if(t&1){let s=R();Q(0,2),d(1,"div",3)(2,"div",4)(3,"button",5,0),E("click",function(){m(s);let p=Z(7);return g(p.click())})("focus",function(){return m(s),g(n.onFileSelectButtonFocus())}),I(5),_(),T(6,"input",6,1),_(),d(8,"div",7),I(9),_()(),h(10,Ta,1,5,"ul",8)}t&2&&(l(),r("restrictions",n.restrictions)("multiple",n.multiple)("disabled",n.disabled),l(2),r("id",n.focusableId),N("aria-label",n.textFor("select"))("tabindex",n.tabindex)("aria-expanded",n.hasFileList)("aria-controls",n.hasFileList?n.fileListId:void 0),l(2),$(" ",n.textFor("select")," "),l(),r("dir",n.direction)("accept",n.accept)("restrictions",n.restrictions)("multiple",n.multiple)("disabled",n.disabled)("required",n.isControlRequired),l(3),V(n.textFor("dropFilesHere")),l(),r("ngIf",n.hasFileList))},dependencies:[Qi,Xs,ae,Qs,H,$s],encapsulation:2})}return i})(),Zs=(()=>{class i extends Tt{service;get override(){return!0}constructor(e){super(),this.service=e}static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275cmp=L({type:i,selectors:[["kendo-upload-messages"],["kendo-fileselect-messages"],["kendo-uploaddropzone-messages"]],features:[K([{provide:Tt,useExisting:z(()=>i)}]),w],decls:0,vars:0,template:function(t,n){},encapsulation:2})}return i})(),Wa=[xt,$i,Wi,Zs,Xi,Js],Qa=[qi,zs,Ws,$i,Wi,Zs,Xi,Js],Xp=[...Wa,...Qa];var Xa=["kendoMenuList",""];function Ja(i,o){if(i&1&&T(0,"li",3),i&2){let e=c(),t=e.$implicit,n=e.index,s=c();G("k-first",n===0)("k-last",n===s.items.length-1)("k-disabled",t.disabled),r("appendTo",s.appendTo)("item",t)("level",s.level)("size",s.size)("vertical",s.vertical)("animate",s.animate)("rtl",s.rtl)("itemTemplate",s.itemTemplate)("itemLinkTemplate",s.itemLinkTemplate)("openOnClick",s.openOnClick)("index",s.hierarchyIndex(n))("siblingIndex",n)("ngClass",t.cssClass)("ngStyle",t.cssStyle),N("data-kendo-menu-index",s.hierarchyIndex(n))}}function Za(i,o){if(i&1&&(d(0,"li",4),I(1," \xA0 "),_()),i&2){let e=c().$implicit;r("ngClass",e.cssClass)("ngStyle",e.cssStyle)}}function Ya(i,o){if(i&1&&(b(0),h(1,Ja,1,21,"li",1)(2,Za,2,2,"li",2),y()),i&2){let e=o.$implicit;l(),r("ngIf",!e.separator),l(),r("ngIf",e.separator)}}var er=["link"],tr=["popupTemplate"],ir=["kendoMenuItem",""],an=(i,o)=>({item:i,index:o});function nr(i,o){}function sr(i,o){if(i&1&&(d(0,"span",7,2),h(2,nr,0,0,"ng-template",8),_()),i&2){let e=c(),t=Z(7);G("k-active",e.opened),l(2),r("ngTemplateOutlet",t)}}function or(i,o){}function ar(i,o){if(i&1&&(d(0,"a",9,2),h(2,or,0,0,"ng-template",8),_()),i&2){let e=c(),t=Z(7);G("k-active",e.opened),N("href",e.item.url,xe),l(2),r("ngTemplateOutlet",t)}}function rr(i,o){}function lr(i,o){if(i&1&&h(0,rr,0,0,"ng-template",10),i&2){let e=c();r("ngTemplateOutlet",e.linkTemplate)("ngTemplateOutletContext",Se(2,an,e.item,e.index))}}function cr(i,o){}function ur(i,o){if(i&1&&(d(0,"div",11),h(1,cr,0,0,"ng-template",10),_()),i&2){let e=c();l(),r("ngTemplateOutlet",e.item.content)("ngTemplateOutletContext",Se(2,an,e.item.owner,e.item.ownerIndex))}}function pr(i,o){if(i&1&&T(0,"ul",12),i&2){let e=c();r("appendTo",e.appendTo)("animate",e.animate)("rtl",e.rtl)("vertical",e.vertical)("size",e.size)("openOnClick",e.openOnClick)("items",e.children)("level",e.level+1)("index",e.index)("itemTemplate",e.itemTemplate)("itemLinkTemplate",e.itemLinkTemplate)("ngClass",e.menuListClasses),N("id",e.childId)}}function dr(i,o){if(i&1&&T(0,"kendo-icon-wrapper",15),i&2){let e=c(2);r("name",e.item.icon)("svgIcon",e.item.svgIcon)}}function _r(i,o){if(i&1&&(b(0),d(1,"span",16),I(2),_(),y()),i&2){let e=c(2);l(2),V(e.item.text)}}function mr(i,o){}function gr(i,o){if(i&1&&h(0,mr,0,0,"ng-template",10),i&2){let e=c(2);r("ngTemplateOutlet",e.template)("ngTemplateOutletContext",Se(2,an,e.item,e.index))}}function hr(i,o){if(i&1&&T(0,"kendo-icon-wrapper",17),i&2){let e=c(2);r("name",e.fontIcon(e.horizontal,e.rtl))("svgIcon",e.SVGIcon(e.horizontal,e.rtl))}}function fr(i,o){if(i&1&&h(0,dr,1,2,"kendo-icon-wrapper",13)(1,_r,3,1,"ng-container",5)(2,gr,1,5,null,5)(3,hr,1,2,"kendo-icon-wrapper",14),i&2){let e=c();r("ngIf",e.item.icon||e.item.svgIcon),l(),r("ngIf",!e.template),l(),r("ngIf",e.template),l(),r("ngIf",e.hasContent)}}var Ar=["kendoMenuExpandArrow",""],vr=["default"];function Sr(i,o){if(i&1&&T(0,"kendo-menu",1),i&2){let e=c();r("items",e.rootItems)("appendTo",e.appendTo)("size",e.size)("vertical",e.vertical)("openOnClick",e.openOnClick)("hoverDelay",e.hoverDelay)("animate",e.animate)("menuItemTemplate",e.itemTemplate.first==null?null:e.itemTemplate.first.templateRef)("menuItemLinkTemplate",e.itemLinkTemplate.first==null?null:e.itemLinkTemplate.first.templateRef)}}var Er={name:"@progress/kendo-angular-menu",productName:"Kendo UI for Angular",productCode:"KENDOUIANGULAR",productCodes:["KENDOUIANGULAR"],publishDate:1763638904,version:"21.1.0",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/"},Nr=/_?\d+$/,Ys="_",Or=0,Cr=(i,o)=>i.siblingIndex-o.siblingIndex,eo=(i,o,e)=>{let t=o[i+e];for(;!t;)i<0?i=o.length-1:i>=o.length?i=0:i+=e,t=o[i];return t},Ie=(()=>{class i{items={};lists=[];idPrefix=`k-menu${Or++}`;get hasItems(){return Object.keys(this.items).length>0}childId(e){return`${this.idPrefix}-child${e}`}itemIndex(e,t){return(e?e+Ys:"")+t}get(e){return this.items[e]}add(e){this.items[e.index]=e}remove(e){this.items[e.index]===e&&delete this.items[e.index]}addList(e){this.lists.push(e)}removeList(e){let t=this.lists.indexOf(e);t>=0&&this.lists.splice(t,1)}containsList(e){return!!this.lists.find(t=>t.element.nativeElement===e)}siblings(e){let t=this.parentIndex(e.index);return this.filter(n=>this.parentIndex(n)===t)}otherSiblings(e){let t=this.parentIndex(e.index);return this.filter(n=>this.parentIndex(n)===t&&n!==e.index)}children(e){return this.filter(t=>this.parentIndex(t)===e.index)}parent(e){return this.items[this.parentIndex(e.index)]}root(e){return this.items[this.indices(e.index)[0]]}indices(e){return e.split(Ys)}filter(e){let t=[],n=this.items;for(let s in n)e(s,n[s])&&t.push(n[s]);return t.sort(Cr)}previous(e){let t=this.siblings(e),n=t.indexOf(e);return eo(n,t,-1)}next(e){let t=this.siblings(e),n=t.indexOf(e);return eo(n,t,1)}hasParent(e,t){return e.index.startsWith(t.index)}areSiblings(e,t){return e!==t&&this.parent(e)===this.parent(t)}forEach(e){let t=this.items;for(let n in t)t.hasOwnProperty(n)&&e(t[n])}parentIndex(e){return e.replace(Nr,"")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),Rr=(i,o)=>!(o==="open"&&i.opened||o==="close"&&!i.opened),Yi=class extends ps{sender;item;index;constructor(o){super(),Object.assign(this,o)}},pt=(()=>{class i{ngZone;items;owner;actions=[];constructor(e,t){this.ngZone=e,this.items=t}open(e,t){e.disabled||(e.hasContent&&!e.opened?this.actions.push({name:"open",requiresZone:e.hasContentTemplates(),item:e,finished:t}):t&&t())}close(e){this.closeChildren(e),this.closeItem(e)}closeItem(e){e.opened&&this.actions.push({name:"close",item:e})}closeToRoot(e){this.closeChildren(e);let t=e;do this.closeItem(t),t=this.items.parent(t);while(t)}closeOthers(e){this.closeChildren(e);let t=e;for(;t;){let n=this.items.otherSiblings(t);this.closeItems(n),t=this.items.parent(t)}}closeAll(){this.items.forEach(e=>{e.opened&&e.level===0&&this.close(e)})}select(e,t,n,s){this.actions.push({name:"select",item:e,prevented:n,finished:s,domEvent:t})}emit(e,t,n){let s=this.owner,a=new Yi({sender:s,item:t.item,index:t.index,originalEvent:n,hasContent:t.hasContent});return s[e].emit(a),s.contextService&&s.contextService.emit(e,a),a.isDefaultPrevented()}get hasPending(){return this.actions.length>0}execute(e){if(!this.hasPending&&!e)return;let t=e||this.clear();!j.isInAngularZone()&&this.requiresZone(t)?this.ngZone.run(()=>{this.executeActions(t)}):this.executeActions(t)}clear(){let e=this.actions;return this.actions=[],e}executeActions(e){for(let t=0;t<e.length;t++){let{item:n,name:s,prevented:a,finished:p,domEvent:A}=e[t];Rr(n,s)&&(this.emit(s,n,A)?a&&a():(n[s]&&n[s](),p&&p()))}}requiresZone(e){let t=e||this.actions,n=this.owner,s=n.contextService;for(let a=0;a<t.length;a++){let p=t[a],A=p.name;if(p.requiresZone||A&&(Ct(n[A])||s&&s.hasObservers(A)))return!0}return!1}closeChildren(e){if(!e.opened)return;let t=this.items.children(e);this.closeItems(t)}closeItems(e){for(let t=0;t<e.length;t++)this.close(e[t])}static \u0275fac=function(t){return new(t||i)(te(j),te(Ie))};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),Ji="0",Ir=/\S/,ue={};ue[S.ArrowLeft]="left";ue[S.ArrowRight]="right";ue[S.ArrowUp]="up";ue[S.ArrowDown]="down";ue[S.Home]="home";ue[S.End]="end";ue[S.Space]="enter";ue[S.Enter]="enter";ue[S.NumpadEnter]="enter";ue[S.KeyN]="enter";ue[S.Escape]="esc";ue[S.Tab]="tab";var Mr=Object.assign({},ue,{ArrowLeft:"right",ArrowRight:"left"});function Dr(i){return i.length===1&&Ir.test(i)}var Tr=Promise.resolve(null),yt=(()=>{class i{items;actions;localization;ngZone;vertical=!1;activeIndex=Ji;focusedIdx;get focusedItem(){return this.items.get(this.focusedIdx)}get activeItem(){return this.items.get(this.activeIndex)}get handlers(){return this.localization.rtl?Mr:ue}constructor(e,t,n,s){this.items=e,this.actions=t,this.localization=n,this.ngZone=s}focus(e){e.index!==this.focusedIdx&&((!this.activeItem||!this.items.hasParent(e,this.activeItem))&&this.setActive(e),this.setFocus(e))}setFocus(e){this.focusedIdx=e.index,e.focus()}focusLeave(){let e=this.focusedItem;e&&(this.actions.closeToRoot(e),this.actions.execute()),this.focusedIdx=null}updateActive(){!this.activeItem&&this.items.hasItems&&(this.items.get(Ji).toggleActive(!0),this.ngZone.runOutsideAngular(()=>{Tr.then(()=>{this.activeIndex=Ji})}))}keydown(e){let t=this.focusedItem||this.activeItem;if(!t)return;let n=he(e),s=this.handlers[n];s?(s!=="tab"&&e.preventDefault(),this[s](t,e)):Dr(e.key)&&this.search(t,e.key),this.actions.execute()}focusIndex(e){if(!e&&this.activeItem)this.setFocus(this.activeItem);else if(e==="first")this.focusFirst();else if(e==="last")this.focusLast();else{let t=this.items.get(e);t&&this.focus(t)}}focusFirst(){let e=this.items.siblings(this.items.get("0"));this.focus(e[0])}focusLast(){let e=this.items.siblings(this.items.get("0"));this.focus(e[e.length-1])}search(e,t){let n=this.items.siblings(e),s=n.indexOf(e),a=n.slice(s+1).concat(n.slice(0,s));for(let p=0;p<a.length;p++){let A=a[p];if((A.item.text||"").toLowerCase().startsWith(t.toLowerCase())){this.focus(A);break}}}down(e){e.level===0&&!this.vertical?e.hasContent&&this.actions.open(e,this.focusChild(e,0)):this.focus(this.items.next(e))}up(e){e.level===0&&!this.vertical?e.hasContent&&this.actions.open(e,this.focusChild(e,e.children.length-1)):this.focus(this.items.previous(e))}left(e){if(!(this.vertical&&e.level===0&&e.disabled))if(e.level>1||this.vertical&&e.level>0){let t=this.items.parent(e);this.focus(t),this.actions.close(t)}else this.vertical&&e.level===0&&!e.disabled?e.hasContent&&this.actions.open(e,this.focusChild(e,e.children.length-1)):this.focus(this.items.previous(this.activeItem))}right(e){this.vertical&&e.level===0&&e.disabled||(e.horizontal&&!e.disabled?e.hasContent?this.actions.open(e,this.focusChild(e,0)):(!this.vertical||e.level>0)&&this.focus(this.items.next(this.activeItem)):this.focus(this.items.next(this.activeItem)))}home(e){let t=this.items.siblings(e);this.focus(t[0])}end(e){let t=this.items.siblings(e);this.focus(t[t.length-1])}enter(e,t){let n=this.actions;e.disabled||(e.hasContent?(n.select(e,t),n.open(e,this.focusChild(e,0))):(n.select(e,t,null,()=>{e.navigate()}),this.focus(this.items.root(e)),n.closeToRoot(e)))}esc(e){if(e.level>0){let t=this.items.parent(e);this.actions.close(t),this.focus(t)}}tab(e){e.level>0&&this.activeItem.focus()}focusChild(e,t){return()=>{let n=this.items.children(e)[t];this.setFocus(n)}}setActive(e){let t=this.focusedItem,n=this.items.root(e);this.activeItem&&this.activeItem.toggleActive(!1),this.activeIndex=n.index,n.toggleActive(!0),t&&(this.actions.closeToRoot(t),t.level>0&&this.actions.open(n))}static \u0275fac=function(t){return new(t||i)(te(Ie),te(pt),te(M),te(j))};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),xr=500,en=(()=>{class i{actions;items;delay=100;get openOnOver(){return this._openOnOver}set openOnOver(e){this.cancelActions(),this._openOnOver=e}_openOnOver=!0;hoveredIdx;get hovered(){return this.items.get(this.hoveredIdx)}set hovered(e){this.hoveredIdx=e?e.index:null}scheduled=[];constructor(e,t){this.actions=e,this.items=t}ngOnDestroy(){this.cancelActions()}over(e){this.cancelActions(t=>t.name==="openOnOver"),(!this.hovered||this.hovered!==e)&&(this.actions.closeOthers(e),this.hovered=e,(e.level>0||this.openOnOver)&&!e.disabled&&(this.actions.open(e),this.cancelActions(t=>t.name==="close"&&(e===t.item||this.items.hasParent(e,t.item))||t.name==="open"&&!this.items.hasParent(e,t.item))),this.scheduleActions())}leave(e){let t=this.hovered;t&&(this.actions.closeToRoot(t),this.cancelActions(n=>n.name==="open"),this.scheduleActions()),e&&this._openOnOver&&this.scheduleDisableOpenOnOver(),this.hovered=null}closeCurrent(){let e=this.hovered;e&&(this.actions.closeToRoot(e),this.hovered=null)}scheduleActions(){if(this.actions.hasPending){let e={};e.actions=this.actions.clear(),e.id=setTimeout(()=>{this.actions.execute(e.actions),this.removeScheduled(e)},this.delay),this.scheduled.push(e)}}scheduleDisableOpenOnOver(){let e={actions:[{name:"openOnOver"}]};e.id=setTimeout(()=>{this._openOnOver=!1,this.removeScheduled(e)},Math.max(this.delay,xr)),this.scheduled.push(e)}removeScheduled(e){let t=this.scheduled;for(let n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);return}}cancelActions(e){let t=this.scheduled;for(let n=t.length-1;n>=0;n--){let s=t[n],a=s.actions;if(e)for(let p=a.length-1;p>=0;p--)e(a[p])&&a.splice(p,1);(!e||a.length===0)&&(clearTimeout(s.id),t.splice(n,1))}}static \u0275fac=function(t){return new(t||i)(te(pt),te(Ie))};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),Lr=i=>i&&Object.assign({toggle:"select"},i),br="data-kendo-menu-index",to="kendo-matches-container",yr=/^(?:a|input|select|option|textarea|button|object)$/i,kr=(i,o)=>(i.matches||i.msMatchesSelector).call(i,o),rn=(i,o)=>{for(;i&&!o(i);)i=i.parentNode;return i},ao=(i,o,e)=>{for(;i&&i!==e&&!o(i);)i=i.parentNode;if(i!==e)return i},ro=i=>{if(i.tagName){let o=i.tagName.toLowerCase(),e=i.getAttribute("tabIndex"),t=e==="-1",n=e!==null&&!t;return yr.test(o)&&(n=!i.disabled&&!t),n}return!1},tn=i=>String(i).trim().split(" "),ut=(i,o)=>tn(i.className).indexOf(o)>=0,Ur=i=>{let o=tn(i);return e=>{let t=tn(e.className);return!!o.find(n=>t.indexOf(n)>=0)}},lo=i=>i.getAttribute(br),wr=(i,o)=>ao(i,lo,o),Gr=i=>{let o=rn(i,Ur("k-menu-popup k-menu k-menu-group"));return o&&ut(o,"k-menu-popup")&&(o=o.querySelector(".k-menu-group")),o},kt=(i,o)=>{if(i===o.lists[0].element.nativeElement)return!1;let e=Gr(i);return e&&o.containsList(e)},Fr=(i,o,e)=>{let t=e.getAttribute("id");t||e.setAttribute("id",to);let n=`#${t||to} ${o}`,s=ao(i,a=>kr(a,n),e);return t||e.removeAttribute("id"),s},dt=(()=>{class i{keydown=new f;owner;items;emit(e,t){this.owner.emitMenuEvent(e,t)}hasObservers(e){return this.owner&&Ct(this.owner[e])}leaveMenu(e){return this.items?!kt(e.target,this.items):!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),ln=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoMenuItemTemplate",""]]})}return i})(),cn=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoMenuItemLinkTemplate",""]]})}return i})(),co=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoMenuItemContentTemplate",""]]})}return i})(),uo=(()=>{class i{text;url;disabled;cssClass;cssStyle;icon;svgIcon;data;separator;itemTemplate;itemLinkTemplate;itemContentTemplate;children;get template(){if(this.itemTemplate&&this.itemTemplate.length)return this.itemTemplate.first.templateRef}get linkTemplate(){if(this.itemLinkTemplate&&this.itemLinkTemplate.length)return this.itemLinkTemplate.first.templateRef}get contentTemplate(){if(this.itemContentTemplate&&this.itemContentTemplate.length)return this.itemContentTemplate.first.templateRef}get items(){if(this.children.length)return this.children.toArray().filter(e=>e!==this)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=L({type:i,selectors:[["kendo-menu-item"]],contentQueries:function(t,n,s){if(t&1&&(F(s,ln,4),F(s,cn,4),F(s,co,4),F(s,i,4)),t&2){let a;O(a=C())&&(n.itemTemplate=a),O(a=C())&&(n.itemLinkTemplate=a),O(a=C())&&(n.itemContentTemplate=a),O(a=C())&&(n.children=a)}},inputs:{text:"text",url:"url",disabled:"disabled",cssClass:"cssClass",cssStyle:"cssStyle",icon:"icon",svgIcon:"svgIcon",data:"data",separator:"separator"},decls:0,vars:0,template:function(t,n){},encapsulation:2})}return i})(),we=(()=>{class i{items;vertical=!1;openOnClick=!1;hoverDelay=100;animate=!0;size="medium";itemTemplate;itemLinkTemplate;children;get rootItems(){return this.items||(this.children?this.children.toArray():[])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=L({type:i,selectors:[["kendo-menu-base"]],contentQueries:function(t,n,s){if(t&1&&(F(s,ln,4),F(s,cn,4),F(s,uo,4)),t&2){let a;O(a=C())&&(n.itemTemplate=a),O(a=C())&&(n.itemLinkTemplate=a),O(a=C())&&(n.children=a)}},inputs:{items:"items",vertical:"vertical",openOnClick:"openOnClick",hoverDelay:"hoverDelay",animate:"animate",size:"size"},standalone:!1,decls:0,vars:0,template:function(t,n){},encapsulation:2})}return i})(),Zi=i=>typeof i<"u",po=()=>{if(ge())return new k(document.body)},_o=i=>({small:"k-menu-group-sm",medium:"k-menu-group-md",large:"k-menu-group-lg"})[i],mo=(i,o)=>i?o?"caret-alt-left":"caret-alt-right":"caret-alt-down",go=(i,o)=>i?o?Gn:Un:wn,io={vertical:"top",horizontal:"left"},no={vertical:"top",horizontal:"right"},ho={vertical:"flip",horizontal:"fit"},fo={vertical:"fit",horizontal:"flip"},Pr={vertical:{anchor:{vertical:"bottom",horizontal:"right"},popup:no,collision:ho,animate:"down"},horizontal:{anchor:{vertical:"top",horizontal:"left"},popup:no,collision:fo,animate:"left"}},Kr={vertical:{anchor:{vertical:"bottom",horizontal:"left"},popup:io,collision:ho,animate:"down"},horizontal:{anchor:{vertical:"top",horizontal:"right"},popup:io,collision:fo,animate:"right"}},Ao=(()=>{class i{itemsService;hover;actions;navigation;renderer;ngZone;element;appendTo;items;level;index;animate=!0;size="medium";vertical;rtl;openOnClick;itemTemplate;itemLinkTemplate;domSubscriptions;constructor(e,t,n,s,a,p,A){this.itemsService=e,this.hover=t,this.actions=n,this.navigation=s,this.renderer=a,this.ngZone=p,this.element=A}hierarchyIndex(e){return this.itemsService.itemIndex(this.index,e)}ngOnInit(){this.itemsService.addList(this),this.initDomEvents()}ngOnDestroy(){this.itemsService.removeList(this),this.domSubscriptions&&this.domSubscriptions()}initDomEvents(){!ge()||!this.element||this.ngZone.runOutsideAngular(()=>{let e=this.element.nativeElement,t=this.level>0?rn(e,U=>ut(U,"k-popup")):e,n=this.renderer.listen(e,"mouseover",U=>{if(U.target===e&&this.level===0)this.onLeave();else{let W=this.nodeItem(U.target)||this.itemsService.get(this.index);W&&!(this.openOnClick&&this.openOnClick.toggle==="click"&&W.level===0&&!W.hasContent)&&this.hover.over(W)}}),s=this.renderer.listen(t,"mouseleave",U=>{this.leavesMenu(U)&&this.onLeave()}),a=this.renderer.listen(e,"keydown",U=>{ut(U.target,"k-menu-item")&&this.navigation.keydown(U)}),p=this.renderer.listen(e,"focusout",U=>{this.leavesMenu(U)&&this.navigation.focusLeave()}),A=this.renderer.listen(document,"touchstart",U=>{if(kt(U.target,this.itemsService)){let W=this.nodeItem(U.target);this.navigation.focus(W),W.opened||this.hover.over(W)}else if(this.navigation.focusedIdx){let W=this.itemsService.get(this.navigation.activeIndex);this.onLeave(),W.blur()}}),x=this.renderer.listen(e,"click",this.clickHandler.bind(this));this.domSubscriptions=()=>{n(),s(),a(),p(),x(),A()}})}leavesMenu(e){return e.relatedTarget?!kt(e.relatedTarget,this.itemsService):!0}onLeave(){let e=this.openOnClick;(!e||e.toggle!=="click")&&this.hover.leave(e&&e.toggle==="leave")}nodeItem(e){let t=wr(e,this.element.nativeElement);if(t){let n=lo(t);return this.itemsService.get(n)}}clickHandler(e){if(ro(e.target)&&!ut(e.target,"k-menu-item"))return;let t=this.nodeItem(e.target);if(!(!t||t.isContent||t.navigating)){if(t.disabled){e.preventDefault();return}if(this.actions.select(t,e,()=>{e.preventDefault()}),this.navigation.focus(t),t.level>0&&!t.hasContent&&this.actions.closeToRoot(t),this.openOnClick){let n=this.hover;t.opened?t.level===0&&(n.openOnOver=!1,this.actions.close(t)):t.hasContent?(n.openOnOver=!0,this.actions.closeOthers(t),this.actions.open(t)):(n.openOnOver=!1,t.level===0&&this.openOnClick.toggle==="click"&&this.hover.closeCurrent())}this.actions.execute()}}static \u0275fac=function(t){return new(t||i)(u(Ie),u(en),u(pt),u(yt),u(X),u(j),u(k))};static \u0275cmp=L({type:i,selectors:[["","kendoMenuList",""]],inputs:{appendTo:"appendTo",items:"items",level:"level",index:"index",animate:"animate",size:"size",vertical:"vertical",rtl:"rtl",openOnClick:"openOnClick",itemTemplate:"itemTemplate",itemLinkTemplate:"itemLinkTemplate"},attrs:Xa,decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["kendoMenuItem","","role","menuitem","class","k-item k-menu-item",3,"appendTo","item","level","size","vertical","animate","rtl","itemTemplate","itemLinkTemplate","openOnClick","index","siblingIndex","ngClass","ngStyle","k-first","k-last","k-disabled",4,"ngIf"],["class","k-separator k-item","aria-hidden","true",3,"ngClass","ngStyle",4,"ngIf"],["kendoMenuItem","","role","menuitem",1,"k-item","k-menu-item",3,"appendTo","item","level","size","vertical","animate","rtl","itemTemplate","itemLinkTemplate","openOnClick","index","siblingIndex","ngClass","ngStyle"],["aria-hidden","true",1,"k-separator","k-item",3,"ngClass","ngStyle"]],template:function(t,n){t&1&&h(0,Ya,3,2,"ng-container",0),t&2&&r("ngForOf",n.items)},dependencies:()=>[oe,H,Vr,Oe,Tn],encapsulation:2})}return i})(),Vr=(()=>{class i{itemsService;navigation;changeDetector;renderer;popupService;element;contextService;appendTo;item;level;set index(e){this._index&&this._index!==e?(this.itemsService.remove(this),this._index=e,this.itemsService.add(this)):this._index=e,this.childId=this.itemsService.childId(e)}get index(){return this._index}siblingIndex;animate=!0;size="medium";vertical;rtl;openOnClick=!1;itemTemplate;itemLinkTemplate;link;popupTemplate;get disabled(){return this.item.disabled}get hasPopup(){return this.hasContent?!0:null}get label(){return this.item.text?this.item.text:null}get popupSettings(){let e=this.rtl?Pr:Kr;return this.horizontal?e.horizontal:e.vertical}get horizontal(){return this.vertical||this.level>0}get hasLink(){return!!this.item.url}get linkTemplate(){return this.item.linkTemplate||this.itemLinkTemplate}get hasContent(){let e=this.item.items;return e&&e.length||this.item.contentTemplate}get isContent(){return!!this.item.content}get iconClass(){return`k-i-${this.item.icon}`}get isContextMenu(){return!!this.contextService}get menuListClasses(){let e=_o(this.size);return this.isContextMenu?`k-context-menu k-menu-group ${e}`:`k-menu-group ${e}`}get children(){let e=this.item;return e.contentTemplate?(this.contentItems||(this.contentItems=[{content:e.contentTemplate,owner:e,ownerIndex:this.index}]),this.contentItems):e.items}get template(){return this.item.template||this.itemTemplate}fontIcon=mo;SVGIcon=go;opened=!1;navigating=!1;childId;contentItems;popupRef;_index;destroyed=!1;constructor(e,t,n,s,a,p,A){this.itemsService=e,this.navigation=t,this.changeDetector=n,this.renderer=s,this.popupService=a,this.element=p,this.contextService=A}hasContentTemplates(){let e=this.item;return this.itemTemplate||e.contentTemplate||this.itemLinkTemplate||e.items&&e.items.find(t=>t.template||t.linkTemplate)}ngOnInit(){this.itemsService.add(this)}ngAfterViewInit(){this.hasContent&&this.setAttribute("aria-expanded",this.opened.toString()),this.index===this.navigation.activeIndex?this.setAttribute("tabindex","0"):this.setAttribute("tabindex","-1")}ngOnDestroy(){this.itemsService.remove(this),this.destroyed=!0,this.popupRef&&(this.popupRef.close(),this.popupRef=null)}focus(){this.element.nativeElement.focus()}blur(){this.element.nativeElement.blur()}toggleActive(e){e?this.setAttribute("tabindex","0"):this.setAttribute("tabindex","-1")}open(){if(!this.destroyed&&this.hasContent&&!this.opened){let e=this.popupSettings,t=this.animate?Object.assign({},this.animate,{direction:e.animate}):!1;this.opened=!0,this.popupRef=this.popupService.open({appendTo:this.appendTo,popupAlign:e.popup,anchorAlign:e.anchor,collision:e.collision,anchor:this.element,positionMode:"absolute",content:this.popupTemplate,popupClass:{"k-rtl":this.rtl,"k-menu-popup":!0},animate:t}),this.setAttribute("aria-expanded","true"),this.setAttribute("aria-controls",this.childId),this.changeDetector.detectChanges()}}close(){!this.destroyed&&this.opened&&(this.opened=!1,this.popupRef&&(this.popupRef.close(),this.popupRef=null),this.changeDetector.detectChanges(),this.setAttribute("aria-expanded","false"),this.renderer.removeAttribute(this.element.nativeElement,"aria-controls"))}navigate(){let e;this.linkTemplate?e=this.element.nativeElement.querySelector("a.k-menu-link"):this.hasLink&&(e=this.link.nativeElement),e&&(this.navigating=!0,e.click(),this.navigating=!1)}setAttribute(e,t){this.renderer.setAttribute(this.element.nativeElement,e,t)}static \u0275fac=function(t){return new(t||i)(u(Ie),u(yt),u(Ne),u(X),u(Le),u(k),u(dt,8))};static \u0275cmp=L({type:i,selectors:[["","kendoMenuItem",""]],viewQuery:function(t,n){if(t&1&&(P(er,5),P(tr,7)),t&2){let s;O(s=C())&&(n.link=s.first),O(s=C())&&(n.popupTemplate=s.first)}},hostVars:3,hostBindings:function(t,n){t&2&&N("aria-disabled",n.disabled)("aria-haspopup",n.hasPopup)("aria-label",n.label)},inputs:{appendTo:"appendTo",item:"item",level:"level",index:"index",siblingIndex:"siblingIndex",animate:"animate",size:"size",vertical:"vertical",rtl:"rtl",openOnClick:"openOnClick",itemTemplate:"itemTemplate",itemLinkTemplate:"itemLinkTemplate"},features:[K([Le,{provide:Oi,useFactory:po}])],attrs:ir,decls:8,vars:4,consts:[["popupTemplate",""],["itemcontent",""],["link",""],["class","k-link k-menu-link","role","presentation",3,"k-active",4,"ngIf"],["class","k-link k-menu-link","tabindex","-1","role","presentation",3,"k-active",4,"ngIf"],[4,"ngIf"],["class","k-content","role","presentation",4,"ngIf"],["role","presentation",1,"k-link","k-menu-link"],[3,"ngTemplateOutlet"],["tabindex","-1","role","presentation",1,"k-link","k-menu-link"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","presentation",1,"k-content"],["kendoMenuList","","role","menu",3,"appendTo","animate","rtl","vertical","size","openOnClick","items","level","index","itemTemplate","itemLinkTemplate","ngClass"],["role","presentation",3,"name","svgIcon",4,"ngIf"],["class","k-menu-expand-arrow","aria-hidden","true",3,"name","svgIcon",4,"ngIf"],["role","presentation",3,"name","svgIcon"],[1,"k-menu-link-text"],["aria-hidden","true",1,"k-menu-expand-arrow",3,"name","svgIcon"]],template:function(t,n){t&1&&h(0,sr,3,3,"span",3)(1,ar,3,4,"a",4)(2,lr,1,5,null,5)(3,ur,2,5,"div",6)(4,pr,1,13,"ng-template",null,0,pe)(6,fr,4,4,"ng-template",null,1,pe),t&2&&(r("ngIf",!n.hasLink&&!n.item.content&&!n.linkTemplate),l(),r("ngIf",n.item.url&&!n.linkTemplate),l(),r("ngIf",n.linkTemplate&&!n.item.content),l(),r("ngIf",n.item.content))},dependencies:[H,ne,Ao,Oe,de],encapsulation:2})}return i})(),vo=(()=>{class i extends we{itemsService;hover;actions;navigation;localization;ngZone;renderer;contextService;appendTo;menuItemTemplate;ariaRole="menubar";menuItemLinkTemplate;select=new f;open=new f;close=new f;get ariaOrientation(){if(this.vertical)return"vertical"}get isContextMenu(){return!!this.contextService}get direction(){return this.rtl}get rtl(){return this.localization.rtl}get menuClasses(){let e=_o(this.size),t="k-reset k-header k-menu";return this.isContextMenu?`k-context-menu k-menu-group ${e}`:`${t} k-menu-${this.vertical?"vertical":"horizontal"}`}closeClickSubscription;contextKeyDownSubscription;constructor(e,t,n,s,a,p,A,x){super(),this.itemsService=e,this.hover=t,this.actions=n,this.navigation=s,this.localization=a,this.ngZone=p,this.renderer=A,this.contextService=x,Ce(Er),this.actions.owner=this,x&&(x.items=this.itemsService,this.contextKeyDownSubscription=x.keydown.subscribe(this.contextKeyDown.bind(this)))}toggle(e,...t){for(let n=0;n<t.length;n++){let s=this.itemsService.get(t[n]);s&&!s.disabled&&(e?s.open():s.close())}}focus(e){this.navigation.focusIndex(e)}ngOnChanges(e){if(this.navigation.vertical=this.vertical,this.hover.delay=this.hoverDelay,e.openOnClick){let t=this.openOnClick=Lr(this.openOnClick);this.hover.openOnOver=!t,t&&t.toggle==="click"?this.attachCloseClick():this.unsubscribeClick()}}ngAfterViewChecked(){this.navigation.updateActive()}ngOnDestroy(){this.unsubscribeClick(),this.contextService&&(this.contextService.items=null,this.contextKeyDownSubscription.unsubscribe())}attachCloseClick(){!this.closeClickSubscription&&ge()&&this.ngZone.runOutsideAngular(()=>{this.closeClickSubscription=this.renderer.listen("document","click",e=>{kt(e.target,this.itemsService)||(this.hover.openOnOver=!1,this.actions.closeAll(),this.actions.execute())})})}unsubscribeClick(){this.closeClickSubscription&&this.closeClickSubscription()}contextKeyDown(e){if(!this.itemsService.hasItems)return;let t=he(e),n=this.localization.rtl,s=t===S.ArrowDown||t===S.ArrowRight,a=t===S.ArrowUp||t===S.ArrowLeft,p;s&&!n||a&&n?p="first":(s&&n||a&&!n)&&(p="last"),p&&(e.preventDefault(),this.focus(p))}static \u0275fac=function(t){return new(t||i)(u(Ie),u(en),u(pt),u(yt),u(M),u(j),u(X),u(dt,8))};static \u0275cmp=L({type:i,selectors:[["kendo-menu"]],hostVars:2,hostBindings:function(t,n){t&2&&G("k-rtl",n.direction)},inputs:{appendTo:"appendTo",menuItemTemplate:"menuItemTemplate",ariaRole:"ariaRole",menuItemLinkTemplate:"menuItemLinkTemplate"},outputs:{select:"select",open:"open",close:"close"},exportAs:["kendoMenu"],features:[K([Ie,pt,yt,en,M,{provide:fe,useValue:"kendo.menu"},{provide:we,useExisting:z(()=>i)}]),w,Me],decls:1,vars:13,consts:[["kendoMenuList","",3,"items","level","appendTo","size","vertical","rtl","animate","openOnClick","itemTemplate","itemLinkTemplate","ngClass"]],template:function(t,n){t&1&&T(0,"ul",0),t&2&&(r("items",n.rootItems)("level",0)("appendTo",n.appendTo)("size",n.size)("vertical",n.vertical)("rtl",n.rtl)("animate",n.animate)("openOnClick",n.openOnClick)("itemTemplate",(n.itemTemplate.first==null?null:n.itemTemplate.first.templateRef)||n.menuItemTemplate)("itemLinkTemplate",(n.itemLinkTemplate.first==null?null:n.itemLinkTemplate.first.templateRef)||n.menuItemLinkTemplate)("ngClass",n.menuClasses),N("role",n.ariaRole)("aria-orientation",n.ariaOrientation))},dependencies:[Ao,Oe],encapsulation:2})}return i})(),Br=(()=>{class i{itemsService;index;hostClasses=!0;role="presentation";tabindex="-1";get activeClass(){return this.item.opened}item;constructor(e){this.itemsService=e}ngOnInit(){if(Ee()&&!this.index)throw new Error("The kendoMenuItemLink directive requires the item index to be set.");this.item=this.itemsService.get(this.index)||{}}static \u0275fac=function(t){return new(t||i)(u(Ie))};static \u0275dir=D({type:i,selectors:[["","kendoMenuItemLink",""]],hostVars:8,hostBindings:function(t,n){t&2&&(N("role",n.role)("tabindex",n.tabindex),G("k-link",n.hostClasses)("k-menu-link",n.hostClasses)("k-active",n.activeClass))},inputs:{index:[0,"kendoMenuItemLink","index"]}})}return i})(),zr=(()=>{class i{itemsService;index;hostClasses=!0;ariaHidden="true";item;fontIcon;SVGIcon;constructor(e){this.itemsService=e}ngOnInit(){if(Ee()&&!this.index)throw new Error("The kendoMenuExpandArrow component requires the item index to be set.");this.item=this.itemsService.get(this.index)||{},this.fontIcon=mo(this.item.horizontal,this.item.rtl),this.SVGIcon=go(this.item.horizontal,this.item.rtl)}static \u0275fac=function(t){return new(t||i)(u(Ie))};static \u0275cmp=L({type:i,selectors:[["","kendoMenuExpandArrow",""]],hostVars:3,hostBindings:function(t,n){t&2&&(N("aria-hidden",n.ariaHidden),G("k-menu-expand-arrow",n.hostClasses))},inputs:{index:[0,"kendoMenuExpandArrow","index"]},attrs:Ar,decls:1,vars:2,consts:[[3,"name","svgIcon"]],template:function(t,n){t&1&&T(0,"kendo-icon-wrapper",0),t&2&&r("name",n.fontIcon)("svgIcon",n.SVGIcon)},dependencies:[de],encapsulation:2})}return i})(),nn=class{prevented=!1;preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}constructor(o){Object.assign(this,o)}};var so=["textField","urlField","iconField","svgIconField","disabledField","cssClassField","cssStyleField","separatorField"],So=(()=>{class i{menu;data;fields;constructor(e){this.menu=e}ngOnChanges(){this.rebind()}rebind(){let e=this.fields=[];for(let t=0;t<so.length;t++){let n=so[t],s=this[n];s&&e.push({target:n.replace("Field",""),source:s})}this.menu.items=this.data?this.mapItems(this.data):[]}static \u0275fac=function(t){return new(t||i)(u(we))};static \u0275dir=D({type:i,selectors:[["kendoBindingBase"]],standalone:!1,features:[Me]})}return i})(),Hr=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,ct={};ct.undefined=i=>i;var bt=i=>{if(ct[i])return ct[i];let o=[];return i.replace(Hr,(e,t,n,s)=>{o.push(t!==void 0?t:n||s)}),ct[i]=e=>{let t=e;for(let n=0;n<o.length&&t;n++)t=t[o[n]];return t},ct[i]},jr=i=>i[i.length-1],oo=(i,o)=>Array.isArray(i)?i[o]||jr(i):i,$r=(()=>{class i extends So{data;textField;urlField;iconField;svgIconField;disabledField;cssClassField;cssStyleField;separatorField;childrenField;constructor(e){super(e)}mapItems(e,t=0){return e.map(n=>{let s=this.createItem(n,t),a=this.getChildren(n,t);return a&&(s.items=this.mapItems(a,t+1)),s})}createItem(e,t){let n={data:e},s=this.fields;for(let a=0;a<s.length;a++){let{target:p,source:A}=s[a];n[p]=bt(oo(A,t))(e)}return n}getChildren(e,t){if(this.childrenField){let n=oo(this.childrenField,t);return e[n]}}static \u0275fac=function(t){return new(t||i)(u(we))};static \u0275dir=D({type:i,selectors:[["","kendoMenuHierarchyBinding",""]],inputs:{data:[0,"kendoMenuHierarchyBinding","data"],textField:"textField",urlField:"urlField",iconField:"iconField",svgIconField:"svgIconField",disabledField:"disabledField",cssClassField:"cssClassField",cssStyleField:"cssStyleField",separatorField:"separatorField",childrenField:"childrenField"},exportAs:["kendoMenuHierarchyBinding"],features:[w]})}return i})(),Wr=(()=>{class i extends So{data;textField;urlField;iconField;svgIconField;disabledField;cssClassField;cssStyleField;separatorField;idField;parentIdField;constructor(e){super(e)}mapItems(e){if(!this.idField||!this.parentIdField)return e.map(s=>this.createItem(s));let t=[],n={};for(let s=0;s<e.length;s++){let a=e[s],p=this.createItem(a),A=bt(this.idField)(a),x=bt(this.parentIdField)(a);if(x==null)t.push(p);else{let U=n[x]=n[x]||{};U.items=U.items||[],U.items.push(p)}n[A]&&(p.items=n[A].items),n[A]=p}return t}createItem(e){let t={data:e},n=this.fields;for(let s=0;s<n.length;s++){let{source:a,target:p}=n[s];t[p]=bt(a)(e)}return t}static \u0275fac=function(t){return new(t||i)(u(we))};static \u0275dir=D({type:i,selectors:[["","kendoMenuFlatBinding",""]],inputs:{data:[0,"kendoMenuFlatBinding","data"],textField:"textField",urlField:"urlField",iconField:"iconField",svgIconField:"svgIconField",disabledField:"disabledField",cssClassField:"cssClassField",cssStyleField:"cssStyleField",separatorField:"separatorField",idField:"idField",parentIdField:"parentIdField"},exportAs:["kendoMenuFlatBinding"],features:[w]})}return i})(),sn=class extends nn{target;originalEvent;sender;constructor(o){super(),Object.assign(this,o)}},Qr=(()=>{class i{contextService;constructor(e){this.contextService=e}get(e){if(this.contextService.items)return this.contextService.items.get(e)}static \u0275fac=function(t){return new(t||i)(te(dt))};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),Eo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoContextMenuTemplate",""]]})}return i})(),on=(()=>{class i{targets=[];add(e){this.targets.push(e)}remove(e){let t=this.targets.indexOf(e);this.targets.splice(t,1)}find(e){return this.targets.find(t=>t.element===e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),No=(()=>{class i{targetService;element;constructor(e,t){this.targetService=t,e&&(this.element=e.nativeElement)}static \u0275fac=function(t){return new(t||i)(u(k),u(on))};static \u0275dir=D({type:i,selectors:[["","kendoContextMenuTargetContainer",""]],exportAs:["kendoContextMenuTargetContainer"],features:[K([on])]})}return i})(),qr="k-contextmenu-target",Xr=(()=>{class i{targetService;data;element;hostClass=!0;constructor(e,t){this.targetService=t,e&&(this.element=e.nativeElement),t.add(this)}ngOnDestroy(){this.targetService.remove(this)}static \u0275fac=function(t){return new(t||i)(u(k),u(on))};static \u0275dir=D({type:i,selectors:[["","kendoContextMenuTarget",""]],hostVars:2,hostBindings:function(t,n){t&2&&G("k-contextmenu-target",n.hostClass)},inputs:{data:[0,"kendoContextMenuTarget","data"]},exportAs:["kendoContextMenuTarget"]})}return i})(),Lt="contextmenu",Jr={horizontal:"left",vertical:"bottom"},Zr={horizontal:"left",vertical:"top"},Yr={horizontal:"fit",vertical:"flip"},el=i=>i.preventDefault(),_t=(()=>{class i extends we{popupService;service;ngZone;renderer;showOn=Lt;target;filter;alignToAnchor=!1;vertical=!0;popupAnimate;popupAlign;anchorAlign;collision;appendTo;ariaLabel;popupOpen=new f;popupClose=new f;select=new f;open=new f;close=new f;contentTemplate;defaultContentTemplate;closeSubscription;showSubscription;keydownSubscription;popupSubscriptions;popupRef;currentTarget;directiveTarget;activeTarget;constructor(e,t,n,s){super(),this.popupService=e,this.service=t,this.ngZone=n,this.renderer=s,this.service.owner=this,this.popupKeyDownHandler=this.popupKeyDownHandler.bind(this)}hide(){this.removePopup()}show(e){if(!e)return;let t=e;this.removePopup(),Zi(t.left)&&Zi(t.top)?this.createPopup({offset:t}):(this.currentTarget=t.nativeElement||t,this.createPopup({anchor:this.currentTarget}))}ngOnChanges(e){(e.target||e.showOn)&&this.bindShowHandler()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{let e=this.renderer.listen("document","mousedown",n=>{this.popupRef&&!rn(n.target,s=>s===this.popupRef.popupElement)&&this.service.leaveMenu(n)&&this.closePopup(n)}),t=this.renderer.listen("window","blur",n=>{this.popupRef&&this.closePopup(n)});this.closeSubscription=()=>{e(),t()}})}ngOnDestroy(){this.closeSubscription&&(this.closeSubscription(),this.closeSubscription=null),this.unbindShowHandler(),this.removePopup()}emitMenuEvent(e,t){t.target=this.currentTarget,t.sender=this,this[e].emit(t),e==="select"&&!t.hasContent&&this.closeAndFocus(t.originalEvent)}bindShowHandler(){this.unbindShowHandler(),this.ngZone.runOutsideAngular(()=>{let e=this.targetElement();if(!e)return;let t=this.showOn||Lt;this.showSubscription=this.renderer.listen(e,this.showOn||Lt,n=>{this.showContextMenu(n,e)}),t===Lt&&(this.keydownSubscription=this.renderer.listen(e,"keydown",n=>{n.shiftKey&&n.code===S.F10&&this.showContextMenu(n,e)}))})}showContextMenu(e,t){let n=this.targetFilter(),s=t;if(n){if(s=Fr(e.target,n,t),s&&s!==e.target&&ro(e.target))return;s&&this.directiveTarget&&(s=this.target.targetService.find(s))}if(!s){this.closePopup(e);return}this.ngZone.run(()=>{this.closePopup(e)||(this.currentTarget=s,this.openPopup(e))})}unbindShowHandler(){this.showSubscription&&(this.showSubscription(),this.showSubscription=null),this.keydownSubscription&&(this.keydownSubscription(),this.keydownSubscription=null)}targetElement(){if(!ge())return;this.directiveTarget=!1;let e=this.target;return typeof e=="string"?e=document.querySelector(e):e&&e.nativeElement?e=e.nativeElement:e instanceof No&&(e=e.element,this.directiveTarget=!0),e}targetFilter(){return this.directiveTarget?`.${qr}`:this.filter}closePopup(e){if(this.popupRef)return this.popupAction("popupClose",e,()=>{this.removePopup()})}removePopup(){this.popupRef&&(this.popupRef.close(),this.popupRef=null,this.currentTarget=null),this.popupSubscriptions&&(this.popupSubscriptions(),this.popupSubscriptions=null)}openPopup(e){this.popupAction("popupOpen",e,()=>{e.preventDefault();let t,n;this.alignToAnchor||e.type==="keydown"?t=this.currentTargetElement:n={left:e.pageX,top:e.pageY},this.createPopup({anchor:t,offset:n})})}createPopup(e){this.popupRef=this.popupService.open(Object.assign({animate:Zi(this.popupAnimate)?this.popupAnimate:!0,appendTo:this.appendTo,collision:this.collision||Yr,popupAlign:this.popupAlign||Zr,anchorAlign:this.anchorAlign||Jr,content:this.contentTemplate?this.contentTemplate.templateRef:this.defaultContentTemplate,popupClass:"k-menu-popup",positionMode:"absolute"},e));let t=this.popupRef.popupElement;this.renderer.addClass(t,"k-context-menu-popup"),this.renderer.setAttribute(t,"tabindex","-1"),this.renderer.setStyle(t,"outline","0"),this.ariaLabel&&this.renderer.setAttribute(t,"aria-label",this.ariaLabel),this.activeTarget=this.currentTargetElement===document.activeElement,this.ngZone.runOutsideAngular(()=>{let n=this.renderer.listen(t,"keydown",this.popupKeyDownHandler),s=this.renderer.listen(t,"contextmenu",el);this.popupSubscriptions=()=>{n(),s()}}),t.focus()}closeAndFocus(e){let t=this.currentTargetElement;!this.closePopup(e)&&this.activeTarget&&t.focus()}popupKeyDownHandler(e){let t=this.popupRef.popupElement;e.code===S.Escape&&(ut(e.target,"k-menu-item")||e.target===t)?this.closeAndFocus(e):e.target===t&&this.service.keydown.emit(e)}popupAction(e,t,n){let s=this[e],a=!1;return Ct(s)?this.ngZone.run(()=>{let p=new sn({originalEvent:t,sender:this,target:this.currentTarget});s.emit(p),p.isDefaultPrevented()||n(),a=p.isDefaultPrevented()}):n(),a}get currentTargetElement(){return this.directiveTarget&&this.currentTarget?this.currentTarget.element:this.currentTarget}static \u0275fac=function(t){return new(t||i)(u(Le),u(dt),u(j),u(X))};static \u0275cmp=L({type:i,selectors:[["kendo-contextmenu"]],contentQueries:function(t,n,s){if(t&1&&F(s,Eo,5),t&2){let a;O(a=C())&&(n.contentTemplate=a.first)}},viewQuery:function(t,n){if(t&1&&P(vr,5),t&2){let s;O(s=C())&&(n.defaultContentTemplate=s.first)}},inputs:{showOn:"showOn",target:"target",filter:"filter",alignToAnchor:"alignToAnchor",vertical:"vertical",popupAnimate:"popupAnimate",popupAlign:"popupAlign",anchorAlign:"anchorAlign",collision:"collision",appendTo:"appendTo",ariaLabel:"ariaLabel"},outputs:{popupOpen:"popupOpen",popupClose:"popupClose",select:"select",open:"open",close:"close"},exportAs:["kendoContextMenu"],features:[K([dt,M,{provide:fe,useValue:"kendo.contextmenu"},{provide:Ie,useClass:Qr},{provide:we,useExisting:z(()=>i)},Le,{provide:Oi,useFactory:po}]),w,Me],decls:2,vars:0,consts:[["default",""],["ariaRole","menu",3,"items","appendTo","size","vertical","openOnClick","hoverDelay","animate","menuItemTemplate","menuItemLinkTemplate"]],template:function(t,n){t&1&&h(0,Sr,1,9,"ng-template",null,0,pe)},dependencies:[vo],encapsulation:2})}return i})(),Oo=[vo,uo,ln,cn,co,$r,Wr,Br,zr],tl=[_t,Eo,Xr,No,...Oo],fd=[...Oo,...tl];var nl=["content"],sl=["fabButton"];function ol(i,o){if(i&1){let e=R();d(0,"button",11),E("click",function(){let n=m(e).index,s=c();return g(s.viewChange(n))}),I(1),_()}if(i&2){let e=o.$implicit,t=o.index,n=c();r("svgIcon",e.svgIcon)("icon",e.icon)("selected",t===n.activeView),l(),$(" ",e.buttonText," ")}}function al(i,o){}function rl(i,o){if(i&1&&h(0,al,0,0,"ng-template",12),i&2){let e=c();r("ngTemplateOutlet",e.toolbarActionsTemplate==null?null:e.toolbarActionsTemplate.templateRef)}}function ll(i,o){if(i&1){let e=R();d(0,"kendo-floatingactionbutton",13,0),E("click",function(){m(e);let n=c();return g(n.promptRequestCancel.emit())}),_()}if(i&2){let e=c();r("positionMode",e.fabPositionMode)("align",e.fabAlignment)("svgIcon",e.fabStopGenerationSVGIcon)}}function cl(i,o){i&1&&Q(0)}function ul(i,o){if(i&1){let e=R();d(0,"div",14)(1,"div",15)(2,"button",16),E("click",function(){m(e);let n=c();return g(n.handleGenerateOutput())}),I(3),_()()()}if(i&2){let e=c();l(2),r("svgIcon",e.generateButtonSVGIcon)("icon",e.generateButtonIcon)("disabled",e.disabledGenerateButton),N("title",e.messageFor("generateOutput"))("aria-label",e.messageFor("generateOutput"))("aria-disabled",e.disabledGenerateButton),l(),V(e.messageFor("generateOutput"))}}function pl(i,o){if(i&1){let e=R();d(0,"kendo-panelbar",1),E("itemClick",function(n){m(e);let s=c();return g(s.itemClickHandler(n))}),_()}if(i&2){let e=c();r("items",e.panelBarItems)("animate",!1)("selectable",!1)}}var dl=["kendoAIPromptOutputCard",""],be=i=>({$implicit:i});function _l(i,o){i&1&&Q(0)}function ml(i,o){if(i&1&&(b(0),h(1,_l,1,0,"ng-container",10),y()),i&2){let e=c();l(),r("ngTemplateOutlet",e.customBodyTemplate)("ngTemplateOutletContext",me(2,be,e.promptOutput))}}function gl(i,o){if(i&1&&(d(0,"p"),I(1),_()),i&2){let e=c();l(),V(e.promptOutput.output)}}function hl(i,o){if(i&1){let e=R();b(0),T(1,"span",11),d(2,"button",12),E("click",function(){m(e);let n=c();return g(n.handleRating("positive"))}),_(),d(3,"button",13),E("click",function(){m(e);let n=c();return g(n.handleRating("negative"))}),_(),y()}if(i&2){let e=c();l(2),r("svgIcon",e.positiveRatingIcon),l(),r("svgIcon",e.negativeRatingIcon)}}function fl(i,o){i&1&&Q(0)}function Al(i,o){if(i&1&&(b(0),h(1,fl,1,0,"ng-container",5),y()),i&2){let e=c().$implicit,t=c(2);l(),r("ngTemplateOutlet",t.customTemplate)("ngTemplateOutletContext",me(2,be,e))}}function vl(i,o){if(i&1&&T(0,"div",6),i&2){let e=c().$implicit;r("promptOutput",e)}}function Sl(i,o){if(i&1&&(b(0),h(1,Al,2,4,"ng-container",4)(2,vl,1,1,"ng-template",null,1,pe),y()),i&2){let e=Z(3),t=c(2);l(),r("ngIf",t.customTemplate)("ngIfElse",e)}}function El(i,o){if(i&1&&(d(0,"div",2),h(1,Sl,4,2,"ng-container",3),_()),i&2){let e=c();l(),r("ngForOf",e.promptOutputs)}}function Nl(i,o){if(i&1){let e=R();d(0,"kendo-textarea-suffix")(1,"button",4),E("error",function(n){m(e);let s=c(2);return g(s.onSpeechToTextError(n))})("result",function(n){m(e);let s=c(2);return g(s.onSpeechToTextResult(n))}),_()()}if(i&2){let e=c(2);l(),r("continuous",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.continuous)("disabled",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.disabled)("fillMode",(e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.fillMode)??"flat")("integrationMode",(e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.integrationMode)??"webSpeech")("interimResults",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.interimResults)("lang",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.lang)("maxAlternatives",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.maxAlternatives)("rounded",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.rounded)("size",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.size)("themeColor",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.themeColor),N("aria-label",e.messageFor("speechToTextButton"))("title",e.messageFor("speechToTextButton"))("aria-disabled",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.disabled)}}function Ol(i,o){if(i&1){let e=R();d(0,"div",11),E("click",function(){let n=m(e).$implicit,s=c(4);return g(s.suggestionClick(n))})("keydown",function(n){let s=m(e).$implicit,a=c(4);return g(a.suggestionKeydown(n,s))}),I(1),_()}if(i&2){let e=o.$implicit;N("tabindex",0)("aria-label",e)("title",e),l(),$(" ",e," ")}}function Cl(i,o){if(i&1&&(d(0,"div",8)(1,"div",9),h(2,Ol,2,4,"div",10),_()()),i&2){let e=c(3);N("id",e.contentId),l(2),r("ngForOf",e.promptSuggestions)}}function Rl(i,o){if(i&1){let e=R();d(0,"div",5)(1,"button",6),E("click",function(){m(e);let n=c(2);return g(n.showSuggestions=!n.showSuggestions)}),I(2),_(),h(3,Cl,3,2,"div",7),_()}if(i&2){let e=c(2);l(),r("icon",e.suggestionsIcons.font)("svgIcon",e.suggestionsIcons.svg),N("aria-controls",e.contentId)("aria-expanded",e.showSuggestions),l(),$(" ",e.messageFor("promptSuggestions")," "),l(),r("ngIf",e.showSuggestions)}}function Il(i,o){if(i&1){let e=R();d(0,"kendo-textarea",1),ii("valueChange",function(n){m(e);let s=c();return ti(s.textAreaValue,n)||(s.textAreaValue=n),g(n)}),h(1,Nl,2,13,"kendo-textarea-suffix",2),_(),h(2,Rl,4,6,"div",3)}if(i&2){let e=c();r("cols",e.textareaSettings==null?null:e.textareaSettings.cols)("disabled",e.textareaSettings==null?null:e.textareaSettings.disabled)("fillMode",e.textareaSettings==null?null:e.textareaSettings.fillMode)("flow",(e.textareaSettings==null?null:e.textareaSettings.flow)??"vertical")("inputAttributes",e.textareaSettings==null?null:e.textareaSettings.inputAttributes)("maxlength",e.textareaSettings==null?null:e.textareaSettings.maxlength)("placeholder",(e.textareaSettings==null?null:e.textareaSettings.placeholder)??e.messageFor("promptPlaceholder"))("readonly",e.textareaSettings==null?null:e.textareaSettings.readonly)("resizable",(e.textareaSettings==null?null:e.textareaSettings.resizable)??"vertical")("rounded",e.textareaSettings==null?null:e.textareaSettings.rounded)("rows",(e.textareaSettings==null?null:e.textareaSettings.rows)??1)("selectOnFocus",e.textareaSettings==null?null:e.textareaSettings.selectOnFocus)("showSuffixSeparator",(e.textareaSettings==null?null:e.textareaSettings.showSuffixSeparator)??!0)("size",e.textareaSettings==null?null:e.textareaSettings.size)("tabIndex",e.textareaSettings==null?null:e.textareaSettings.tabindex)("title",e.textareaSettings==null?null:e.textareaSettings.title),ei("value",e.textAreaValue),l(),r("ngIf",e.speechToTextButtonSettings),l(),r("ngIf",e.promptSuggestions)}}var Ml=["kendoChatScrollableButton",""],Dl=["suggestionsContainer"],Tl=["prevScrollButton"],xl=["nextScrollButton"],Lo=["item"];function Ll(i,o){if(i&1){let e=R();d(0,"span",8,2),E("onClick",function(n){m(e);let s=c();return g(s.scrollSuggestions(n))}),_()}if(i&2){let e=c();r("prev",!0)("title",e.getScrollButtonTitle("prev"))}}function bl(i,o){i&1&&Q(0)}function yl(i,o){if(i&1){let e=R();d(0,"div",9,3),E("scroll",function(n){m(e);let s=c();return g(s.onScroll(n))}),h(2,bl,1,0,"ng-container",10),_()}if(i&2){c();let e=Z(5);l(2),r("ngTemplateOutlet",e)}}function kl(i,o){i&1&&Q(0)}function Ul(i,o){if(i&1&&h(0,kl,1,0,"ng-container",10),i&2){c();let e=Z(5);r("ngTemplateOutlet",e)}}function wl(i,o){if(i&1){let e=R();d(0,"span",13,4),E("click",function(){let n=m(e),s=n.$implicit,a=n.index,p=c(3);return g(p.actionClick(s,a))})("keydown",function(n){let s=m(e).$implicit,a=c(3);return g(a.actionKeydown(n,s))})("mousedown",function(){let n=m(e).index,s=c(3);return g(s.toggleActiveState(!0,n))})("mouseup",function(){let n=m(e).index,s=c(3);return g(s.toggleActiveState(!1,n))}),I(2),_()}if(i&2){let e=o.$implicit,t=o.index,n=c(3);G("k-selected",n.isSelected(t))("k-focus",n.isSelected(t))("k-active",n.isActive(t)),N("tabindex",0),l(2),$(" ",e.title||e.value," ")}}function Gl(i,o){if(i&1&&(b(0),h(1,wl,3,8,"span",12),y()),i&2){let e=c(2);l(),r("ngForOf",e.actions)}}function Fl(i,o){if(i&1){let e=R();d(0,"span",15,4),E("click",function(){let n=m(e),s=n.$implicit,a=n.index,p=c(4);return g(p.suggestionClick(s,a))})("keydown",function(n){let s=m(e).$implicit,a=c(4);return g(a.suggestionKeydown(n,s))})("mousedown",function(){let n=m(e).index,s=c(4);return g(s.toggleActiveState(!0,n))})("mouseup",function(){let n=m(e).index,s=c(4);return g(s.toggleActiveState(!1,n))}),I(2),_()}if(i&2){let e=o.$implicit,t=o.index,n=c(4);G("k-selected",n.isSelected(t))("k-focus",n.isSelected(t))("k-active",n.isActive(t)),N("tabindex",0),l(2),$(" ",e.text," ")}}function Pl(i,o){if(i&1&&(b(0),h(1,Fl,3,8,"span",14),y()),i&2){let e=c(3);l(),r("ngForOf",e.suggestions)}}function Kl(i,o){}function Vl(i,o){if(i&1&&(b(0),h(1,Kl,0,0,"ng-template",17),y()),i&2){let e=o.$implicit,t=c(4);l(),r("ngTemplateOutlet",t.suggestionTemplate.templateRef)("ngTemplateOutletContext",me(2,be,e))}}function Bl(i,o){if(i&1&&(b(0),h(1,Vl,2,4,"ng-container",16),y()),i&2){let e=c(3);l(),r("ngForOf",e.suggestions)}}function zl(i,o){if(i&1&&(b(0),h(1,Pl,2,1,"ng-container",11)(2,Bl,2,1,"ng-container",11),y()),i&2){let e=c(2);l(),r("ngIf",!(e.suggestionTemplate!=null&&e.suggestionTemplate.templateRef)),l(),r("ngIf",e.suggestionTemplate==null?null:e.suggestionTemplate.templateRef)}}function Hl(i,o){if(i&1&&h(0,Gl,2,1,"ng-container",11)(1,zl,3,2,"ng-container",11),i&2){let e=c();r("ngIf",e.actions),l(),r("ngIf",e.suggestions)}}function jl(i,o){if(i&1){let e=R();d(0,"span",8,5),E("onClick",function(n){m(e);let s=c();return g(s.scrollSuggestions(n))}),_()}if(i&2){let e=c();r("prev",!1)("title",e.getScrollButtonTitle("next"))}}var $l=["chatFile",""];function Wl(i,o){if(i&1){let e=R();d(0,"button",6),E("click",function(){m(e);let n=c();return g(n.remove.emit(n.chatFile))}),_()}if(i&2){let e=c();r("svgIcon",e.deleteIcon),N("title",e.textFor("removeFileTitle"))}}function Ql(i,o){if(i&1){let e=R();d(0,"kendo-dropdownbutton",7),E("itemClick",function(n){m(e);let s=c();return g(s.actionClick.emit(n))})("click",function(n){return m(e),g(n.preventDefault())})("open",function(){m(e);let n=c();return g(n.actionsToggle.emit(!0))})("close",function(){m(e);let n=c();return g(n.actionsToggle.emit(!1))}),_()}if(i&2){let e=c();r("data",e.fileActions)("svgIcon",e.moreIcon),N("title",e.textFor("fileActionsTitle"))}}function ql(i,o){if(i&1&&(b(0),I(1),y()),i&2){let e=c();l(),V(e.message.text)}}function Xl(i,o){if(i&1&&(b(0),T(1,"li",1),y()),i&2){let e=c();l(),r("chatFile",e.message.files[0])}}function Jl(i,o){if(i&1&&(b(0),I(1),y()),i&2){let e=c();l(),V(e.textFor("deletedMessageSenderText"))}}function Zl(i,o){if(i&1&&(b(0),I(1),y()),i&2){let e=c();l(),V(e.textFor("deletedMessageReceiverText"))}}var Yl=["messageBoxInput"],ec=["fileSelect"],tc=i=>({"aria-label":i});function ic(i,o){if(i&1){let e=R();d(0,"kendo-chat-suggested-actions",6,1),E("dispatchSuggestion",function(n){m(e);let s=c();return g(s.dispatchSuggestion(n))})("click",function(n){m(e);let s=Z(1),a=c();return g(a.select(s,n))})("focus",function(n){m(e);let s=Z(1),a=c();return g(a.select(s,n))}),_()}if(i&2){let e=c();r("suggestions",e.suggestions)("suggestionTemplate",e.suggestionTemplate)("tabbable",!0)}}function nc(i,o){if(i&1){let e=R();d(0,"div",14),E("click",function(n){m(e);let s=c(3);return g(s.onReplyReferenceClick(n))}),T(1,"chat-message-reference-content",15)(2,"span",16),d(3,"button",17),E("click",function(){m(e);let n=c(3);return g(n.removeReply())}),_()()}if(i&2){let e=c(3);l(),r("message",e.reply),l(2),r("svgIcon",e.deleteIcon),N("title",e.textFor("removeReplyTitle"))}}function sc(i,o){if(i&1){let e=R();d(0,"li",18),E("remove",function(){let n=m(e).index,s=c(3);return g(s.removeFile(n))}),_()}if(i&2){let e=o.$implicit;r("chatFile",e)("removable",!0)}}function oc(i,o){if(i&1&&(d(0,"kendo-textarea-prefix"),h(1,nc,4,3,"div",11),d(2,"ul",12),h(3,sc,1,2,"li",13),_()()),i&2){let e=c(2);l(),r("ngIf",e.reply),l(2),r("ngForOf",e.files)}}function ac(i,o){if(i&1){let e=R();d(0,"button",19),E("result",function(n){m(e);let s=c(2);return g(s.handleSpeechResult(n))})("start",function(){m(e);let n=c(2);return g(n.isListening=!0)})("end",function(){m(e);let n=c(2);return g(n.isListening=!1)}),_()}if(i&2){let e=c(2);r("continuous",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.continuous)("disabled",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.disabled)("fillMode",(e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.fillMode)??"clear")("integrationMode",(e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.integrationMode)??"webSpeech")("interimResults",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.interimResults)("lang",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.lang)("maxAlternatives",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.maxAlternatives)("rounded",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.rounded)("size",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.size)("themeColor",e.speechToTextButtonSettings==null?null:e.speechToTextButtonSettings.themeColor),N("title",e.textFor("speechToTextButtonTitle"))}}function rc(i,o){if(i&1){let e=R();d(0,"button",20),E("click",function(){m(e);let n=c(2);return g(n.selectFiles())}),_()}if(i&2){let e=c(2);r("svgIcon",e.attachmentIcon),N("title",e.textFor("fileSelectButtonTitle"))}}function lc(i,o){if(i&1){let e=R();b(0),d(1,"kendo-textarea",7,2),E("keydown",function(n){m(e);let s=c();return g(s.textAreaKeydown(n))})("valueChange",function(n){m(e);let s=c();return g(s.onInputValueChange(n))}),h(3,oc,4,2,"kendo-textarea-prefix",4),d(4,"kendo-textarea-suffix"),h(5,ac,1,11,"button",8)(6,rc,1,2,"button",9),T(7,"kendo-input-spacer"),d(8,"button",10),E("click",function(){m(e);let n=c();return g(n.sendClick())}),_()()(),y()}if(i&2){let e=c();l(),r("rows",3)("inputAttributes",me(20,tc,e.textFor("messageBoxInputLabel")))("placeholder",e.placeholder||e.textFor("messagePlaceholder"))("showSuffixSeparator",!1)("value",e.inputValue),l(2),r("ngIf",e.reply||e.files&&e.files.length>0),l(2),r("ngIf",e.speechToTextButtonSettings),l(),r("ngIf",e.enableFileSelect),l(2),Yt((e.sendButtonSettings==null?null:e.sendButtonSettings.buttonClass)||"k-chat-send"),G("k-disabled",e.isDisabledSendButton),r("fillMode",e.sendButtonSettings==null?null:e.sendButtonSettings.fillMode)("themeColor",e.sendButtonSettings==null?null:e.sendButtonSettings.themeColor)("rounded",e.sendButtonSettings==null?null:e.sendButtonSettings.rounded)("icon",e.sendButtonSettings==null?null:e.sendButtonSettings.icon)("svgIcon",e.sendButtonSettings==null?null:e.sendButtonSettings.svgIcon)("tabindex",0),N("title",e.textFor("send"))("aria-disabled",e.isDisabledSendButton)}}function cc(i,o){}function uc(i,o){if(i&1&&h(0,cc,0,0,"ng-template",21),i&2){let e=c();r("ngTemplateOutlet",e.messageBoxTemplate==null?null:e.messageBoxTemplate.templateRef)}}var bo=(i,o,e,t,n)=>({"k-bubble-expandable":i,"k-expanded":o,"k-selected":e,"k-focus":t,"k-active":n}),pc=(i,o)=>({"k-chat-files-wrap":i,"k-chat-files-horizontal":o}),dc=(i,o)=>({$implicit:i,message:o});function _c(i,o){i&1&&Q(0)}function mc(i,o){if(i&1&&(b(0),h(1,_c,1,0,"ng-container",2),y()),i&2){let e,t=c();l(),r("ngTemplateOutlet",(e=t.getActiveBubbleTemplate())==null?null:e.templateRef)("ngTemplateOutletContext",me(2,be,t.message))}}function gc(i,o){if(i&1&&(d(0,"time",5),I(1),_()),i&2){let e=c(2);N("aria-hidden",!e.selected),l(),$(" ",e.formatTimeStamp(e.message.timestamp)," ")}}function hc(i,o){i&1&&(b(0),d(1,"div",6)(2,"div",7),T(3,"span")(4,"span")(5,"span"),_()(),y()),i&2&&(l(2),N("tabindex","-1"))}function fc(i,o){i&1&&Q(0)}function Ac(i,o){if(i&1){let e=R();d(0,"span",12),E("mousedown",function(){m(e);let n=c(4);return g(n.chatService.toggleMessageState=!0)})("click",function(n){m(e);let s=c(4);return g(s.toggleMessageState(n))}),T(1,"kendo-icon-wrapper",13),_()}if(i&2){let e=c(4);N("tabindex","0")("role","button")("title",e.isMessageExpanded?e.textFor("collapseTitle"):e.textFor("expandTitle")),l(),r("name",e.isMessageExpanded?"chevron-up":"chevron-down")("svgIcon",e.isMessageExpanded?e.collapseIcon:e.expandIcon)}}function vc(i,o){if(i&1&&(d(0,"div",9)(1,"div",10),h(2,fc,1,0,"ng-container",2),_(),h(3,Ac,2,5,"span",11),_()),i&2){let e,t=c(3);r("ngClass",ni(5,bo,t.isMessageExpandable,t.isMessageExpanded,t.selected,t.selected,t.isActiveMessage)),N("tabindex",0),l(2),r("ngTemplateOutlet",(e=t.getActiveContentTemplate())==null?null:e.templateRef)("ngTemplateOutletContext",me(11,be,t.message)),l(),r("ngIf",t.isMessageExpandable&&t.showExpandCollapseIcon)}}function Sc(i,o){if(i&1){let e=R();d(0,"div",18),E("click",function(n){m(e);let s=c(5);return g(s.onReplyReferenceClick(n,s.message.replyToId))}),T(1,"chat-message-reference-content",19),_()}if(i&2){let e=c(5);l(),r("message",e.getMessageById(e.message.replyToId))}}function Ec(i,o){if(i&1&&(d(0,"span",20),I(1),_()),i&2){let e=c(5);l(),$(" ",e.getDeletedMessageText()," ")}}function Nc(i,o){if(i&1&&(b(0),I(1),y()),i&2){let e=c().$implicit;l(),V(e.content)}}function Oc(i,o){if(i&1&&(d(0,"a",23),I(1),_()),i&2){let e=c().$implicit;r("href",e.href,xe),l(),V(e.content)}}function Cc(i,o){if(i&1&&(b(0),h(1,Nc,2,1,"ng-container",0)(2,Oc,2,2,"a",22),y()),i&2){let e=o.$implicit;l(),r("ngIf",e.type==="text"),l(),r("ngIf",e.type==="link")}}function Rc(i,o){if(i&1&&(d(0,"span",20),h(1,Cc,3,2,"ng-container",21),_()),i&2){let e=c(5);l(),r("ngForOf",e.parts)}}function Ic(i,o){if(i&1&&(b(0),h(1,Sc,2,1,"div",16)(2,Ec,2,1,"span",17)(3,Rc,2,1,"span",17),y()),i&2){let e=c(4);l(),r("ngIf",e.message.replyToId&&!e.message.isDeleted),l(),r("ngIf",e.message.isDeleted),l(),r("ngIf",!e.message.isDeleted&&e.parts.length>0)}}function Mc(i,o){if(i&1){let e=R();d(0,"li",26),E("actionClick",function(n){let s=m(e).$implicit,a=c(5);return g(a.onFileAction(n,s))})("actionsToggle",function(n){m(e);let s=c(5);return g(s.onActionPopupChange(n))})("actionButtonClick",function(n){m(e);let s=c(5);return g(s.onActionButtonClick(n))}),_()}if(i&2){let e=o.$implicit,t=c(5);r("chatFile",e)("fileActions",t.fileActions)}}function Dc(i,o){if(i&1&&(d(0,"ul",24),h(1,Mc,1,2,"li",25),_()),i&2){let e=c(4);r("ngClass",Se(2,pc,e.chatService.messageFilesLayout==="wrap",e.chatService.messageFilesLayout==="horizontal")),l(),r("ngForOf",e.message.files)}}function Tc(i,o){if(i&1){let e=R();d(0,"div",27)(1,"button",28),E("click",function(){m(e);let n=c(4);return g(n.onDownloadAll())}),I(2),_()()}if(i&2){let e=c(4);l(),r("svgIcon",e.downloadIcon),N("title",e.textFor("downloadAllFilesText")),l(),V(e.textFor("downloadAllFilesText"))}}function xc(i,o){if(i&1){let e=R();d(0,"span",12),E("mousedown",function(){m(e);let n=c(4);return g(n.chatService.toggleMessageState=!0)})("click",function(n){m(e);let s=c(4);return g(s.toggleMessageState(n))}),T(1,"kendo-icon-wrapper",13),_()}if(i&2){let e=c(4);N("tabindex","0")("role","button")("title",e.isMessageExpanded?e.textFor("collapseTitle"):e.textFor("expandTitle")),l(),r("name",e.isMessageExpanded?"chevron-up":"chevron-down")("svgIcon",e.isMessageExpanded?e.collapseIcon:e.expandIcon)}}function Lc(i,o){if(i&1&&(d(0,"div",9)(1,"div",10),h(2,Ic,4,3,"ng-container",0)(3,Dc,2,5,"ul",14)(4,Tc,3,3,"div",15),_(),h(5,xc,2,5,"span",11),_()),i&2){let e=c(3);r("ngClass",ni(6,bo,e.isMessageExpandable,e.isMessageExpanded,e.selected,e.selected,e.isActiveMessage)),N("tabindex",0),l(2),r("ngIf",e.message.text||e.message.isDeleted),l(),r("ngIf",e.hasFiles&&!e.message.isDeleted),l(),r("ngIf",e.hasMultipleFiles&&!e.message.isDeleted),l(),r("ngIf",e.isMessageExpandable&&e.showExpandCollapseIcon)}}function bc(i,o){if(i&1&&(b(0),h(1,vc,4,13,"div",8)(2,Lc,6,12,"div",8),y()),i&2){let e=c(2);l(),r("ngIf",e.useCustomContentTemplate),l(),r("ngIf",!e.useCustomContentTemplate&&e.hasMessageContent)}}function yc(i,o){}function kc(i,o){if(i&1&&(b(0),h(1,yc,0,0,"ng-template",30),y()),i&2){let e=c(3);l(),r("ngTemplateOutlet",e.statusTemplate.templateRef)("ngTemplateOutletContext",Se(2,dc,e.message.status,e.message))}}function Uc(i,o){if(i&1&&(b(0),I(1),y()),i&2){let e=c(3);l(),$(" ",e.message.status," ")}}function wc(i,o){if(i&1&&(d(0,"span",29),h(1,kc,2,5,"ng-container",0)(2,Uc,2,1,"ng-container",0),_()),i&2){let e=c(2);l(),r("ngIf",e.statusTemplate==null?null:e.statusTemplate.templateRef),l(),r("ngIf",!(e.statusTemplate!=null&&e.statusTemplate.templateRef))}}function Gc(i,o){if(i&1&&(b(0),h(1,gc,2,2,"time",3)(2,hc,6,1,"ng-container",0)(3,bc,3,2,"ng-container",0)(4,wc,3,2,"span",4),y()),i&2){let e=c();l(),r("ngIf",e.chatService.timestampVisibility==="focus"&&e.message.timestamp),l(),r("ngIf",e.message.typing),l(),r("ngIf",!e.message.typing),l(),r("ngIf",e.message.status)}}function Fc(i,o){if(i&1){let e=R();d(0,"kendo-toolbar-button",33),E("click",function(n){let s=m(e).$implicit,a=c(2);return g(a.onToolbarAction(n,s,a.message))}),_()}if(i&2){let e=o.$implicit;r("icon",e.icon)("svgIcon",e.svgIcon)("disabled",e.disabled)("title",e.label)}}function Pc(i,o){if(i&1&&(d(0,"kendo-toolbar",31),h(1,Fc,1,4,"kendo-toolbar-button",32),_()),i&2){let e=c();l(),r("ngForOf",e.toolbarActions)}}function Kc(i,o){i&1&&Q(0)}function Vc(i,o){if(i&1&&(b(0),h(1,Kc,1,0,"ng-container",2),y()),i&2){let e=c();l(),r("ngTemplateOutlet",e.template.templateRef)("ngTemplateOutletContext",e.context)}}function Bc(i,o){if(i&1&&(d(0,"h5",7),I(1),_()),i&2){let e=c(2);l(),$(" ",e.attachment.title," ")}}function zc(i,o){if(i&1&&(d(0,"h6",8),I(1),_()),i&2){let e=c(2);l(),$(" ",e.attachment.subtitle," ")}}function Hc(i,o){if(i&1&&T(0,"img"),i&2){let e=c(2);N("src",e.attachment.content,xe)}}function jc(i,o){if(i&1&&(b(0),I(1),y()),i&2){let e=c(2);l(),$(" ",e.attachment.content," ")}}function $c(i,o){if(i&1&&(d(0,"div",3)(1,"div",4),h(2,Bc,2,1,"h5",5)(3,zc,2,1,"h6",6)(4,Hc,1,1,"img",0)(5,jc,2,1,"ng-container",0),_()()),i&2){let e=c();l(2),r("ngIf",e.attachment.title),l(),r("ngIf",e.attachment.subtitle),l(),r("ngIf",e.image),l(),r("ngIf",e.unknown)}}var Wc=["deck"];function Qc(i,o){if(i&1){let e=R();d(0,"button",5),E("click",function(){m(e);let n=c();return g(n.scrollTo(-1))}),_()}if(i&2){let e=c();r("svgIcon",e.chevronLeftIcon),N("title",e.textFor("messageAttachmentLeftArrow"))}}function qc(i,o){if(i&1){let e=R();d(0,"kendo-chat-attachment",6,1),E("click",function(){let n=m(e).index,s=c();return g(s.itemClick(n))})("keydown",function(n){let s=m(e).$implicit,a=c();return g(a.itemKeydown(n,s))}),_()}if(i&2){let e=o.$implicit,t=o.index,n=o.first,s=o.last,a=c();G("k-selected",a.isSelected(t))("k-focus",a.isSelected(t))("k-card-wrap",!0)("k-first",n)("k-last",s),r("attachment",e)("template",a.template),N("tabindex",a.tabbable&&a.isSelected(t)?"0":"-1")}}function Xc(i,o){if(i&1){let e=R();d(0,"button",7),E("click",function(){m(e);let n=c();return g(n.scrollTo(1))}),_()}if(i&2){let e=c();r("svgIcon",e.chevronRightIcon),N("title",e.textFor("messageAttachmentRightArrow"))}}function Jc(i,o){if(i&1&&Q(0,13),i&2){let e=c(2).$implicit,t=c();r("ngTemplateOutlet",t.timestampTemplate.templateRef)("ngTemplateOutletContext",me(2,be,e.timestamp))}}function Zc(i,o){if(i&1&&(b(0),I(1),y()),i&2){let e=c(2).$implicit,t=c();l(),V(t.formatTimeStamp(e.timestamp))}}function Yc(i,o){if(i&1&&(d(0,"div",10),h(1,Jc,1,4,"ng-container",11)(2,Zc,2,1,"ng-container",12),_()),i&2){let e=c(2);l(),r("ngIf",e.timestampTemplate==null?null:e.timestampTemplate.templateRef),l(),r("ngIf",!(e.timestampTemplate!=null&&e.timestampTemplate.templateRef))}}function eu(i,o){if(i&1&&(d(0,"div",20)(1,"span",21),T(2,"img",22),_()()),i&2){let e=c(2).$implicit;l(2),r("alt",e.author.avatarAltText),N("src",e.author.avatarUrl,xe)}}function tu(i,o){}function iu(i,o){if(i&1&&(d(0,"div",25),h(1,tu,0,0,"ng-template",13),_()),i&2){let e=c(3).$implicit,t=c();l(),r("ngTemplateOutlet",t.userStatusTemplate.templateRef)("ngTemplateOutletContext",me(2,be,e.messages.at(-1)))}}function nu(i,o){if(i&1&&(d(0,"div",23)(1,"div",20)(2,"span",21),T(3,"img",22),_()(),h(4,iu,2,4,"div",24),_()),i&2){let e=c(2).$implicit,t=c();l(3),r("alt",e.author.avatarAltText),N("src",e.author.avatarUrl,xe),l(),r("ngIf",t.userStatusTemplate==null?null:t.userStatusTemplate.templateRef)}}function su(i,o){if(i&1&&(d(0,"p",26),I(1),_()),i&2){let e=c(2).$implicit;l(),V(e.author.name)}}function ou(i,o){if(i&1&&T(0,"kendo-chat-attachment",29),i&2){let e=c().$implicit,t=c(3);r("attachment",e.attachments[0])("template",t.attachmentTemplate)}}function au(i,o){if(i&1&&(b(0),T(1,"kendo-chat-message",27,0),h(3,ou,1,2,"kendo-chat-attachment",28),y()),i&2){let e=o.$implicit,t=o.last,n=c(2).last,s=c();l(),r("message",e)("tabbable",n&&t)("authorMessageContentTemplate",s.authorMessageContentTemplate)("receiverMessageContentTemplate",s.receiverMessageContentTemplate)("messageContentTemplate",s.messageContentTemplate)("authorMessageTemplate",s.authorMessageTemplate)("receiverMessageTemplate",s.receiverMessageTemplate)("messageTemplate",s.messageTemplate)("statusTemplate",s.statusTemplate)("authorId",s.authorId),l(2),r("ngIf",e.attachments&&e.attachments.length===1)}}function ru(i,o){if(i&1&&(d(0,"div",14),h(1,eu,3,2,"div",15)(2,nu,5,3,"div",16),d(3,"div",17),h(4,su,2,1,"p",18)(5,au,4,11,"ng-container",19),_()()),i&2){let e=c().$implicit,t=c();G("k-message-group-sender",t.isOwnMessage(e.messages[0]))("k-message-group-receiver",!t.isOwnMessage(e.messages[0]))("k-no-avatar",!t.showGroupAvatar(e))("k-message-group-full-width",t.calculateMessageWidthMode(e.messages[0])),l(),r("ngIf",!(t.userStatusTemplate!=null&&t.userStatusTemplate.templateRef)&&t.showGroupAvatar(e)),l(),r("ngIf",(t.userStatusTemplate==null?null:t.userStatusTemplate.templateRef)&&t.showGroupAvatar(e)),l(2),r("ngIf",t.showGroupAuthor(e)),l(),r("ngForOf",e.messages)}}function lu(i,o){if(i&1){let e=R();d(0,"kendo-chat-message-attachments",30,1),E("click",function(){m(e);let n=Z(1),s=c(2);return g(s.select(n))})("focus",function(){m(e);let n=Z(1),s=c(2);return g(s.select(n))}),_()}if(i&2){let e=c(),t=e.$implicit,n=e.last,s=c();r("attachments",t.attachments)("layout",t.attachmentLayout)("localization",s.localization)("tabbable",n)("template",s.attachmentTemplate)}}function cu(i,o){if(i&1){let e=R();d(0,"kendo-chat-suggested-actions",31,2),E("dispatchAction",function(n){m(e);let s=c(2);return g(s.dispatchAction(n,s.last(s.view)))})("click",function(n){m(e);let s=Z(1),a=c(2);return g(a.select(s,n))})("focus",function(n){m(e);let s=Z(1),a=c(2);return g(a.select(s,n))}),_()}if(i&2){let e=c(),t=e.$implicit,n=e.last;r("actions",t.actions)("tabbable",n)}}function uu(i,o){if(i&1&&(b(0)(1,5),h(2,Yc,3,2,"div",6)(3,ru,6,12,"div",7)(4,lu,2,5,"kendo-chat-message-attachments",8)(5,cu,2,2,"kendo-chat-suggested-actions",9),y()()),i&2){let e=o.$implicit;l(),r("ngSwitch",e.type),l(),r("ngSwitchCase","date-marker"),l(),r("ngSwitchCase","message-group"),l(),r("ngSwitchCase","attachment-group"),l(),r("ngSwitchCase","action-group")}}var pu=["messagesContextMenu"],du=["messageBox"],_u=["messageList"],mu=()=>({horizontal:"right",vertical:"top"}),gu=()=>({horizontal:"flip",vertical:"flip"});function hu(i,o){i&1&&Q(0)}function fu(i,o){if(i&1&&(d(0,"kendo-appbar",11),h(1,hu,1,0,"ng-container",12),_()),i&2){let e=c();l(),r("ngTemplateOutlet",e.chatHeaderTemplate.templateRef)}}function Au(i,o){if(i&1){let e=R();d(0,"div",13),E("click",function(){m(e);let n=c();return g(n.scrollToPinnedMessage())}),T(1,"kendo-icon-wrapper",14)(2,"chat-message-reference-content",15)(3,"span",16),d(4,"button",17),E("click",function(){m(e);let n=c();return g(n.unpin.emit(n.pinnedMessage))}),_()()}if(i&2){let e=c();l(),r("svgIcon",e.pinIcon),l(),r("message",e.pinnedMessage),l(2),r("svgIcon",e.deleteIcon)}}function vu(i,o){}function Su(i,o){if(i&1&&(d(0,"div",18),h(1,vu,0,0,"ng-template",19),_()),i&2){let e=c();l(),r("ngTemplateOutlet",e.chatNoDataTemplate==null?null:e.chatNoDataTemplate.templateRef)}}function Eu(i,o){if(i&1){let e=R();d(0,"kendo-chat-message-list",20),E("executeAction",function(n){m(e);let s=c();return g(s.dispatchAction(n))})("resize",function(){m(e),c();let n=Z(5);return g(n.scrollToBottom())})("navigate",function(){m(e);let n=c();return g(n.autoScroll=!1)}),_()}if(i&2){let e=c();r("messages",e.processedMessages)("authorMessageContentTemplate",e.authorMessageContentTemplate)("receiverMessageContentTemplate",e.receiverMessageContentTemplate)("messageContentTemplate",e.messageContentTemplate)("authorMessageTemplate",e.authorMessageTemplate)("receiverMessageTemplate",e.receiverMessageTemplate)("messageTemplate",e.messageTemplate)("timestampTemplate",e.timestampTemplate)("statusTemplate",e.statusTemplate)("userStatusTemplate",e.userStatusTemplate)("localization",e.localizationText)("attachmentTemplate",e.attachmentTemplate)("authorId",e.authorId)}}function Nu(i,o){if(i&1&&T(0,"img",6),i&2){let e=c();r("src",e.imageUrl,xe)}}function Ou(i,o){if(i&1&&(d(0,"h5",7),I(1),_()),i&2){let e=c();l(),$(" ",e.title," ")}}function Cu(i,o){if(i&1&&(d(0,"h6",8),I(1),_()),i&2){let e=c();l(),$(" ",e.subtitle," ")}}function Ru(i,o){if(i&1){let e=R();d(0,"span",9)(1,"button",10),E("click",function(){let n=m(e).$implicit,s=c();return g(s.onClick(n))}),I(2),_()()}if(i&2){let e=o.$implicit;l(2),$(" ",e.title," ")}}var Iu=["kendoContextMenu"],Mu=(i,o)=>({"k-generating":i,"k-active":o});function Du(i,o){if(i&1&&Q(0,14),i&2){let e=c(2);r("ngTemplateOutlet",e.outputTemplate)("ngTemplateOutletContext",me(2,be,e.promptOutput))}}function Tu(i,o){if(i&1&&(b(0),I(1),y()),i&2){let e=c(2);l(),V(e.promptOutput.output)}}function xu(i,o){if(i&1){let e=R();d(0,"button",18),E("click",function(){m(e);let n=c().$implicit,s=c(3);return g(s.onActionClick(n))}),I(1),_()}if(i&2){let e=c().$implicit;r("fillMode",e==null?null:e.fillMode)("themeColor",e==null?null:e.themeColor)("rounded",e==null?null:e.rounded)("icon",e==null?null:e.icon)("svgIcon",e==null?null:e.svgIcon),N("title",e==null?null:e.title),l(),V(e==null?null:e.text)}}function Lu(i,o){i&1&&T(0,"div",19)}function bu(i,o){if(i&1&&(b(0),h(1,xu,2,7,"button",16)(2,Lu,1,0,"div",17),y()),i&2){let e=o.$implicit;l(),r("ngIf",e.type==="button"),l(),r("ngIf",e.type==="spacer")}}function yu(i,o){if(i&1&&(d(0,"kendo-card-actions"),h(1,bu,3,2,"ng-container",15),_()),i&2){let e=c(2);l(),r("ngForOf",e.outputActions)}}function ku(i,o){if(i&1&&(d(0,"kendo-card",11)(1,"kendo-card-body"),h(2,Du,1,4,"ng-container",12)(3,Tu,2,1,"ng-container",13),_(),h(4,yu,2,1,"kendo-card-actions",13),_()),i&2){let e=c();l(2),r("ngIf",e.outputTemplate),l(),r("ngIf",!e.outputTemplate),l(),r("ngIf",e.outputActions&&e.outputActions.length>0)}}function Uu(i,o){if(i&1){let e=R();d(0,"button",20,1),E("click",function(n){m(e);let s=c();return g(s.onCommandButtonClick(n))}),_()}if(i&2){let e=c();r("svgIcon",e.commandMenuIcon),N("title",e.messageFor("commandsButtonTitle"))}}function wu(i,o){if(i&1){let e=R();d(0,"button",21),E("result",function(n){m(e);let s=c();return g(s.handleSpeechResult(n))})("start",function(){m(e);let n=c();return g(n.isListening=!0)})("end",function(){m(e);let n=c();return g(n.isListening=!1)}),_()}if(i&2){let e=c();N("title",e.messageFor("speechToTextButtonTitle"))}}var _n=class{prevented=!1;preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}},mn=class extends _n{action;message;constructor(o,e){super(),this.action=o,this.message=e}},Kt=class{message;constructor(o){this.message=o}},Gu=new On("COMMAND_TOKEN"),Co={prompt:Nt,output:Si,command:Kn},Ro={prompt:"sparkles",output:"comment",command:"more-horizontal"},Te=(()=>{class i{viewType;localization;hostClasses=!0;template;constructor(e,t){this.viewType=e,this.localization=t,this.viewType!=="custom"&&(this.icon=Ro[this.viewType],this.svgIcon=Co[this.viewType])}set buttonText(e){this._buttonText=e}get buttonText(){return ce(this._buttonText)?this._buttonText:this.messageFor(`${this.viewType}View`)}set icon(e){ce(e)?this._icon=e:this.icon=Ro[this.viewType]}get icon(){return this._icon}set svgIcon(e){ce(e)?this._svgIcon=e:this.svgIcon=Co[this.viewType]}get svgIcon(){return this._svgIcon}messageFor(e){return this.localization.get(e)}_buttonText;_icon;_svgIcon;static \u0275fac=function(t){return new(t||i)(u(Gu),u(M))};static \u0275dir=D({type:i,viewQuery:function(t,n){if(t&1&&P(nl,7),t&2){let s;O(s=C())&&(n.template=s.first)}},hostVars:2,hostBindings:function(t,n){t&2&&G("k-prompt-view",n.hostClasses)},inputs:{buttonText:"buttonText",icon:"icon",svgIcon:"svgIcon"},standalone:!1})}return i})(),jt={name:"@progress/kendo-angular-conversational-ui",productName:"Kendo UI for Angular",productCode:"KENDOUIANGULAR",productCodes:["KENDOUIANGULAR"],publishDate:1763638954,version:"21.1.0",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/"},Fu={continuous:!1,disabled:!1,fillMode:"flat",integrationMode:"webSpeech",interimResults:!1,lang:"en-US",maxAlternatives:1,rounded:"medium",size:"medium",themeColor:"base"},We=(()=>{class i{aiPrompt;promptValue="";showOutputRating=!1;requestEvent=new ee;executeEvent=new ee;outputCopyEvent=new ee;outputRatingChangeEvent=new ee;promptCommands;promptOutputs;promptSuggestions;textAreaSettings;outputTemplate;outputBodyTemplate;_speechToTextButton;get speechToTextButton(){return this._speechToTextButton}set speechToTextButton(e){e===!0?this._speechToTextButton=Fu:e===!1?this._speechToTextButton=null:this._speechToTextButton=q({},e)}getFlattenPromptCommands(e=this.promptCommands){let t=[];return e.forEach(n=>{if(n.hasOwnProperty("children")){let s=n.children;t=t.concat(s),s.length>0&&this.getFlattenPromptCommands(s)}}),t.concat(this.promptCommands)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),yo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoAIPromptToolbarActionsTemplate",""]]})}return i})(),gn=(()=>{class i{localizationService;focusableElements=[];currentFocusedIndex=0;constructor(e){this.localizationService=e}register(e){this.focusableElements.some(t=>t===e)||this.focusableElements.push(e)}unregister(e){this.currentFocusedIndex=0,this.focusableElements=this.focusableElements.filter(t=>t!==e)}isActive(e){return this.focusableElements[this.currentFocusedIndex]===e}setActiveIndex(e){this.currentFocusedIndex=Math.max(this.focusableElements.indexOf(e),0)}move(e){let t=e==="right"?1:-1;this.localizationService.rtl&&(t=-t),this.currentFocusedIndex+=t,this.currentFocusedIndex<0?this.currentFocusedIndex=this.focusableElements.length-1:this.currentFocusedIndex>=this.focusableElements.length&&(this.currentFocusedIndex=0),this.focusableElements[this.currentFocusedIndex].activate()}focusFirst(){this.focusableElements[this.currentFocusedIndex].activate()}static \u0275fac=function(t){return new(t||i)(te(M))};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),ko=(()=>{class i{host;navigationService;renderer;constructor(e,t,n){this.host=e,this.navigationService=t,this.renderer=n,t.register(this)}get element(){return this.host.nativeElement}ngAfterViewInit(){this.renderer.setAttribute(this.element,"tabindex",this.navigationService.isActive(this)?"0":"-1"),this.element.addEventListener("keydown",this.keyDownHandler,{capture:!0}),this.element.addEventListener("click",this.clickHandler,{capture:!0})}ngOnDestroy(){this.navigationService.unregister(this),this.element.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),this.element.removeEventListener("click",this.clickHandler,{capture:!0})}activate(){this.renderer.setAttribute(this.element,"tabindex","0"),this.element.focus()}keyDownHandler=e=>{let t=he(e),n=e.target===this.element,s=t===S.ArrowLeft,a=t===S.ArrowRight;!n||!(s||a)||(this.renderer.setAttribute(this.element,"tabindex","-1"),this.element.querySelectorAll(us).forEach(A=>{this.renderer.setAttribute(A,"tabindex","-1")}),a?this.navigationService.move("right"):s&&this.navigationService.move("left"))};clickHandler=()=>{this.navigationService.setActiveIndex(this)};static \u0275fac=function(t){return new(t||i)(u(k),u(gn),u(X))};static \u0275dir=D({type:i,selectors:[["","kendoAIPromptToolbarFocusable",""]]})}return i})(),Vt=class wt extends ze{promptView;outputView;generateOutput;promptPlaceholder;copyOutput;retryGeneration;outputTitle;outputRetryTitle;promptSuggestions;speechToTextButton;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Fe(wt)))(n||wt)}})();static \u0275dir=D({type:wt,inputs:{promptView:"promptView",outputView:"outputView",generateOutput:"generateOutput",promptPlaceholder:"promptPlaceholder",copyOutput:"copyOutput",retryGeneration:"retryGeneration",outputTitle:"outputTitle",outputRetryTitle:"outputRetryTitle",promptSuggestions:"promptSuggestions",speechToTextButton:"speechToTextButton"},standalone:!1,features:[w]})},Pu=class Gt extends Vt{service;constructor(e){super(),this.service=e}static \u0275fac=function(t){return new(t||Gt)(u(M))};static \u0275dir=D({type:Gt,selectors:[["","kendoAIPromptLocalizedMessages",""]],features:[K([{provide:Vt,useExisting:z(()=>Gt)}]),w]})},Uo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B))};static \u0275dir=D({type:i,selectors:[["","kendoAIPromptOutputTemplate",""]]})}return i})(),wo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B))};static \u0275dir=D({type:i,selectors:[["","kendoAIPromptOutputBodyTemplate",""]]})}return i})(),Ku=(()=>{class i{localization;service;navigationService;ngZone;element;renderer;hostClasses=!0;get dirAttr(){return this.direction}constructor(e,t,n,s,a,p){this.localization=e,this.service=t,this.navigationService=n,this.ngZone=s,this.element=a,this.renderer=p,Ce(jt),this.direction=e.rtl?"rtl":"ltr",this.subs.add(e.changes.subscribe(({rtl:A})=>{this.direction=A?"rtl":"ltr"}))}fabButton;views;toolbarActionsTemplate;outputTemplate;outputBodyTemplate;set activeView(e){this._activeView!==e&&(this._activeView=e,this.service.promptValue&&(this.service.promptValue=""))}get activeView(){return this._activeView}set promptCommands(e){this.service.promptCommands=e}set promptSuggestions(e){this.service.promptSuggestions=e}set promptOutputs(e){this.service.promptOutputs=e}set showOutputRating(e){this.service.showOutputRating=e}streaming=!1;set speechToTextButton(e){e?this.service.speechToTextButton=e:this.service.speechToTextButton=!1}set textAreaSettings(e){this.service.textAreaSettings=e}generateButtonSVGIcon=Nt;generateButtonIcon="sparkles";disabledGenerateButton=!1;activeViewChange=new f;promptRequest=new f;commandExecute=new f;outputCopy=new f;outputRatingChange=new f;promptRequestCancel=new f;ngOnInit(){let e=this.element.nativeElement;this.subs.add(this.renderer.listen(e,"keydown",t=>{t.key==="Escape"&&this.promptRequestCancel.emit()}))}ngOnChanges(e){e.streaming&&e.streaming.currentValue===!0&&this.ngZone.onStable.pipe(it(1)).subscribe(()=>{this.fabButton?.focus()})}ngAfterContentChecked(){this.outputTemplate!==this.service.outputTemplate&&(this.service.outputTemplate=this.outputTemplate),this.outputBodyTemplate!==this.service.outputBodyTemplate&&(this.service.outputBodyTemplate=this.outputBodyTemplate)}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.service.aiPrompt=this,this.subs.add(this.service.requestEvent.subscribe(e=>this.promptRequest.emit(e))),this.subs.add(this.service.executeEvent.subscribe(e=>this.commandExecute.emit(e))),this.subs.add(this.service.outputCopyEvent.subscribe(e=>this.outputCopy.emit(e))),this.subs.add(this.service.outputRatingChangeEvent.subscribe(e=>this.outputRatingChange.emit(e)))})}ngOnDestroy(){this.subs.unsubscribe()}focus(){this.navigationService.focusFirst()}subs=new Ae;get selectedView(){return this.viewsArray[this.activeView]}sparklesIcon=Nt;outputIcon=Si;fabStopGenerationSVGIcon=vi;get viewsArray(){return this.views?.toArray()}fabPositionMode="absolute";fabAlignment={vertical:"bottom",horizontal:"end"};direction;_activeView=0;viewChange(e){e!==this.activeView&&(this.activeView=e,this.activeViewChange.emit(e))}messageFor(e){return this.localization.get(e)}get viewTemplate(){return this.selectedView?.viewType==="custom"?this.selectedView?.viewTemplate:this.selectedView?.template}handleGenerateOutput(){let t={prompt:this.service.promptValue,sender:this,isRetry:!1};this.promptRequest.emit(t)}static \u0275fac=function(t){return new(t||i)(u(M),u(We),u(gn),u(j),u(k),u(X))};static \u0275cmp=L({type:i,selectors:[["kendo-aiprompt"]],contentQueries:function(t,n,s){if(t&1&&(F(s,yo,5),F(s,Uo,5),F(s,wo,5),F(s,Te,4)),t&2){let a;O(a=C())&&(n.toolbarActionsTemplate=a.first),O(a=C())&&(n.outputTemplate=a.first),O(a=C())&&(n.outputBodyTemplate=a.first),O(a=C())&&(n.views=a)}},viewQuery:function(t,n){if(t&1&&P(sl,5),t&2){let s;O(s=C())&&(n.fabButton=s.first)}},hostVars:3,hostBindings:function(t,n){t&2&&(N("dir",n.dirAttr),G("k-prompt",n.hostClasses))},inputs:{activeView:"activeView",promptCommands:"promptCommands",promptSuggestions:"promptSuggestions",promptOutputs:"promptOutputs",showOutputRating:"showOutputRating",streaming:"streaming",speechToTextButton:"speechToTextButton",textAreaSettings:"textAreaSettings",generateButtonSVGIcon:"generateButtonSVGIcon",generateButtonIcon:"generateButtonIcon",disabledGenerateButton:"disabledGenerateButton"},outputs:{activeViewChange:"activeViewChange",promptRequest:"promptRequest",commandExecute:"commandExecute",outputCopy:"outputCopy",outputRatingChange:"outputRatingChange",promptRequestCancel:"promptRequestCancel"},exportAs:["kendoAIPrompt"],features:[K([M,We,gn,{provide:fe,useValue:"kendo.aiprompt"}]),Me],decls:10,vars:5,consts:()=>{let e;e=$localize`:kendo.aiprompt.promptView|The Toolbar button text for the Prompt view.:Ask AI`;let t;t=$localize`:kendo.aiprompt.outputView|The Toolbar button text for the Output view.:Output`;let n;n=$localize`:kendo.aiprompt.generateOutput|The text for the Generate button in the Prompt view.:Generate`;let s;s=$localize`:kendo.aiprompt.promptPlaceholder|The placeholder text for the Prompt View text area.:Ask or generate content with AI`;let a;a=$localize`:kendo.aiprompt.copyOutput|The Copy button text in each Output view card.:Copy`;let p;p=$localize`:kendo.aiprompt.retryGeneration|The Retry button text in each Output view card.:Retry`;let A;A=$localize`:kendo.aiprompt.outputTitle|The title of each Output view card.:Generated with AI`;let x;x=$localize`:kendo.aiprompt.outputRetryTitle|The title of each Output view retry card.:Generated with AI`;let U;U=$localize`:kendo.aiprompt.promptSuggestions|The title of the Prompt suggestions button.:Prompt suggestions`;let W;return W=$localize`:kendo.aiprompt.speechToTextButton|The aria-label for the Speech to Text button.:Voice input`,[["fabButton",""],["kendoAIPromptLocalizedMessages","","promptView",e,"outputView",t,"generateOutput",n,"promptPlaceholder",s,"copyOutput",a,"retryGeneration",p,"outputTitle",A,"outputRetryTitle",x,"promptSuggestions",U,"speechToTextButton",W],[1,"k-prompt-header"],["role","toolbar",1,"k-toolbar-flat","k-toolbar","k-toolbar-md"],["kendoButton","","kendoAIPromptToolbarFocusable","","type","button","fillMode","flat","rounded","full","themeColor","primary",3,"svgIcon","icon","selected","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"k-prompt-content"],["class","k-prompt-stop-fab","buttonClass","k-generating k-active","icon","stop",3,"positionMode","align","svgIcon","click",4,"ngIf"],[1,"k-prompt-view"],[4,"ngTemplateOutlet"],["class","k-prompt-footer",4,"ngIf"],["kendoButton","","kendoAIPromptToolbarFocusable","","type","button","fillMode","flat","rounded","full","themeColor","primary",3,"click","svgIcon","icon","selected"],[3,"ngTemplateOutlet"],["buttonClass","k-generating k-active","icon","stop",1,"k-prompt-stop-fab",3,"click","positionMode","align","svgIcon"],[1,"k-prompt-footer"],[1,"k-actions","k-actions-start","k-actions-horizontal","k-prompt-actions"],["kendoButton","","type","button","themeColor","primary","rounded","full",3,"click","svgIcon","icon","disabled"]]},template:function(t,n){t&1&&(Q(0,1),d(1,"div",2)(2,"div",3),h(3,ol,2,4,"button",4)(4,rl,1,1,null,5),_()(),d(5,"div",6),h(6,ll,2,3,"kendo-floatingactionbutton",7),d(7,"div",8),h(8,cl,1,0,"ng-container",9),_()(),h(9,ul,4,7,"div",10)),t&2&&(l(3),r("ngForOf",n.viewsArray),l(),r("ngIf",n.toolbarActionsTemplate),l(2),r("ngIf",n.streaming&&(n.selectedView==null?null:n.selectedView.viewType)==="output"),l(2),r("ngTemplateOutlet",n.viewTemplate),l(),r("ngIf",(n.selectedView==null?null:n.selectedView.viewType)==="prompt"))},dependencies:[Pu,oe,ae,ko,H,ne,_s],encapsulation:2})}return i})(),Vu=(()=>{class i extends Te{service;constructor(e,t){super("command",e),this.service=t}panelBarItems=[];ngOnInit(){this.service.promptCommands&&(this.panelBarItems=this.getPanelBarItems(this.service.promptCommands))}itemClickHandler(e){if(e.item.children)return;let t=this.service.getFlattenPromptCommands().find(n=>n.id==e.item.id);if(t){let n={command:t,sender:this.service.aiPrompt,isRetry:!1};this.service.executeEvent.next(n)}}getPanelBarItems(e){return e.map(t=>({title:t.text,id:t.id,icon:t.icon,svgIcon:t.svgIcon,children:t.children?this.getPanelBarItems(t.children):null}))}static \u0275fac=function(t){return new(t||i)(u(M),u(We))};static \u0275cmp=L({type:i,selectors:[["kendo-aiprompt-command-view"]],features:[K([{provide:Te,useExisting:z(()=>i)}]),w],decls:2,vars:0,consts:[["content",""],[3,"itemClick","items","animate","selectable"]],template:function(t,n){t&1&&h(0,pl,1,3,"ng-template",null,0,pe)},dependencies:[As],encapsulation:2})}return i})(),Bu=(()=>{class i extends Vt{service;constructor(e){super(),this.service=e}get override(){return!0}static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275cmp=L({type:i,selectors:[["kendo-aiprompt-messages"]],features:[K([{provide:Vt,useExisting:z(()=>i)}]),w],decls:0,vars:0,template:function(t,n){},encapsulation:2})}return i})(),zu=(()=>{class i extends Te{constructor(e){super("custom",e)}viewTemplate;static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275cmp=L({type:i,selectors:[["kendo-aiprompt-custom-view"]],inputs:{viewTemplate:"viewTemplate"},features:[K([{provide:Te,useExisting:z(()=>i)}]),w],decls:0,vars:0,template:function(t,n){},encapsulation:2})}return i})(),Hu=(()=>{class i{localization;service;hostClass=!0;listItemRole="listitem";tabIndex=0;get ariaDescribedBy(){return this.titleId}ariaKeyShortcuts="Enter";promptOutput;constructor(e,t){this.localization=e,this.service=t}ngOnInit(){this.promptOutput?.rating==="positive"?(this.positiveRatingIcon=mi,this.negativeRatingIcon=St):this.promptOutput?.rating==="negative"&&(this.negativeRatingIcon=_i,this.positiveRatingIcon=Et)}copyIcon=Be;retryIcon=gi;positiveRatingIcon=Et;negativeRatingIcon=St;titleId=`k-output-card-${ve()}`;messageFor(e){return this.localization.get(e)}get showRating(){return this.service.showOutputRating}get outputTitle(){if(ce(this.promptOutput.title))return this.promptOutput.title;{let e=this.promptOutput.isRetry?"outputRetryTitle":"outputTitle";return this.messageFor(e)}}handleRetry(){if(this.promptOutput.commandId){let e={command:this.service.getFlattenPromptCommands().find(t=>t.id===this.promptOutput.commandId),sender:this.service.aiPrompt,isRetry:!0};this.service.executeEvent.next(e)}else{let e={prompt:this.promptOutput.prompt,sender:this.service.aiPrompt,isRetry:!0};this.service.requestEvent.next(e)}}handleCopy(){navigator.clipboard.writeText(this.promptOutput.output),this.service.outputCopyEvent.next(this.promptOutput)}handleRating(e){let t={promptOutput:this.promptOutput,rating:e};this.service.outputRatingChangeEvent.next(t),e==="positive"?(this.positiveRatingIcon=mi,this.negativeRatingIcon=St):(this.negativeRatingIcon=_i,this.positiveRatingIcon=Et)}get customBodyTemplate(){return this.service.outputBodyTemplate?.templateRef}static \u0275fac=function(t){return new(t||i)(u(M),u(We))};static \u0275cmp=L({type:i,selectors:[["","kendoAIPromptOutputCard",""]],hostVars:6,hostBindings:function(t,n){t&2&&(N("role",n.listItemRole)("tabindex",n.tabIndex)("aria-describedby",n.ariaDescribedBy)("aria-keyshortcuts",n.ariaKeyShortcuts),G("k-card",n.hostClass))},inputs:{promptOutput:"promptOutput"},attrs:dl,decls:15,vars:10,consts:[["defaultTemplate",""],[1,"k-card-header"],[1,"k-card-title"],[1,"k-card-subtitle"],[1,"k-card-body"],[4,"ngIf","ngIfElse"],[1,"k-actions","k-actions-start","k-actions-horizontal","k-card-actions"],["kendoButton","","fillMode","flat","themeColor","primary","rounded","full","icon","copy",3,"click","svgIcon"],["kendoButton","","fillMode","flat","rounded","full","icon","arrow-rotate-cw",3,"click","svgIcon"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"k-spacer"],["kendoButton","","fillMode","flat","icon","thumb-up-outline",3,"click","svgIcon"],["kendoButton","","fillMode","flat","icon","thumb-down-outline",3,"click","svgIcon"]],template:function(t,n){if(t&1){let s=R();d(0,"div",1)(1,"div",2),I(2),_(),d(3,"div",3),I(4),_()(),d(5,"div",4),h(6,ml,2,4,"ng-container",5)(7,gl,2,1,"ng-template",null,0,pe),_(),d(9,"div",6)(10,"button",7),E("click",function(){return m(s),g(n.handleCopy())}),I(11),_(),d(12,"button",8),E("click",function(){return m(s),g(n.handleRetry())}),I(13),_(),h(14,hl,4,2,"ng-container",9),_()}if(t&2){let s=Z(8);l(),N("id",n.titleId),l(),$("",n.outputTitle," "),l(2),V(n.promptOutput.prompt),l(2),r("ngIf",n.customBodyTemplate)("ngIfElse",s),l(4),r("svgIcon",n.copyIcon),l(),V(n.messageFor("copyOutput")),l(),r("svgIcon",n.retryIcon),l(),V(n.messageFor("retryGeneration")),l(),r("ngIf",n.showRating)}},dependencies:[ae,H,ne],encapsulation:2})}return i})(),ju=(()=>{class i extends Te{service;constructor(e,t){super("output",e),this.service=t}get promptOutputs(){return this.service.promptOutputs}get customTemplate(){return this.service.outputTemplate?.templateRef}static \u0275fac=function(t){return new(t||i)(u(M),u(We))};static \u0275cmp=L({type:i,selectors:[["kendo-aiprompt-output-view"]],features:[K([{provide:Te,useExisting:z(()=>i)}]),w],decls:2,vars:0,consts:[["content",""],["defaultTemplate",""],["role","list",1,"k-card-list"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["kendoAIPromptOutputCard","",3,"promptOutput"]],template:function(t,n){t&1&&h(0,El,2,1,"ng-template",null,0,pe)},dependencies:[oe,Hu,H,ne],encapsulation:2})}return i})(),$u=(()=>{class i extends Te{service;constructor(e,t){super("prompt",e),this.service=t}get suggestionsIcons(){return this.showSuggestions?{font:"chevron-up",svg:ci}:{font:"chevron-down",svg:pi}}showSuggestions=!0;contentId=`k-prompt-suggestions-${ve()}`;get promptSuggestions(){return this.service.promptSuggestions}set textAreaValue(e){this.service.promptValue=e}get textAreaValue(){return this.service.promptValue}suggestionClick(e){this.textAreaValue=this.service.promptValue=e}suggestionKeydown(e,t){(e.key==="Enter"||e.key===" ")&&this.suggestionClick(t)}get speechToTextButtonSettings(){return this.service.speechToTextButton}get textareaSettings(){return this.service.textAreaSettings}onSpeechToTextResult(e){e.alternatives&&e.alternatives.length>0&&(this.textAreaValue+=e.alternatives[0].transcript+" ")}onSpeechToTextError(e){Ee()&&console.error("Speech to Text error:",e.errorMessage)}static \u0275fac=function(t){return new(t||i)(u(M),u(We))};static \u0275cmp=L({type:i,selectors:[["kendo-aiprompt-prompt-view"]],features:[K([{provide:Te,useExisting:z(()=>i)}]),w],decls:2,vars:0,consts:[["content",""],[3,"valueChange","cols","disabled","fillMode","flow","inputAttributes","maxlength","placeholder","readonly","resizable","rounded","rows","selectOnFocus","showSuffixSeparator","size","tabIndex","title","value"],[4,"ngIf"],["class","k-prompt-expander",4,"ngIf"],["kendoSpeechToTextButton","","role","button",3,"error","result","continuous","disabled","fillMode","integrationMode","interimResults","lang","maxAlternatives","rounded","size","themeColor"],[1,"k-prompt-expander"],["kendoButton","","fillMode","flat","type","button",3,"click","icon","svgIcon"],["class","k-prompt-expander-content",4,"ngIf"],[1,"k-prompt-expander-content"],["role","group",1,"k-suggestion-group"],["class","k-suggestion","role","button",3,"click","keydown",4,"ngFor","ngForOf"],["role","button",1,"k-suggestion",3,"click","keydown"]],template:function(t,n){t&1&&h(0,Il,3,19,"ng-template",null,0,pe)},dependencies:[He,H,ae,oe,rt,at],encapsulation:2})}return i})(),Go=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatAttachmentTemplate",""]]})}return i})(),Wu=()=>{},Qu={reply:(i,o)=>{o.sendMessage.emit(new Kt({id:ve(),author:{id:o.authorId},text:i.value,timestamp:new Date}))},call:i=>{window.open("tel:"+i.value)},openUrl:i=>{window.open(i.value)}},qu=i=>Qu[i.type]||Wu,Fo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B))};static \u0275dir=D({type:i,selectors:[["","kendoChatMessageBoxTemplate",""]]})}return i})(),gt={idField:"id",textField:"text",authorIdField:"authorId",authorNameField:"authorName",authorImageUrlField:"authorImageUrl",authorImageAltTextField:"authorImageAltText",timestampField:"timestamp",statusField:"status",filesField:"files",attachmentsField:"attachments",attachmentLayoutField:"attachmentLayout",suggestedActionsField:"suggestedActions",isPinnedField:"isPinned",replyToIdField:"replyToId",isDeletedField:"isDeleted",typingField:"typing"},un=(i,o)=>{for(;i&&!o(i);)i=i.parentNode;return i},Xu=/(https?:\/\/[^\s]+)/g,Po=".k-chat-download-button",Ko=".k-menu-button",Vo=".k-menu-link",Io={continuous:!1,disabled:!1,fillMode:"clear",integrationMode:"webSpeech",interimResults:!1,lang:"en-US",maxAlternatives:1,rounded:"medium",size:"medium",themeColor:"base"},hn={fillMode:"solid",rounded:"full",size:"medium",themeColor:"primary",icon:"paper-plane",svgIcon:vt,buttonClass:"k-chat-send"},Mo={multiple:!0,disabled:!1},Do="scroll",pn=[{id:"copy",label:"Copy",icon:"copy",svgIcon:Be,disabled:!1},{id:"reply",label:"Reply",icon:"undo",svgIcon:Vn,disabled:!1}],dn=[{id:"download",label:"Download",icon:"download",svgIcon:hi,disabled:!1}],Ju=(i,o)=>{let e=q(q({},gt),o);return i.map(t=>Zu(t,e))},Zu=(i,o)=>{let e=q(q({},gt),o),t,n=se(e.authorIdField||"authorId")(i),s=se(e.authorNameField||"authorName")(i),a=se(e.authorImageUrlField||"authorImageUrl")(i),p=se(e.authorImageAltTextField||"authorImageAltText")(i);n!==void 0&&(t=q(q(q({id:n},s&&{name:s}),a&&{avatarUrl:a}),p&&{avatarAltText:p}));let A=se(e.timestampField)(i),x=A instanceof Date?A:new Date(A);return{id:se(e.idField)(i),text:se(e.textField)(i),author:t,timestamp:x,status:se(e.statusField)(i),files:se(e.filesField)(i),attachments:se(e.attachmentsField)(i),attachmentLayout:se(e.attachmentLayoutField)(i),suggestedActions:se(e.suggestedActionsField)(i),isPinned:se(e.isPinnedField)(i),replyToId:se(e.replyToIdField)(i),isDeleted:se(e.isDeletedField)(i),typing:se(e.typingField)(i),dataItem:i}},Bo=i=>i.map(o=>({text:o.label,icon:o.icon,svgIcon:o.svgIcon,disabled:o.disabled,originalAction:o})),Ge=(()=>{class i{authorId;messageWidthMode;messageToolbarActions=[];messageContextMenuActions=[];calculatedContextMenuActions=[];fileActions=[];toggleMessageState=!1;reply;messages=[];chatElement;messageElementsMap=new Map;messagesContextMenu;activeMessage;activeMessageElement;selectOnMenuClose=!1;active=!1;messageFilesLayout="vertical";timestampVisibility="focus";showUsername=!0;showAvatar=!0;_enableSpeechToText=Io;_enableFileSelect=Mo;_sendButtonSettings=hn;_suggestionsLayout=Do;_quickActionsLayout=Do;_authorMessageSettings;_receiverMessageSettings;_allowMessageCollapse;subjects={toolbarAction:new ee,contextMenuAction:new ee,fileAction:new ee,fileDownload:new ee,replyReferenceClick:new ee,inputValueChange:new ee,contextMenuVisibilityChange:new ee,suggestionsLayoutChange:new ee,quickActionsLayoutChange:new ee,authorMessageSettingsChange:new ee,receiverMessageSettingsChange:new ee,allowMessageCollapseChange:new ee};toolbarAction$=this.subjects.toolbarAction.asObservable();contextMenuAction$=this.subjects.contextMenuAction.asObservable();fileAction$=this.subjects.fileAction.asObservable();fileDownload$=this.subjects.fileDownload.asObservable();replyReferenceClick$=this.subjects.replyReferenceClick.asObservable();inputValueChange$=this.subjects.inputValueChange.asObservable();contextMenuVisibilityChange$=this.subjects.contextMenuVisibilityChange.asObservable();suggestionsLayoutChange$=this.subjects.suggestionsLayoutChange.asObservable();quickActionsLayoutChange$=this.subjects.quickActionsLayoutChange.asObservable();authorMessageSettingsChange$=this.subjects.authorMessageSettingsChange.asObservable();receiverMessageSettingsChange$=this.subjects.receiverMessageSettingsChange.asObservable();allowMessageCollapseChange$=this.subjects.allowMessageCollapseChange.asObservable();set authorMessageSettings(e){let t=this._authorMessageSettings;JSON.stringify(t)!==JSON.stringify(e)&&(this.updateComponentSettings("_authorMessageSettings",e,null),this.emit("authorMessageSettingsChange",this._authorMessageSettings))}get authorMessageSettings(){return this._authorMessageSettings}set receiverMessageSettings(e){let t=this._receiverMessageSettings;JSON.stringify(t)!==JSON.stringify(e)&&(this.updateComponentSettings("_receiverMessageSettings",e,null),this.emit("receiverMessageSettingsChange",this._receiverMessageSettings))}get receiverMessageSettings(){return this._receiverMessageSettings}set enableSpeechToText(e){this.updateComponentSettings("_enableSpeechToText",e,Io)}get enableSpeechToText(){return this._enableSpeechToText}set enableFileSelect(e){this.updateComponentSettings("_enableFileSelect",e,Mo)}get enableFileSelect(){return this._enableFileSelect}set sendButtonSettings(e){this.updateComponentSettings("_sendButtonSettings",e,hn)}get sendButtonSettings(){return this._sendButtonSettings}set suggestionsLayout(e){this._suggestionsLayout=e,this.emit("suggestionsLayoutChange",this._suggestionsLayout)}get suggestionsLayout(){return this._suggestionsLayout}set quickActionsLayout(e){this._quickActionsLayout=e,this.emit("quickActionsLayoutChange",this._quickActionsLayout)}get quickActionsLayout(){return this._quickActionsLayout}set allowMessageCollapse(e){this._allowMessageCollapse!==e&&(this._allowMessageCollapse=e,this.emit("allowMessageCollapseChange",this._allowMessageCollapse))}get allowMessageCollapse(){return this._allowMessageCollapse}calculateContextMenuActions(e){let t=e?this.authorMessageSettings:this.receiverMessageSettings;if(t?.messageContextMenuActions){this.calculatedContextMenuActions=t.messageContextMenuActions;return}this.calculatedContextMenuActions=this.messageContextMenuActions||[]}emit(e,t){this.subjects[e].next(t)}getMessageById(e){return this.messages.find(t=>t.id===e)}registerMessageElement(e,t){this.messageElementsMap.set(e,t)}unregisterMessageElement(e){this.messageElementsMap.delete(e),this.reply?.id===e&&(this.reply=null)}scrollToMessage(e){let t=this.messageElementsMap.get(e);t?.nativeElement&&t.nativeElement.scrollIntoView({behavior:"smooth",block:"nearest"})}focusActiveMessageElement(){this.activeMessageElement&&this.activeMessageElement.element?.nativeElement?.focus()}updateComponentSettings(e,t,n){t===!0?this[e]=n:t===!1?this[e]=null:this[e]=q(q({},n),t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),_e=class{selected},zo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B))};static \u0275dir=D({type:i,selectors:[["","kendoChatSuggestionTemplate",""]]})}return i})(),Ut={left:"chevron-left",right:"chevron-right"},Yu=(()=>{class i{host;renderer;ngZone;localization;role="button";prev=!1;onClick=new f;get scrollButtonIconClass(){let e=this.localization.rtl?Ut.right:Ut.left,t=this.localization.rtl?Ut.left:Ut.right;return this.prev?e:t}get scrollButtonSVGIcon(){let e=this.localization.rtl?this.chevronRightIcon:this.chevronLeftIcon,t=this.localization.rtl?this.chevronLeftIcon:this.chevronRightIcon;return this.prev?e:t}chevronLeftIcon=di;chevronRightIcon=ui;subs=new Ae;constructor(e,t,n,s){this.host=e,this.renderer=t,this.ngZone=n,this.localization=s}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.subs.add(this.renderer.listen(this.host.nativeElement,"click",()=>this.clickHandler()))})}ngOnDestroy(){this.subs.unsubscribe()}clickHandler(){let e=this.prev?"prev":"next";this.onClick.emit(e)}static \u0275fac=function(t){return new(t||i)(u(k),u(X),u(j),u(M))};static \u0275cmp=L({type:i,selectors:[["","kendoChatScrollableButton",""]],hostVars:1,hostBindings:function(t,n){t&2&&N("role",n.role)},inputs:{prev:"prev"},outputs:{onClick:"onClick"},attrs:Ml,decls:1,vars:2,consts:[["innerCssClass","k-button-icon",3,"name","svgIcon"]],template:function(t,n){t&1&&T(0,"kendo-icon-wrapper",0),t&2&&r("name",n.scrollButtonIconClass)("svgIcon",n.scrollButtonSVGIcon)},dependencies:[de],encapsulation:2})}return i})(),ep="smooth",tp=100,fn=(()=>{class i{ngZone;localization;owner;position=0;scrollButtonActiveStateChange=new ee;get scrollElement(){return this.owner.suggestionsContainer?.nativeElement}get scrollContainerOverflowSize(){if(!ge()||!this.scrollElement)return 0;let e=Math.floor(this.scrollElement.scrollWidth-this.scrollElement.offsetWidth);return e<0?0:e}get suggestionsOverflow(){return this.scrollContainerOverflowSize>0}constructor(e,t){this.ngZone=e,this.localization=t}toggleScrollButtonsState(){if(!this.owner?.hasScrollButtons)return;let t=!this.isDisabled("prev"),n=!this.isDisabled("next"),s=1,a=this.localization.rtl?-1:1,p=this.position*a>0&&this.scrollContainerOverflowSize>0,A=this.position*a<this.scrollContainerOverflowSize-s&&this.scrollContainerOverflowSize>0;p!==t&&this.ngZone.run(()=>this.toggleButtonActiveState("prev",p)),A!==n&&this.ngZone.run(()=>this.toggleButtonActiveState("next",A))}onScroll(e){this.position=e.target.scrollLeft,this.toggleScrollButtonsState()}scrollSuggestions(e){this.calculateListPosition(e,tp),this.scrollElement&&this.scrollElement.scrollTo({left:this.position,behavior:ep}),this.toggleScrollButtonsState()}updateScrollPosition(e){this.position=e.scrollLeft}calculateListPosition(e,t){if(e==="prev")this.localization.rtl?this.position=this.position+t>=0?0:this.position+t:this.position=this.position-t<=0?0:this.position-t;else if(e==="next"&&this.position<this.scrollContainerOverflowSize){if(this.position+t>this.scrollContainerOverflowSize){this.localization.rtl?this.position=-this.scrollContainerOverflowSize:this.position=this.scrollContainerOverflowSize;return}this.localization.rtl?this.position-=t:this.position+=t}}toggleButtonActiveState(e,t){this.scrollButtonActiveStateChange.next({buttonType:e,active:t})}isDisabled=e=>this.owner[`${e}ScrollButton`]?.nativeElement.classList.contains("k-disabled");static \u0275fac=function(t){return new(t||i)(te(j),te(M))};static \u0275prov=ie({token:i,factory:i.\u0275fac})}return i})(),ht=(()=>{class i extends _e{chatService;localization;scrollService;ngZone;renderer;get defaultClass(){if(this.type==="suggestion")return this.chatService.suggestionsLayout==="wrap"||this.chatService.suggestionsLayout==="scroll";if(this.type==="action")return this.chatService.quickActionsLayout==="wrap"||this.chatService.quickActionsLayout==="scroll"}get scrollableClass(){if(this.type==="suggestion")return this.chatService.suggestionsLayout==="scroll";if(this.type==="action")return this.chatService.quickActionsLayout==="scroll"}get scrollButtonsClass(){if(this.type==="suggestion")return this.chatService.suggestionsLayout==="scrollbuttons";if(this.type==="action")return this.chatService.quickActionsLayout==="scrollbuttons"}get role(){return this.hasScrollButtons?null:"group"}actions;suggestions;tabbable;type;suggestionTemplate;dispatchAction=new f;dispatchSuggestion=new f;items;suggestionsContainer;prevScrollButton;nextScrollButton;selectedIndex=0;activeIndex=-1;active=!1;get hasScrollButtons(){return this.type==="suggestion"?this.chatService.suggestionsLayout==="scrollbuttons":this.chatService.quickActionsLayout==="scrollbuttons"}subscriptions=new Ae;resizeObserver=null;actionKeyHandlers={[S.Tab]:e=>this.changeSelectedIndex(e),[S.Enter]:(e,t)=>this.actionClick(t),[S.Space]:(e,t)=>this.actionClick(t)};suggestionKeyHandlers={[S.Tab]:e=>this.changeSelectedIndex(e),[S.Enter]:(e,t)=>this.suggestionClick(t),[S.Space]:(e,t)=>this.suggestionClick(t)};constructor(e,t,n,s,a){super(),this.chatService=e,this.localization=t,this.scrollService=n,this.ngZone=s,this.renderer=a,this.scrollService.owner=this}ngAfterViewInit(){let e=this.type==="suggestion"?this.chatService.suggestionsLayoutChange$:this.chatService.quickActionsLayoutChange$;this.subscriptions.add(e.subscribe(t=>{t==="scrollbuttons"&&this.ngZone.onStable.pipe(it(1)).subscribe(()=>{this.suggestionsContainer&&this.scrollService.updateScrollPosition(this.suggestionsContainer.nativeElement),this.scrollService.toggleScrollButtonsState()})})),this.subscriptions.add(this.scrollService.scrollButtonActiveStateChange.subscribe(t=>{this.toggleScrollButtonState(t.buttonType,t.active)})),this.hasScrollButtons&&this.suggestionsContainer&&this.ngZone.runOutsideAngular(()=>{this.resizeObserver=new ResizeObserver(()=>{this.ngZone.run(()=>{this.scrollService.toggleScrollButtonsState()})}),this.resizeObserver.observe(this.suggestionsContainer.nativeElement)}),this.hasScrollButtons&&(this.ngZone.onStable.pipe(it(1)).subscribe(()=>{this.scrollService.toggleScrollButtonsState()}),this.suggestionsContainer&&this.scrollService.updateScrollPosition(this.suggestionsContainer.nativeElement))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}isSelected(e){return this.selected&&this.selectedIndex===e}isActive(e){return this.activeIndex===e}actionClick(e,t){t>=0&&(this.selectedIndex=t),this.dispatchAction.next(e)}suggestionClick(e,t){t>=0&&(this.selectedIndex=t),this.dispatchSuggestion.next(e)}toggleActiveState(e,t){this.activeIndex=e?t:-1}actionKeydown(e,t){let n=this.actionKeyHandlers[he(e)];n&&n(e,t)}suggestionKeydown(e,t){let n=this.suggestionKeyHandlers[he(e)];n&&n(e,t)}getScrollButtonTitle(e){let t;return this.localization.rtl?t=e==="prev"?"nextSuggestionsButtonTitle":"previousSuggestionsButtonTitle":t=e==="prev"?"previousSuggestionsButtonTitle":"nextSuggestionsButtonTitle",this.localization.get(t)}onScroll(e){this.scrollService.onScroll(e)}scrollSuggestions(e){this.scrollService.scrollSuggestions(e)}focus(){}toggleScrollButtonState(e,t){let n=this[`${e}ScrollButton`];n?.nativeElement&&(t?this.renderer.removeClass(n.nativeElement,"k-disabled"):this.renderer.addClass(n.nativeElement,"k-disabled"))}changeSelectedIndex(e){let t=e.shiftKey?-1:1,n=this.selectedIndex;this.selectedIndex=Math.max(0,Math.min(n+t,this.items.length-1))}static \u0275fac=function(t){return new(t||i)(u(Ge),u(M),u(fn),u(j),u(X))};static \u0275cmp=L({type:i,selectors:[["kendo-chat-suggested-actions"]],viewQuery:function(t,n){if(t&1&&(P(Dl,5,k),P(Tl,5,k),P(xl,5,k),P(Lo,5)),t&2){let s;O(s=C())&&(n.suggestionsContainer=s.first),O(s=C())&&(n.prevScrollButton=s.first),O(s=C())&&(n.nextScrollButton=s.first),O(s=C())&&(n.items=s)}},hostVars:7,hostBindings:function(t,n){t&2&&(N("role",n.role),G("k-suggestion-group",n.defaultClass)("k-suggestion-group-scrollable",n.scrollableClass)("k-suggestion-scrollwrap",n.scrollButtonsClass))},inputs:{actions:"actions",suggestions:"suggestions",tabbable:"tabbable",type:"type",suggestionTemplate:"suggestionTemplate"},outputs:{dispatchAction:"dispatchAction",dispatchSuggestion:"dispatchSuggestion"},features:[K([{provide:_e,useExisting:z(()=>i)},fn]),w],decls:7,vars:4,consts:[["noScrollButtons",""],["suggestionsContent",""],["prevScrollButton",""],["suggestionsContainer",""],["item",""],["nextScrollButton",""],["kendoChatScrollableButton","","class","k-button k-button-md k-button-solid k-button-solid-base k-rounded-md k-icon-button",3,"prev","title","onClick",4,"ngIf"],["class","k-suggestion-group","role","group",3,"scroll",4,"ngIf","ngIfElse"],["kendoChatScrollableButton","",1,"k-button","k-button-md","k-button-solid","k-button-solid-base","k-rounded-md","k-icon-button",3,"onClick","prev","title"],["role","group",1,"k-suggestion-group",3,"scroll"],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","k-suggestion k-suggestion-primary","role","button",3,"k-selected","k-focus","k-active","click","keydown","mousedown","mouseup",4,"ngFor","ngForOf"],["role","button",1,"k-suggestion","k-suggestion-primary",3,"click","keydown","mousedown","mouseup"],["class","k-suggestion","role","button",3,"k-selected","k-focus","k-active","click","keydown","mousedown","mouseup",4,"ngFor","ngForOf"],["role","button",1,"k-suggestion",3,"click","keydown","mousedown","mouseup"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){if(t&1&&h(0,Ll,2,2,"span",6)(1,yl,3,1,"div",7)(2,Ul,1,1,"ng-template",null,0,pe)(4,Hl,2,2,"ng-template",null,1,pe)(6,jl,2,2,"span",6),t&2){let s=Z(3);r("ngIf",n.hasScrollButtons),l(),r("ngIf",n.hasScrollButtons)("ngIfElse",s),l(5),r("ngIf",n.hasScrollButtons)}},dependencies:[oe,H,ne,Yu],encapsulation:2})}return i})(),vn=(()=>{class i extends _e{localization;chatFile;removable=!1;fileActions;remove=new f;actionClick=new f;actionsToggle=new f;actionButtonClick=new f;deleteIcon=Ve;moreIcon=Pn;constructor(e){super(),this.localization=e}fileThumbnail(e){return zi(e)}fileGroupClass(e){return Hi(e)}getTotalFilesSizeMessage(e){return Gi([e])}textFor(e){return this.localization.get(e)}focus(){}static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275cmp=L({type:i,selectors:[["li","chatFile",""]],inputs:{chatFile:"chatFile",removable:"removable",fileActions:"fileActions"},outputs:{remove:"remove",actionClick:"actionClick",actionsToggle:"actionsToggle",actionButtonClick:"actionButtonClick"},features:[K([{provide:_e,useExisting:z(()=>i)}]),w],attrs:$l,decls:8,vars:6,consts:[["size","xlarge",3,"name","svgIcon"],[1,"k-chat-file-info"],[1,"k-chat-file-name"],[1,"k-chat-file-size"],["kendoButton","","fillMode","flat",3,"svgIcon","click",4,"ngIf"],["fillMode","flat","icon","more-vertical",3,"data","svgIcon","itemClick","click","open","close",4,"ngIf"],["kendoButton","","fillMode","flat",3,"click","svgIcon"],["fillMode","flat","icon","more-vertical",3,"itemClick","click","open","close","data","svgIcon"]],template:function(t,n){t&1&&(T(0,"kendo-icon-wrapper",0),d(1,"div",1)(2,"span",2),I(3),_(),d(4,"span",3),I(5),_()(),h(6,Wl,1,2,"button",4)(7,Ql,1,3,"kendo-dropdownbutton",5)),t&2&&(r("name",n.fileGroupClass(n.chatFile.extension))("svgIcon",n.fileThumbnail(n.chatFile.extension)),l(3),V(n.chatFile.name),l(2),V(n.getTotalFilesSizeMessage(n.chatFile)),l(),r("ngIf",n.removable),l(),r("ngIf",n.fileActions&&n.fileActions.length>0))},dependencies:[H,de,ae,ds],encapsulation:2})}return i})(),$t=(i,o)=>o.author&&i===o.author.id,An=i=>i[i.length-1],ip=(i,o)=>i&&o&&(o.getDate()!==i.getDate()||o.getMonth()!==i.getMonth()||o.getFullYear()!==i.getFullYear()),np=(i,o)=>{let e=o.timestamp,t=An(i);if(e&&(!t||ip(e,t.timestamp))){let n={type:"date-marker",timestamp:e,trackBy:e.getTime()};i.push(n)}},sp=(i,o,e)=>{let t=An(i),n;if(Ee()&&!o.author)throw new Error("Author must be set for message: "+JSON.stringify(o));o.typing&&!e||(t&&t.type==="message-group"&&(n=t.messages),n&&$t(o.author.id,An(n))?n.push(o):i.push({type:"message-group",messages:[o],author:o.author,timestamp:o.timestamp,trackBy:o}))},op=i=>(o,e,t)=>{let n=t===i-1;return np(o,e),sp(o,e,n),e.attachments&&e.attachments.length>1&&o.push({type:"attachment-group",attachments:e.attachments,attachmentLayout:e.attachmentLayout,timestamp:e.timestamp,trackBy:e}),e.suggestedActions&&n&&o.push({type:"action-group",actions:e.suggestedActions,timestamp:e.timestamp,trackBy:e}),o},ap=i=>i.reduce(op(i.length),[]),Sn=(()=>{class i extends _e{localization;chatService;hostClass=!0;message;constructor(e,t){super(),this.localization=e,this.chatService=t}isOwnMessage(e){return $t(this.chatService.authorId,e)}textFor(e){return this.localization.get(e)}focus(){}static \u0275fac=function(t){return new(t||i)(u(M),u(Ge))};static \u0275cmp=L({type:i,selectors:[["chat-message-reference-content"]],hostVars:2,hostBindings:function(t,n){t&2&&G("k-message-reference-content",n.hostClass)},inputs:{message:"message"},features:[K([{provide:_e,useExisting:z(()=>i)}]),w],decls:4,vars:4,consts:[[4,"ngIf"],[1,"k-chat-file",3,"chatFile"]],template:function(t,n){t&1&&h(0,ql,2,1,"ng-container",0)(1,Xl,2,1,"ng-container",0)(2,Jl,2,1,"ng-container",0)(3,Zl,2,1,"ng-container",0),t&2&&(r("ngIf",n.message.text&&!n.message.isDeleted),l(),r("ngIf",!n.message.text&&!n.message.isDeleted&&n.message.files&&n.message.files.length>0),l(),r("ngIf",n.message.isDeleted&&n.isOwnMessage(n.message)),l(),r("ngIf",n.message.isDeleted&&!n.isOwnMessage(n.message)))},dependencies:[H,vn],encapsulation:2})}return i})(),rp=(()=>{class i{chatService;cdr;element;renderer;borderColor="inherit";messageBoxWrapperClass=!0;messageBoxInput;fileSelectComponent;suggestedActionsComponent;authorId;autoScroll;suggestions;placeholder;inputValue="";localization;messageBoxTemplate;suggestionTemplate;sendMessage=new f;executeSuggestion=new f;fileSelect=new f;fileRemove=new f;files=[];sendIcon=vt;attachmentIcon=zn;deleteIcon=Ve;fileIcon=Ot;isListening=!1;get reply(){return this.chatService.reply}selectedItem;subs=new Ae;constructor(e,t,n,s){this.chatService=e,this.cdr=t,this.element=n,this.renderer=s}ngOnInit(){let e=this.element.nativeElement;this.subs.add(this.renderer.listen(e,"focusout",t=>this.onBlur(t))),this.subs.add(this.chatService.contextMenuAction$.subscribe(t=>{t.action.id==="reply"&&this.messageBoxInput.focus()}))}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}sendClick(){let e=this.inputValue?.trim()||this.files?.length,t=ce(this.sendButtonSettings?.disabled);if(!e&&!t)return;let n=q(q({id:ve(),text:this.inputValue,timestamp:new Date,author:{id:this.authorId}},this.files&&this.files.length>0&&{files:this.files}),this.reply&&{replyToId:this.reply.id});this.sendMessage.emit(new Kt(n)),this.inputValue="",this.files=[],this.chatService.reply=null,this.messageBoxInput.focus(),this.autoScroll=!0}inputKeydown(e){(e.code===S.Enter||e.code===S.NumpadEnter)&&this.sendClick()}textAreaKeydown(e){if(!(e.code===S.Enter||e.code===S.NumpadEnter))return;let n=e.metaKey||e.ctrlKey;!(e.shiftKey||e.metaKey||e.ctrlKey)&&(e.preventDefault(),this.sendClick()),n&&(this.inputValue+=`\r
`)}handleSpeechResult(e){if(e.alternatives&&e.alternatives.length>0){ce(this.inputValue)||(this.inputValue="");let t=e.alternatives[0].transcript+" ";if(!t.trim())return;this.inputValue+=t,this.chatService.emit("inputValueChange",this.inputValue)}}textFor(e){return this.localization.get(e)}removeReply(){this.chatService.reply=null}onReplyReferenceClick(e){e.stopPropagation(),this.chatService.emit("replyReferenceClick",this.chatService.reply?.id)}handleFileSelect(e){let t=e.files.map(n=>({id:n.uid,name:n.name,extension:n.extension,size:n.size,type:n.rawFile.type,rawFile:n.rawFile}));this.files=[...this.files,...t],this.fileSelect.emit(e)}selectFiles(){this.fileSelectComponent?.fileSelectInput&&this.fileSelectComponent.fileSelectInput.nativeElement.click()}removeFile(e){this.files=this.files.filter((n,s)=>s!==e);let t=this.files[e];this.fileRemove.emit(t)}get speechToTextButtonSettings(){return this.chatService.enableSpeechToText}get sendButtonSettings(){return this.chatService.sendButtonSettings}get enableFileSelect(){return this.chatService.enableFileSelect}get isDisabledSendButton(){if(ce(this.sendButtonSettings?.disabled))return this.sendButtonSettings.disabled;let e=!this.inputValue?.length||!this.inputValue?.trim(),t=this.files?.length>0;return e&&!t||this.isListening}select(e,t){if(!(t&&!t.target.classList.contains("k-suggestion"))){if(!this.chatService.toggleMessageState){let n=this.selectedItem;n&&(n.selected=!1),e&&(e.selected=!0,this.selectedItem=e),this.cdr.detectChanges()}this.chatService.toggleMessageState=!1}}onBlur(e){let t=e.relatedTarget||document.activeElement;!ls(t,s=>s===this.element.nativeElement)&&this.select(null)}onInputValueChange(e){this.inputValue=e,this.chatService.emit("inputValueChange",e)}dispatchSuggestion(e){this.executeSuggestion.emit(e)}static \u0275fac=function(t){return new(t||i)(u(Ge),u(Ne),u(k),u(X))};static \u0275cmp=L({type:i,selectors:[["kendo-message-box"]],viewQuery:function(t,n){if(t&1&&(P(Yl,5),P(ec,5),P(ht,5)),t&2){let s;O(s=C())&&(n.messageBoxInput=s.first),O(s=C())&&(n.fileSelectComponent=s.first),O(s=C())&&(n.suggestedActionsComponent=s.first)}},hostVars:4,hostBindings:function(t,n){t&2&&(Pe("border-color",n.borderColor),G("k-message-box-wrapper",n.messageBoxWrapperClass))},inputs:{authorId:"authorId",autoScroll:"autoScroll",suggestions:"suggestions",placeholder:"placeholder",inputValue:"inputValue",localization:"localization",messageBoxTemplate:"messageBoxTemplate",suggestionTemplate:"suggestionTemplate"},outputs:{sendMessage:"sendMessage",executeSuggestion:"executeSuggestion",fileSelect:"fileSelect",fileRemove:"fileRemove"},decls:5,vars:5,consts:[["fileSelect",""],["suggestedActions",""],["messageBoxInput",""],["type","suggestion",3,"suggestions","suggestionTemplate","tabbable","dispatchSuggestion","click","focus",4,"ngIf"],[4,"ngIf"],[1,"k-hidden",3,"select","multiple","showFileList"],["type","suggestion",3,"dispatchSuggestion","click","focus","suggestions","suggestionTemplate","tabbable"],["resizable","none",1,"k-message-box",3,"keydown","valueChange","rows","inputAttributes","placeholder","showSuffixSeparator","value"],["kendoSpeechToTextButton","",3,"continuous","disabled","fillMode","integrationMode","interimResults","lang","maxAlternatives","rounded","size","themeColor","result","start","end",4,"ngIf"],["kendoButton","","icon","attachment","fillMode","clear",3,"svgIcon","click",4,"ngIf"],["kendoButton","",3,"click","fillMode","themeColor","rounded","icon","svgIcon","tabindex"],["class","k-message-reference k-message-reference-sender",3,"click",4,"ngIf"],[1,"k-chat-file-wrapper"],["class","k-chat-file",3,"chatFile","removable","remove",4,"ngFor","ngForOf"],[1,"k-message-reference","k-message-reference-sender",3,"click"],[3,"message"],[1,"k-spacer"],["kendoButton","","fillMode","flat",3,"click","svgIcon"],[1,"k-chat-file",3,"remove","chatFile","removable"],["kendoSpeechToTextButton","",3,"result","start","end","continuous","disabled","fillMode","integrationMode","interimResults","lang","maxAlternatives","rounded","size","themeColor"],["kendoButton","","icon","attachment","fillMode","clear",3,"click","svgIcon"],[3,"ngTemplateOutlet"]],template:function(t,n){if(t&1){let s=R();h(0,ic,2,3,"kendo-chat-suggested-actions",3)(1,lc,9,22,"ng-container",4)(2,uc,1,1,null,4),d(3,"kendo-fileselect",5,0),E("select",function(p){return m(s),g(n.handleFileSelect(p))}),_()}t&2&&(r("ngIf",(n.suggestions==null?null:n.suggestions.length)>0),l(),r("ngIf",!(n.messageBoxTemplate!=null&&n.messageBoxTemplate.templateRef)),l(),r("ngIf",n.messageBoxTemplate==null?null:n.messageBoxTemplate.templateRef),l(),r("multiple",!0)("showFileList",!1))},dependencies:[H,oe,ae,kn,ne,He,Sn,rt,Rt,at,gs,xt,ht,vn],encapsulation:2})}return i})(),Ho=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatMessageContentTemplate",""]]})}return i})(),jo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatTimestampTemplate",""]]})}return i})(),$o=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B))};static \u0275dir=D({type:i,selectors:[["","kendoChatStatusTemplate",""]]})}return i})(),Wo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatMessageTemplate",""]]})}return i})(),Qo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatAuthorMessageContentTemplate",""]]})}return i})(),qo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatReceiverMessageContentTemplate",""]]})}return i})(),Xo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatReceiverMessageTemplate",""]]})}return i})(),Jo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatAuthorMessageTemplate",""]]})}return i})(),mt=(()=>{class i extends _e{element;intl;chatService;localization;cdr;set message(e){this._message=e}get message(){return this._message}tabbable;authorMessageContentTemplate;receiverMessageContentTemplate;messageContentTemplate;authorMessageTemplate;receiverMessageTemplate;messageTemplate;statusTemplate;showMessageTime=!0;authorId;cssClass=!0;get removedClass(){return this.message.isDeleted}onKeyDown(e){this.message.isDeleted||this.chatService.allowMessageCollapse&&this.onExpandableKeydown(e)}selected;get tabIndex(){return this.tabbable?"0":"-1"}expandIcon=pi;collapseIcon=ci;downloadIcon=hi;isMessageExpanded=!1;showExpandCollapseIcon=!1;fileActions=[];toolbarActions=[];parts=[];get useCustomBubbleTemplate(){return!!this.getActiveBubbleTemplate()}get useCustomContentTemplate(){return!!this.getActiveContentTemplate()}get hasMessageContent(){return!!(this.message?.text||this.message?.files?.length>0)}get hasFiles(){return this.message?.files?.length>0}get hasMultipleFiles(){return this.message?.files?.length>1}get isActiveMessage(){return this.chatService.active&&this.message?.id===this.chatService.activeMessage?.id}get isMessageExpandable(){let t=this.isOwnMessage(this.message)?this.chatService.authorMessageSettings:this.chatService.receiverMessageSettings;return ce(t?.allowMessageCollapse)?t.allowMessageCollapse:this.chatService.allowMessageCollapse||!1}get showToolbar(){if(this.message?.isDeleted)return!1;let e=this.chatService.messageToolbarActions?.length>0,t=this.toolbarActions?.length>0;return e||t}subs=new Ae;_message;constructor(e,t,n,s,a){super(),this.element=e,this.intl=t,this.chatService=n,this.localization=s,this.cdr=a}ngOnInit(){this.fileActions=this.getFileActions(),this.toolbarActions=this.getToolbarActions();let e=this.isOwnMessage(this.message)?this.chatService.authorMessageSettingsChange$:this.chatService.receiverMessageSettingsChange$;this.subs.add(e.subscribe(()=>{this.fileActions=this.getFileActions(),this.toolbarActions=this.getToolbarActions(),setTimeout(()=>{this.showExpandCollapseIcon=this.calculateExpandCollapseIconVisibility()})})),this.subs.add(this.chatService.allowMessageCollapseChange$.subscribe(()=>{setTimeout(()=>{this.showExpandCollapseIcon=this.calculateExpandCollapseIconVisibility()})})),this.message.id&&this.chatService.registerMessageElement(this.message.id,this.element),this.parts=this.getFormattedTextParts(this.message.text)}ngAfterViewInit(){this.showExpandCollapseIcon=this.calculateExpandCollapseIconVisibility(),this.cdr.detectChanges()}ngOnDestroy(){this.message.id&&this.chatService.unregisterMessageElement(this.message.id),this.subs.unsubscribe()}calculateExpandCollapseIconVisibility(){if(this.isMessageExpanded)return!0;let e=this.element.nativeElement.querySelector(".k-bubble-content");if(!e)return!1;let t=e.scrollHeight>e.clientHeight,n=e.scrollWidth>e.clientWidth;if(this.useCustomContentTemplate)return t||n;let s=this.element.nativeElement.querySelector(".k-chat-bubble-text");return s?.scrollWidth>s?.clientWidth||t||n}getActiveBubbleTemplate(){let e=this.isOwnMessage(this.message);return e&&this.authorMessageTemplate?this.authorMessageTemplate:!e&&this.receiverMessageTemplate?this.receiverMessageTemplate:this.messageTemplate?this.messageTemplate:null}getActiveContentTemplate(){let e=this.isOwnMessage(this.message);return e&&this.authorMessageContentTemplate?this.authorMessageContentTemplate:!e&&this.receiverMessageContentTemplate?this.receiverMessageContentTemplate:this.messageContentTemplate?this.messageContentTemplate:null}getDeletedMessageText(){return this.isOwnMessage(this.message)?this.textFor("deletedMessageSenderText"):this.textFor("deletedMessageReceiverText")}textFor(e){return this.localization.get(e)}formatTimeStamp(e){return this.intl.formatDate(e,{datetime:"short"})}focus(){this.element.nativeElement.focus()}onDownloadAll(){this.chatService.emit("fileDownload",{files:this.message.files,message:this.message})}toggleMessageState(e){e.stopImmediatePropagation(),this.isMessageExpanded=!this.isMessageExpanded,this.chatService.toggleMessageState=!1}onExpandableKeydown(e){let t=he(e);!(e.target.closest(Ko)||e.target.closest(Po))&&(t===S.Enter||t===S.Space)&&(e.preventDefault(),this.chatService.toggleMessageState=!0,this.toggleMessageState(e))}onToolbarAction(e,t,n){e.stopImmediatePropagation(),this.chatService.emit("toolbarAction",{action:t,message:n})}onFileAction(e,t){e.originalAction.id==="download"&&this.chatService.emit("fileDownload",{files:[t],message:this.message}),this.chatService.emit("fileAction",{action:e.originalAction,file:t})}getMessageById(e){return this.chatService.getMessageById(e)}onReplyReferenceClick(e,t){e.stopPropagation(),this.chatService.emit("replyReferenceClick",t)}handleMenuClose(e){if(e){let t=e.originalEvent;t&&this.onActionButtonClick(t)}this.chatService.active=!1,this.chatService.emit("contextMenuVisibilityChange",!1),this.chatService.selectOnMenuClose&&(this.selected=!0,this.focus())}onActionButtonClick(e){let t=e instanceof MouseEvent&&!e.target?.closest(".k-chat-bubble"),n=e instanceof MouseEvent&&e.target?.closest(Vo);t&&!n&&(this.chatService.selectOnMenuClose=!1)}handleMenuOpen(){this.chatService.selectOnMenuClose=this.selected,this.chatService.emit("contextMenuVisibilityChange",!0)}onActionPopupChange(e){e?(this.chatService.active=!0,this.handleMenuOpen()):this.handleMenuClose()}isOwnMessage(e){return $t(this.authorId,e)}getFormattedTextParts(e){if(!e)return[];let t=[],n=Array.from(e.matchAll(Xu)),s=0;for(let a of n){let p=a[1],A=a.index;ce(A)&&(A>s&&t.push({type:"text",content:e.substring(s,A)}),t.push({type:"link",content:p,href:p}),s=A+a[0].length)}return s<e.length&&t.push({type:"text",content:e.substring(s)}),t}getMessageSettings(){return this.isOwnMessage(this.message)?this.chatService.authorMessageSettings:this.chatService.receiverMessageSettings}getToolbarActions(){let e=this.getMessageSettings();return e?.messageToolbarActions?.length?e.messageToolbarActions:this.chatService.messageToolbarActions||[]}getFileActions(){let e=this.getMessageSettings(),t=e?.fileActions?.length?e.fileActions:this.chatService.fileActions||[];return Bo(t)}static \u0275fac=function(t){return new(t||i)(u(k),u(li),u(Ge),u(M),u(Ne))};static \u0275cmp=L({type:i,selectors:[["kendo-chat-message"]],hostVars:5,hostBindings:function(t,n){t&1&&E("keydown",function(a){return n.onKeyDown(a)}),t&2&&(N("tabIndex",n.tabIndex),G("k-message",n.cssClass)("k-message-removed",n.removedClass))},inputs:{message:"message",tabbable:"tabbable",authorMessageContentTemplate:"authorMessageContentTemplate",receiverMessageContentTemplate:"receiverMessageContentTemplate",messageContentTemplate:"messageContentTemplate",authorMessageTemplate:"authorMessageTemplate",receiverMessageTemplate:"receiverMessageTemplate",messageTemplate:"messageTemplate",statusTemplate:"statusTemplate",showMessageTime:"showMessageTime",authorId:"authorId"},features:[K([{provide:_e,useExisting:z(()=>i)}]),w],decls:3,vars:3,consts:[[4,"ngIf"],["class","k-chat-message-toolbar","fillMode","flat",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","k-message-time",4,"ngIf"],["class","k-message-status",4,"ngIf"],[1,"k-message-time"],[1,"k-chat-bubble","k-bubble"],[1,"k-typing-indicator"],["class","k-chat-bubble k-bubble",3,"ngClass",4,"ngIf"],[1,"k-chat-bubble","k-bubble",3,"ngClass"],[1,"k-bubble-content"],["class","k-bubble-expandable-indicator",3,"mousedown","click",4,"ngIf"],[1,"k-bubble-expandable-indicator",3,"mousedown","click"],[3,"name","svgIcon"],["class","k-chat-file-wrapper",3,"ngClass",4,"ngIf"],["class","k-chat-download-button-wrapper",4,"ngIf"],["class","k-message-reference k-message-reference-receiver",3,"click",4,"ngIf"],["class","k-chat-bubble-text",4,"ngIf"],[1,"k-message-reference","k-message-reference-receiver",3,"click"],[3,"message"],[1,"k-chat-bubble-text"],[4,"ngFor","ngForOf"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],[1,"k-chat-file-wrapper",3,"ngClass"],["class","k-chat-file",3,"chatFile","fileActions","actionClick","actionsToggle","actionButtonClick",4,"ngFor","ngForOf"],[1,"k-chat-file",3,"actionClick","actionsToggle","actionButtonClick","chatFile","fileActions"],[1,"k-chat-download-button-wrapper"],["kendoButton","","fillMode","flat","icon","download",1,"k-chat-download-button",3,"click","svgIcon"],[1,"k-message-status"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["fillMode","flat",1,"k-chat-message-toolbar"],["fillMode","flat",3,"icon","svgIcon","disabled","title","click",4,"ngFor","ngForOf"],["fillMode","flat",3,"click","icon","svgIcon","disabled","title"]],template:function(t,n){t&1&&h(0,mc,2,4,"ng-container",0)(1,Gc,5,4,"ng-container",0)(2,Pc,2,1,"kendo-toolbar",1),t&2&&(r("ngIf",n.useCustomBubbleTemplate),l(),r("ngIf",!n.useCustomBubbleTemplate),l(),r("ngIf",n.showToolbar))},dependencies:[H,Oe,oe,ne,de,ae,vn,hs,fs,Sn],encapsulation:2})}return i})(),Zo=(()=>{class i{set attachment(e){this._attachment=e,this.context={$implicit:this.attachment}}get attachment(){return this._attachment}template;get image(){return this.contentType.startsWith("image/")}get unknown(){return!this.image}context;get contentType(){return this.attachment.contentType||""}_attachment;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=L({type:i,selectors:[["kendo-chat-attachment"]],inputs:{attachment:"attachment",template:"template"},decls:2,vars:2,consts:[[4,"ngIf"],["class","k-card",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"k-card"],[1,"k-card-body"],["class","k-card-title",4,"ngIf"],["class","k-card-subtitle",4,"ngIf"],[1,"k-card-title"],[1,"k-card-subtitle"]],template:function(t,n){t&1&&h(0,Vc,2,2,"ng-container",0)(1,$c,6,4,"div",1),t&2&&(r("ngIf",n.template),l(),r("ngIf",!n.template))},dependencies:[H,ne],encapsulation:2})}return i})(),lp=(()=>{class i extends _e{zone;localizationService;chevronLeftIcon=di;chevronRightIcon=ui;attachments;layout;tabbable;template;localization;get carousel(){return this.layout!=="list"}deck;items;scrollPosition=0;selectedIndex=0;scrollSubscription;direction;get showLeftArrow(){return this.carousel&&(this.direction==="rtl"?this.scrollPosition>-1:this.scrollPosition>0)}get showRightArrow(){return this.carousel&&(this.direction==="rtl"?this.scrollPosition<0:this.scrollPosition<1)}carouselKeyHandlers={[S.ArrowLeft]:e=>this.navigateTo(e,this.direction==="rtl"?1:-1),[S.ArrowRight]:e=>this.navigateTo(e,this.direction==="rtl"?-1:1)};listKeyHandlers={[S.ArrowUp]:e=>this.navigateTo(e,-1),[S.ArrowDown]:e=>this.navigateTo(e,1)};constructor(e,t){super(),this.zone=e,this.localizationService=t,this.direction=this.localizationService.rtl?"rtl":"ltr"}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.scrollSubscription=tt(this.deck.nativeElement,"scroll").pipe(Nn(100)).subscribe(()=>this.onScroll())})}ngOnDestroy(){this.scrollSubscription.unsubscribe()}isSelected(e){return this.selectedIndex===e}itemKeydown(e,t){let n=this.layout==="list"?this.listKeyHandlers:this.carouselKeyHandlers,s=he(e),a=n[s];a&&a(e,t)}itemClick(e){this.select(e)}focus(){this.select(this.selectedIndex)}scrollTo(e){let t=this.deck.nativeElement,n=t.scrollWidth/this.items.length,s=t.scrollWidth-t.offsetWidth,a=t.scrollLeft+n*e;t.scrollLeft=this.direction==="rtl"?Math.min(0,s,a):Math.max(0,Math.min(s,a))}select(e){this.selectedIndex=e;let t=this.items.toArray()[e];t&&t.nativeElement.focus()}navigateTo(e,t){let n=this.selectedIndex,s=Math.max(0,Math.min(n+t,this.items.length-1));s!==n&&(this.select(s),e.preventDefault())}onScroll(){let e=this.deck.nativeElement;if(e.scrollWidth===0)return;let t=e.scrollLeft/(e.scrollWidth-e.offsetWidth);t!==this.scrollPosition&&this.zone.run(()=>{this.scrollPosition=t})}textFor(e){return this.localization.get(e)}static \u0275fac=function(t){return new(t||i)(u(j),u(M))};static \u0275cmp=L({type:i,selectors:[["kendo-chat-message-attachments"]],viewQuery:function(t,n){if(t&1&&(P(Wc,7,k),P(Lo,5,k)),t&2){let s;O(s=C())&&(n.deck=s.first),O(s=C())&&(n.items=s)}},hostVars:2,hostBindings:function(t,n){t&2&&G("k-card-deck-scrollwrap",n.carousel)},inputs:{attachments:"attachments",layout:"layout",tabbable:"tabbable",template:"template",localization:"localization"},features:[K([{provide:_e,useExisting:z(()=>i)}]),w],decls:5,vars:7,consts:[["deck",""],["item",""],["kendoButton","","tabindex","-1","icon","chevron-left",3,"svgIcon","click",4,"ngIf"],[3,"attachment","template","k-selected","k-focus","k-card-wrap","k-first","k-last","click","keydown",4,"ngFor","ngForOf"],["kendoButton","","tabindex","-1","icon","chevron-right",3,"svgIcon","click",4,"ngIf"],["kendoButton","","tabindex","-1","icon","chevron-left",3,"click","svgIcon"],[3,"click","keydown","attachment","template"],["kendoButton","","tabindex","-1","icon","chevron-right",3,"click","svgIcon"]],template:function(t,n){t&1&&(h(0,Qc,1,2,"button",2),d(1,"div",null,0),h(3,qc,2,13,"kendo-chat-attachment",3),_(),h(4,Xc,1,2,"button",4)),t&2&&(r("ngIf",n.showLeftArrow),l(),G("k-card-deck",n.carousel)("k-card-list",!n.carousel),l(2),r("ngForOf",n.attachments),l(),r("ngIf",n.showRightArrow))},dependencies:[H,ae,oe,Zo],encapsulation:2})}return i})(),Yo=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatUserStatusTemplate",""]]})}return i})(),cp=(()=>{class i{element;intl;renderer;chatService;cdr;set messages(e){let t=e||[];this.view=ap(t),this._messages=t}get messages(){return this._messages}attachmentTemplate;authorMessageContentTemplate;receiverMessageContentTemplate;messageContentTemplate;authorMessageTemplate;receiverMessageTemplate;messageTemplate;timestampTemplate;statusTemplate;userStatusTemplate;localization;authorId;executeAction=new f;navigate=new f;resize=new f;items;cssClass=!0;view=[];_messages;subs=new Ae;selectedItem;keyActions={[S.Home]:e=>this.onHomeOrEndKeyDown("home"),[S.End]:e=>this.onHomeOrEndKeyDown("end"),[S.ArrowUp]:e=>this.navigateTo(e,-1),[S.ArrowDown]:e=>this.navigateTo(e,1),[S.Tab]:e=>this.onTabKeyDown(e),[S.F10]:e=>e.shiftKey&&this.openContextMenu(e)};constructor(e,t,n,s,a){this.element=e,this.intl=t,this.renderer=n,this.chatService=s,this.cdr=a}ngOnInit(){let e=this.element.nativeElement;this.subs.add(this.renderer.listen(e,"keydown",t=>this.onKeydown(t))),this.subs.add(this.renderer.listen(e,"focusout",t=>this.onBlur(t))),this.subs.add(this.renderer.listen(e,"click",t=>{let n=this.findMessageComponentFromEvent(t);n&&this.select(n,t)})),this.subs.add(this.renderer.listen(e,"contextmenu",t=>{t.preventDefault();let n=this.findMessageComponentFromEvent(t);n&&this.onContextMenuClick(n.message,t,n)})),this.subs.add(this.chatService.replyReferenceClick$.subscribe(t=>{this.scrollToAndSelectMessage(t)})),this.subs.add(this.chatService.contextMenuVisibilityChange$.subscribe(t=>{this.handleMenuClose(t)}))}ngAfterViewInit(){this.selectedItem=this.items.last}ngOnDestroy(){this.subs.unsubscribe()}onResize(){this.resize.emit()}onClick(e,t){this.select(e,t)}showGroupAuthor(e){let t=this.isOwnMessage(e.messages[0])?this.chatService.authorMessageSettings:this.chatService.receiverMessageSettings;return ce(t?.showUsername)?t.showUsername&&e.author.name:this.chatService.showUsername&&e.author.name}showGroupAvatar(e){let t=this.isOwnMessage(e.messages[0])?this.chatService.authorMessageSettings:this.chatService.receiverMessageSettings;return ce(t?.showAvatar)?t.showAvatar&&e.author.avatarUrl:this.chatService.showAvatar&&e.author.avatarUrl}onContextMenuClick(e,t,n){this.chatService.calculateContextMenuActions(this.isOwnMessage(e)),this.chatService.calculatedContextMenuActions.length>0&&(this.chatService.messagesContextMenu.show({left:t.pageX,top:t.pageY}),this.chatService.activeMessageElement=n,this.chatService.activeMessage=e,this.chatService.active=!0,this.chatService.selectOnMenuClose=this.chatService.activeMessageElement?.selected,this.chatService.emit("contextMenuVisibilityChange",!0))}formatTimeStamp(e){return this.intl.formatDate(e,{date:"full"})}calculateMessageWidthMode(e){let n=this.isOwnMessage(e)?this.chatService.authorMessageSettings:this.chatService.receiverMessageSettings;return n?.messageWidthMode?n.messageWidthMode==="full":this.chatService.messageWidthMode==="full"}onKeydown(e){let t=he(e),n=this.keyActions[t];n&&n(e)}onBlur(e){let t=e.relatedTarget||document.activeElement,n=!un(t,a=>a===this.element.nativeElement),s=un(t,a=>a?.classList?.contains("k-context-menu-popup"))||un(t,a=>a?.classList?.contains("k-menu-popup"));n&&!s&&this.select(null)}isOwnMessage(e){return $t(this.authorId,e)}dispatchAction(e,t){let n=new mn(e,t);this.executeAction.emit(n)}trackGroup(e,t){return t.trackBy}select(e,t){if(t){let n=t.target;if(n.classList.contains("k-suggestion")||n.closest(Po)||n.closest(Ko))return}if(!this.chatService.toggleMessageState){let n=this.selectedItem;n&&(n.selected=!1),e&&(e.selected=!0,this.selectedItem=e),this.cdr.detectChanges()}this.chatService.toggleMessageState=!1}last(e){if(!e||e.length===0)return;let t=e.filter(s=>s.type==="message-group"),n=t[t.length-1].messages;return n[n.length-1]}handleMenuClose(e){e||this.select(null)}textFor(e){return this.localization.get(e)}onHomeOrEndKeyDown(e){let t=this.items.toArray();e==="home"?t[0].focus():t[t.length-1].focus()}onTabKeyDown(e){let t=this.items.toArray()[this.items.length-1],n=t instanceof ht,s=t instanceof mt;e.target.blur(),(n||s)&&(this.select(t),t.focus(),this.navigate.emit())}navigateTo(e,t){let n=this.items.toArray(),s=this.selectedItem,a=n.indexOf(s),p=Math.max(0,Math.min(a+t,this.items.length-1)),A=n[p],x=A instanceof ht;A!==s&&(x&&A.items.toArray()[0]?.nativeElement.focus(),this.select(A),A.focus(),this.navigate.emit(),e.preventDefault())}scrollToAndSelectMessage(e){this.chatService.scrollToMessage(e);let t=this.chatService.getMessageById(e),n=this.items.find(s=>s instanceof mt&&s.message===t);n&&this.select(n)}openContextMenu(e){e.preventDefault();let t=this.findMessageComponentFromActiveElement();if(t){let n=t.element.nativeElement.querySelector(".k-chat-bubble");if(n){let s=n?.getBoundingClientRect();this.onContextMenuClick(t.message,{pageX:s.left+s.width/2+window.scrollX,pageY:s.top+s.height/2+window.scrollY},t)}else{let a=t.element.nativeElement?.getBoundingClientRect();this.onContextMenuClick(t.message,{pageX:a.left+a.width/2+window.scrollX,pageY:a.top+a.height/2+window.scrollY},t)}}}findMessageComponentFromActiveElement(){let e=document.activeElement;return this.items.filter(n=>n instanceof mt).find(n=>{let s=n.element?.nativeElement;return s&&(s===e||s.contains(e))})}findMessageComponentFromEvent(e){let n=e.target?.closest(".k-message");return n?this.items.filter(a=>a instanceof mt).find(a=>{let p=a.element?.nativeElement;return p&&(p===n||p.contains(n))}):void 0}static \u0275fac=function(t){return new(t||i)(u(k),u(li),u(X),u(Ge),u(Ne))};static \u0275cmp=L({type:i,selectors:[["kendo-chat-message-list"]],viewQuery:function(t,n){if(t&1&&P(_e,5),t&2){let s;O(s=C())&&(n.items=s)}},hostVars:2,hostBindings:function(t,n){t&2&&G("k-message-list-content",n.cssClass)},inputs:{messages:"messages",attachmentTemplate:"attachmentTemplate",authorMessageContentTemplate:"authorMessageContentTemplate",receiverMessageContentTemplate:"receiverMessageContentTemplate",messageContentTemplate:"messageContentTemplate",authorMessageTemplate:"authorMessageTemplate",receiverMessageTemplate:"receiverMessageTemplate",messageTemplate:"messageTemplate",timestampTemplate:"timestampTemplate",statusTemplate:"statusTemplate",userStatusTemplate:"userStatusTemplate",localization:"localization",authorId:"authorId"},outputs:{executeAction:"executeAction",navigate:"navigate",resize:"resize"},decls:2,vars:2,consts:[["message",""],["attachments",""],["actions",""],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"resize"],[3,"ngSwitch"],["class","k-timestamp",4,"ngSwitchCase"],["class","k-message-group",3,"k-message-group-sender","k-message-group-receiver","k-no-avatar","k-message-group-full-width",4,"ngSwitchCase"],[3,"attachments","layout","localization","tabbable","template","click","focus",4,"ngSwitchCase"],["type","action",3,"actions","tabbable","dispatchAction","click","focus",4,"ngSwitchCase"],[1,"k-timestamp"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"k-message-group"],["class","k-avatar k-avatar-md k-avatar-solid k-avatar-solid-primary k-rounded-full",4,"ngIf"],["class","k-chat-user-status-wrapper",4,"ngIf"],[1,"k-message-group-content"],["class","k-message-author",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"k-avatar","k-avatar-md","k-avatar-solid","k-avatar-solid-primary","k-rounded-full"],[1,"k-avatar-image"],[3,"alt"],[1,"k-chat-user-status-wrapper"],["class","k-chat-user-status",4,"ngIf"],[1,"k-chat-user-status"],[1,"k-message-author"],[3,"message","tabbable","authorMessageContentTemplate","receiverMessageContentTemplate","messageContentTemplate","authorMessageTemplate","receiverMessageTemplate","messageTemplate","statusTemplate","authorId"],[3,"attachment","template",4,"ngIf"],[3,"attachment","template"],[3,"click","focus","attachments","layout","localization","tabbable","template"],["type","action",3,"dispatchAction","click","focus","actions","tabbable"]],template:function(t,n){t&1&&(h(0,uu,6,5,"ng-container",3),d(1,"kendo-resize-sensor",4),E("resize",function(){return n.onResize()}),_()),t&2&&r("ngForOf",n.view)("ngForTrackBy",n.trackGroup)},dependencies:[oe,Mn,Dn,H,ne,mt,Zo,lp,ht,cs],encapsulation:2})}return i})(),up=2,pp=(()=>{class i{element;zone;renderer;autoScroll=!0;autoScrollChange=new f;overflowAnchor="none";scrolling=!1;unsubscribe;constructor(e,t,n){this.element=e,this.zone=t,this.renderer=n}ngOnInit(){this.zone.runOutsideAngular(()=>{this.unsubscribe=this.renderer.listen(this.element.nativeElement,"scroll",()=>this.onScroll())})}ngAfterViewInit(){this.scrollToBottom()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}onScroll(){if(this.scrolling)return;let e=this.element.nativeElement,t=e.scrollTop+e.offsetHeight,s=e.scrollHeight-t<up;this.autoScroll!==s&&this.zone.run(()=>{this.autoScroll=s,this.autoScrollChange.emit(this.autoScroll)})}scrollToBottom(){if(!this.autoScroll)return;let e=this.element.nativeElement;e.scrollTop=e.scrollHeight-e.clientHeight,this.scrolling=!0,this.zone.runOutsideAngular(()=>setTimeout(()=>this.scrolling=!1,1e3))}static \u0275fac=function(t){return new(t||i)(u(k),u(j),u(X))};static \u0275dir=D({type:i,selectors:[["","kendoChatScrollAnchor",""]],hostVars:2,hostBindings:function(t,n){t&2&&Pe("overflow-anchor",n.overflowAnchor)},inputs:{autoScroll:"autoScroll"},outputs:{autoScrollChange:"autoScrollChange"},exportAs:["scrollAnchor"]})}return i})(),Bt=class Ft extends ze{deletedMessageSenderText;deletedMessageReceiverText;downloadAllFilesText;messagePlaceholder;send;messageListLabel;messageBoxInputLabel;messageAttachmentLeftArrow;messageAttachmentRightArrow;speechToTextButtonTitle;fileSelectButtonTitle;removeReplyTitle;removeFileTitle;expandTitle;collapseTitle;fileActionsTitle;nextSuggestionsButtonTitle;previousSuggestionsButtonTitle;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Fe(Ft)))(n||Ft)}})();static \u0275dir=D({type:Ft,selectors:[["kendoConversationalUIMessages"]],inputs:{deletedMessageSenderText:"deletedMessageSenderText",deletedMessageReceiverText:"deletedMessageReceiverText",downloadAllFilesText:"downloadAllFilesText",messagePlaceholder:"messagePlaceholder",send:"send",messageListLabel:"messageListLabel",messageBoxInputLabel:"messageBoxInputLabel",messageAttachmentLeftArrow:"messageAttachmentLeftArrow",messageAttachmentRightArrow:"messageAttachmentRightArrow",speechToTextButtonTitle:"speechToTextButtonTitle",fileSelectButtonTitle:"fileSelectButtonTitle",removeReplyTitle:"removeReplyTitle",removeFileTitle:"removeFileTitle",expandTitle:"expandTitle",collapseTitle:"collapseTitle",fileActionsTitle:"fileActionsTitle",nextSuggestionsButtonTitle:"nextSuggestionsButtonTitle",previousSuggestionsButtonTitle:"previousSuggestionsButtonTitle"},standalone:!1,features:[w]})},dp=class Pt extends Bt{service;constructor(e){super(),this.service=e}static \u0275fac=function(t){return new(t||Pt)(u(M))};static \u0275dir=D({type:Pt,selectors:[["","kendoChatLocalizedMessages",""]],features:[K([{provide:Bt,useExisting:z(()=>Pt)}]),w]})},ea=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B))};static \u0275dir=D({type:i,selectors:[["","kendoChatHeaderTemplate",""]]})}return i})(),ta=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoChatNoDataTemplate",""]]})}return i})(),_p=(()=>{class i{localization;zone;renderer;element;chatService;messages;authorId;messageBoxType="textarea";height;width;placeholder;messageWidthMode="standard";timestampVisibility="focus";showUsername=!0;showAvatar=!0;allowMessageCollapse=!1;enableSpeechToText=!0;enableFileSelect=!0;messageToolbarActions=[];inputValue="";authorMessageSettings;receiverMessageSettings;defaultContextMenuActions=pn;set messageContextMenuActions(e){this._messageContextMenuActions=this.mergeWithDefaultActions(e,pn)}get messageContextMenuActions(){return this._messageContextMenuActions}defaultFileActions=dn;set fileActions(e){this._fileActions=this.mergeWithDefaultActions(e,dn)}get fileActions(){return this._fileActions}set messageFilesLayout(e){this.chatService.messageFilesLayout=e}set suggestionsLayout(e){e&&(this.chatService.suggestionsLayout=e)}set quickActionsLayout(e){e&&(this.chatService.quickActionsLayout=e)}suggestions=[];sendButtonSettings=hn;set modelFields(e){this._modelFields=q(q({},gt),e)}get modelFields(){return this._modelFields}sendMessage=new f;toolbarActionClick=new f;contextMenuActionClick=new f;fileActionClick=new f;download=new f;executeAction=new f;suggestionExecute=new f;fileSelect=new f;fileRemove=new f;unpin=new f;inputValueChange=new f;get className(){return"k-chat"}get dirAttr(){return this.direction}set messagesContextMenu(e){this.chatService.messagesContextMenu=e}attachmentTemplate;chatHeaderTemplate;chatNoDataTemplate;authorMessageContentTemplate;receiverMessageContentTemplate;messageContentTemplate;authorMessageTemplate;receiverMessageTemplate;messageTemplate;timestampTemplate;suggestionTemplate;statusTemplate;messageBoxTemplate;userStatusTemplate;messageBox;messageList;get processedMessages(){return!this.messages||this.messages.length===0?[]:this._modelFields&&Object.keys(this._modelFields).some(e=>this._modelFields[e]!==gt[e])?((this.messages!==this._lastMessagesReference||this._modelFields!==this._lastModelFields)&&(this._cachedProcessedMessages=Ju(this.messages,this._modelFields),this._lastMessagesReference=this.messages,this._lastModelFields=this._modelFields),this._cachedProcessedMessages):this.messages}get contextMenuActions(){return Bo(this.chatService.calculatedContextMenuActions)}get localizationText(){return this.localization}autoScroll=!0;pinIcon=qn;deleteIcon=Ve;pinnedMessage;direction;subs=new Ae;_modelFields=gt;_messageContextMenuActions=pn;_fileActions=dn;_cachedProcessedMessages=[];_lastMessagesReference=null;_lastModelFields=null;constructor(e,t,n,s,a){this.localization=e,this.zone=t,this.renderer=n,this.element=s,this.chatService=a,Ce(jt),this.direction=e.rtl?"rtl":"ltr",this.subs.add(e.changes.subscribe(({rtl:p})=>{this.direction=p?"rtl":"ltr"}))}ngOnInit(){this.chatService.messageWidthMode=this.messageWidthMode,this.chatService.timestampVisibility=this.timestampVisibility,this.chatService.showUsername=this.showUsername,this.chatService.showAvatar=this.showAvatar,this.chatService.allowMessageCollapse=this.allowMessageCollapse,this.chatService.enableSpeechToText=this.enableSpeechToText,this.chatService.sendButtonSettings=this.sendButtonSettings,this.chatService.enableFileSelect=this.enableFileSelect,this.chatService.messageToolbarActions=this.messageToolbarActions,this.chatService.messageContextMenuActions=this.messageContextMenuActions,this.chatService.fileActions=this.fileActions,this.chatService.authorMessageSettings=this.authorMessageSettings,this.chatService.receiverMessageSettings=this.receiverMessageSettings,this.chatService.messages=this.processedMessages||[],this.chatService.chatElement=this.messageList,this.subs.add(this.chatService.toolbarAction$.subscribe(e=>{this.toolbarActionClick.emit(e)})),this.subs.add(this.chatService.contextMenuAction$.subscribe(e=>{this.contextMenuActionClick.emit(e)})),this.subs.add(this.chatService.fileAction$.subscribe(e=>{this.fileActionClick.emit(e)})),this.subs.add(this.chatService.fileDownload$.subscribe(e=>{this.download.emit(e)})),this.subs.add(this.chatService.inputValueChange$.subscribe(e=>{this.inputValueChange.emit(e)})),this.pinnedMessage=this.findLastPinnedMessage(),this.chatService.authorId=this.authorId}ngOnChanges(e){this.zone.runOutsideAngular(()=>setTimeout(()=>{this.messageList.element.nativeElement.style.flex="1 1 auto"})),ke("messages",e,!1)&&(this.pinnedMessage=this.findLastPinnedMessage(),this.chatService.messages=this.processedMessages),ke("height",e,!1)&&this.renderer.setStyle(this.element.nativeElement,"height",`${Ei(this.height)}`),ke("width",e,!1)&&this.renderer.setStyle(this.element.nativeElement,"width",`${Ei(this.width)}`),this.updateChatServiceProperties(["authorId","messageWidthMode","timestampVisibility","showUsername","showAvatar","allowMessageCollapse","enableSpeechToText","sendButtonSettings","enableFileSelect","messageToolbarActions","messageContextMenuActions","fileActions","authorMessageSettings","receiverMessageSettings"],e)}ngAfterViewInit(){if(Ee()&&!ce(this.authorId))throw new Error("AuthorId must be set.")}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}dispatchAction(e){this.executeAction.emit(e),e.isDefaultPrevented()||(qu(e.action)(e.action,this),this.messageBoxTemplate||this.messageBox.messageBoxInput.focus())}textFor(e){return this.localization.get(e)}scrollToPinnedMessage(){this.pinnedMessage&&this.chatService.scrollToMessage(this.pinnedMessage?.id)}onContextMenuAction(e){e.id==="reply"&&(this.chatService.reply=this.chatService.activeMessage),e.id==="copy"&&navigator.clipboard.writeText(this.chatService.activeMessage.text),this.chatService.emit("contextMenuAction",{action:e,message:this.chatService.activeMessage})}handleMenuClose(e){if(e){let t=e.originalEvent;t&&this.onActionButtonClick(t)}this.chatService.activeMessage=null,this.chatService.emit("contextMenuVisibilityChange",!1),this.chatService.selectOnMenuClose&&(this.chatService.activeMessageElement.selected=!0,this.chatService.focusActiveMessageElement())}onActionButtonClick(e){let t=e instanceof MouseEvent&&!e.target?.closest(".k-chat-bubble"),n=e instanceof MouseEvent&&e.target?.closest(Vo);t&&!n&&(this.chatService.selectOnMenuClose=!1)}findLastPinnedMessage(){return[...this.processedMessages].reverse().find(e=>e.isPinned)}updateChatServiceProperties(e,t){e.forEach(n=>{ke(n,t,!1)&&(this.chatService[n]=this[n])})}mergeWithDefaultActions(e,t){return!e||e.length===0?[]:e.map(n=>{let s=t.find(a=>a.id===n?.id);return s?q(q({},s),n):n})}static \u0275fac=function(t){return new(t||i)(u(M),u(j),u(X),u(k),u(Ge))};static \u0275cmp=L({type:i,selectors:[["kendo-chat"]],contentQueries:function(t,n,s){if(t&1&&(F(s,Go,5),F(s,ea,5),F(s,ta,5),F(s,Qo,5),F(s,qo,5),F(s,Ho,5),F(s,Jo,5),F(s,Xo,5),F(s,Wo,5),F(s,jo,5),F(s,zo,5),F(s,$o,5),F(s,Fo,5),F(s,Yo,5)),t&2){let a;O(a=C())&&(n.attachmentTemplate=a.first),O(a=C())&&(n.chatHeaderTemplate=a.first),O(a=C())&&(n.chatNoDataTemplate=a.first),O(a=C())&&(n.authorMessageContentTemplate=a.first),O(a=C())&&(n.receiverMessageContentTemplate=a.first),O(a=C())&&(n.messageContentTemplate=a.first),O(a=C())&&(n.authorMessageTemplate=a.first),O(a=C())&&(n.receiverMessageTemplate=a.first),O(a=C())&&(n.messageTemplate=a.first),O(a=C())&&(n.timestampTemplate=a.first),O(a=C())&&(n.suggestionTemplate=a.first),O(a=C())&&(n.statusTemplate=a.first),O(a=C())&&(n.messageBoxTemplate=a.first),O(a=C())&&(n.userStatusTemplate=a.first)}},viewQuery:function(t,n){if(t&1&&(P(pu,5),P(du,5),P(_u,7,qt)),t&2){let s;O(s=C())&&(n.messagesContextMenu=s.first),O(s=C())&&(n.messageBox=s.first),O(s=C())&&(n.messageList=s.first)}},hostVars:3,hostBindings:function(t,n){t&2&&(N("dir",n.dirAttr),Yt(n.className))},inputs:{messages:"messages",authorId:"authorId",messageBoxType:"messageBoxType",height:"height",width:"width",placeholder:"placeholder",messageWidthMode:"messageWidthMode",timestampVisibility:"timestampVisibility",showUsername:"showUsername",showAvatar:"showAvatar",allowMessageCollapse:"allowMessageCollapse",enableSpeechToText:"enableSpeechToText",enableFileSelect:"enableFileSelect",messageToolbarActions:"messageToolbarActions",inputValue:"inputValue",authorMessageSettings:"authorMessageSettings",receiverMessageSettings:"receiverMessageSettings",messageContextMenuActions:"messageContextMenuActions",fileActions:"fileActions",messageFilesLayout:"messageFilesLayout",suggestionsLayout:"suggestionsLayout",quickActionsLayout:"quickActionsLayout",suggestions:"suggestions",sendButtonSettings:"sendButtonSettings",modelFields:"modelFields"},outputs:{sendMessage:"sendMessage",toolbarActionClick:"toolbarActionClick",contextMenuActionClick:"contextMenuActionClick",fileActionClick:"fileActionClick",download:"download",executeAction:"executeAction",suggestionExecute:"suggestionExecute",fileSelect:"fileSelect",fileRemove:"fileRemove",unpin:"unpin",inputValueChange:"inputValueChange"},features:[K([M,Ge,fn,{provide:fe,useValue:"kendo.chat"}]),Me],decls:13,vars:19,consts:()=>{let e;e=$localize`:kendo.chat.deletedMessageSenderText|The text that is displayed when the sender deletes a message:You removed this message.`;let t;t=$localize`:kendo.chat.deletedMessageReceiverText|The text that is displayed when the receiver deletes a message:This message was removed by its sender.`;let n;n=$localize`:kendo.chat.messagePlaceholder|The placholder text of the message text input:Type a message...`;let s;s=$localize`:kendo.chat.send|The text for the Send button:Send...`;let a;a=$localize`:kendo.chat.messageListLabel|The label text for the Message list:Message list`;let p;p=$localize`:kendo.chat.messageBoxInputLabel|The label text for the Message input box:Message`;let A;A=$localize`:kendo.chat.messageAttachmentLeftArrow|The text for the left arrow of the message attachments:Previous item`;let x;x=$localize`:kendo.chat.messageAttachmentRightArrow|The text for the right arrow of the message attachments:Next item`;let U;U=$localize`:kendo.chat.speechToTextButtonTitle|Sets the Speech to Text button title.:Speech to Text`;let W;W=$localize`:kendo.chat.fileSelectButtonTitle|Sets the File Select button title.:Select files`;let re;re=$localize`:kendo.chat.removeReplyTitle|Sets the title of the icon which removes the reply reference in the Message Box.:Remove reply`;let Qe;Qe=$localize`:kendo.chat.removeFileTitle|Sets the title of the icon which removes a selected file in the Message Box.:Remove file`;let qe;qe=$localize`:kendo.chat.expandTitle|Sets the title of the icon which demonstrates that the message can be expanded.:Expand message`;let Xe;Xe=$localize`:kendo.chat.collapseTitle|Sets the title of the icon which demonstrates that the message can be collapsed.:Collapse message`;let Je;Je=$localize`:kendo.chat.fileActionsTitle|Sets the title of the DropDownButton which opens the File actions.:File actions`;let Ze;Ze=$localize`:kendo.chat.downloadAllFilesText|Sets the text that is displayed in the download section of the message.:Download all`;let Ye;Ye=$localize`:kendo.chat.previousSuggestionsButtonTitle|The title of the button that scrolls to the previous suggestions:Scroll left`;let et;return et=$localize`:kendo.chat.nextSuggestionsButtonTitle|The title of the button that scrolls to the next suggestions:Scroll right`,[["messageList","","anchor","scrollAnchor"],["chatMessageList",""],["messageBox",""],["messagesContextMenu",""],["kendoChatLocalizedMessages","","deletedMessageSenderText",e,"deletedMessageReceiverText",t,"messagePlaceholder",n,"send",s,"messageListLabel",a,"messageBoxInputLabel",p,"messageAttachmentLeftArrow",A,"messageAttachmentRightArrow",x,"speechToTextButtonTitle",U,"fileSelectButtonTitle",W,"removeReplyTitle",re,"removeFileTitle",Qe,"expandTitle",qe,"collapseTitle",Xe,"fileActionsTitle",Je,"downloadAllFilesText",Ze,"previousSuggestionsButtonTitle",Ye,"nextSuggestionsButtonTitle",et],["class","k-chat-header","positionMode","sticky","themeColor","inherit",4,"ngIf"],["class","k-message-reference k-message-reference-receiver k-message-pinned",3,"click",4,"ngIf"],["aria-live","polite","role","log","kendoChatScrollAnchor","",1,"k-message-list",3,"autoScrollChange","autoScroll"],["class","k-message-list-content k-message-list-content-empty",4,"ngIf","ngIfElse"],[3,"sendMessage","executeSuggestion","fileSelect","fileRemove","messageBoxTemplate","suggestionTemplate","suggestions","placeholder","authorId","autoScroll","inputValue","localization"],[3,"popupClose","select","items","popupAlign","collision"],["positionMode","sticky","themeColor","inherit",1,"k-chat-header"],[4,"ngTemplateOutlet"],[1,"k-message-reference","k-message-reference-receiver","k-message-pinned",3,"click"],["size","xlarge","name","pin",3,"svgIcon"],[3,"message"],[1,"k-spacer"],["kendoButton","","fillMode","flat",3,"click","svgIcon"],[1,"k-message-list-content","k-message-list-content-empty"],[3,"ngTemplateOutlet"],[3,"executeAction","resize","navigate","messages","authorMessageContentTemplate","receiverMessageContentTemplate","messageContentTemplate","authorMessageTemplate","receiverMessageTemplate","messageTemplate","timestampTemplate","statusTemplate","userStatusTemplate","localization","attachmentTemplate","authorId"]]},template:function(t,n){if(t&1){let s=R();Q(0,4),h(1,fu,2,1,"kendo-appbar",5)(2,Au,5,3,"div",6),d(3,"div",7,0),ii("autoScrollChange",function(p){return m(s),ti(n.autoScroll,p)||(n.autoScroll=p),g(p)}),h(6,Su,2,1,"div",8)(7,Eu,1,13,"ng-template",null,1,pe),_(),d(9,"kendo-message-box",9,2),E("sendMessage",function(p){return m(s),g(n.sendMessage.emit(p))})("executeSuggestion",function(p){return m(s),g(n.suggestionExecute.emit(p))})("fileSelect",function(p){return m(s),g(n.fileSelect.emit(p))})("fileRemove",function(p){return m(s),g(n.fileRemove.emit(p))}),_(),d(11,"kendo-contextmenu",10,3),E("popupClose",function(p){return m(s),g(n.handleMenuClose(p))})("select",function(p){return m(s),g(n.onContextMenuAction(p.item.originalAction))}),_()}if(t&2){let s=Z(8);l(),r("ngIf",n.chatHeaderTemplate),l(),r("ngIf",n.pinnedMessage),l(),ei("autoScroll",n.autoScroll),N("aria-label",n.textFor("messageListLabel")),l(3),r("ngIf",n.processedMessages&&n.processedMessages.length===0)("ngIfElse",s),l(3),r("messageBoxTemplate",n.messageBoxTemplate)("suggestionTemplate",n.suggestionTemplate)("suggestions",n.suggestions)("placeholder",n.placeholder)("authorId",n.authorId)("autoScroll",n.autoScroll)("inputValue",n.inputValue)("localization",n.localizationText),l(2),r("items",n.contextMenuActions)("popupAlign",Ke(17,mu))("collision",Ke(18,gu))}},dependencies:[dp,pp,cp,rp,Sn,ms,ne,H,de,ae,_t],encapsulation:2})}return i})(),mp=(()=>{class i extends Bt{service;constructor(e){super(),this.service=e}get override(){return!0}static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275cmp=L({type:i,selectors:[["kendo-chat-messages"]],features:[K([{provide:Bt,useExisting:z(()=>i)}]),w],decls:0,vars:0,template:function(t,n){},encapsulation:2})}return i})(),gp=(()=>{class i{imageUrl;title;subtitle;actions;cssClass=!0;executeAction=new f;onClick(e){this.executeAction.next(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=L({type:i,selectors:[["kendo-chat-hero-card"]],hostVars:2,hostBindings:function(t,n){t&2&&G("k-card",n.cssClass)},inputs:{imageUrl:"imageUrl",title:"title",subtitle:"subtitle",actions:"actions"},outputs:{executeAction:"executeAction"},decls:6,vars:4,consts:[["class","k-card-image",3,"src",4,"ngIf"],[1,"k-card-body"],["class","k-card-title",4,"ngIf"],["class","k-card-subtitle",4,"ngIf"],[1,"k-card-actions","k-card-actions-vertical"],["class","k-card-action",4,"ngFor","ngForOf"],[1,"k-card-image",3,"src"],[1,"k-card-title"],[1,"k-card-subtitle"],[1,"k-card-action"],["kendoButton","","fillMode","flat",3,"click"]],template:function(t,n){t&1&&(h(0,Nu,1,1,"img",0),d(1,"div",1),h(2,Ou,2,1,"h5",2)(3,Cu,2,1,"h6",3),_(),d(4,"div",4),h(5,Ru,3,1,"span",5),_()),t&2&&(r("ngIf",n.imageUrl),l(2),r("ngIf",n.title),l(),r("ngIf",n.subtitle),l(2),r("ngForOf",n.actions))},dependencies:[H,oe,ae],encapsulation:2})}return i})(),zt=(()=>{class i extends ze{commandsButtonTitle;generateButtonTitle;speechToTextButtonTitle;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Fe(i)))(n||i)}})();static \u0275dir=D({type:i,inputs:{commandsButtonTitle:"commandsButtonTitle",generateButtonTitle:"generateButtonTitle",speechToTextButtonTitle:"speechToTextButtonTitle"},standalone:!1,features:[w]})}return i})(),ia=(()=>{class i extends zt{service;constructor(e){super(),this.service=e}static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275dir=D({type:i,selectors:[["","kendoInlineAIPromptLocalizedMessages",""]],features:[K([{provide:zt,useExisting:z(()=>i)}]),w]})}return i})(),To={popupAlign:{vertical:"top",horizontal:"left"},anchorAlign:{horizontal:"left",vertical:"bottom"},positionMode:"absolute",collision:{horizontal:"fit",vertical:"flip"},animate:!0,offset:{top:0,left:0},margin:{horizontal:0,vertical:0}},na=i=>i+(typeof i=="number"?"px":""),Ht=[{name:"copy",type:"button",icon:"copy",svgIcon:Be,text:"Copy",fillMode:"flat",themeColor:"primary",rounded:"medium"},{name:"retry",type:"button",icon:"arrow-rotate-cw",svgIcon:gi,text:"Retry",fillMode:"flat",themeColor:"primary",rounded:"medium"},{name:"discard",type:"button",icon:"cancel-outline",svgIcon:jn,text:"Discard",fillMode:"flat",themeColor:"base",rounded:"medium"}],hp=5,fp=1,xo=(()=>{class i{ngZone;renderer;element;localization;className=!0;get dirAttr(){return this.direction}get maxHeightStyle(){return this.calculateMeasurement(this.maxHeight)}get widthStyle(){return this.calculateMeasurement(this.width)}popupElement;promptValue="";placeholder;promptOutput;enableSpeechToText=!0;streaming=!1;width=550;maxHeight;appendTo;defaultOutputActions=Ht;set outputActions(e){this._outputActions=this.mergeWithDefaultActions(e)}get outputActions(){return this._outputActions}set promptCommands(e){this._promptCommands=e||[],this.commandMenuItems=this.transformCommands(e||[])}get promptCommands(){return this._promptCommands}outputTemplate;promptRequest=new f;commandExecute=new f;outputActionClick=new f;promptRequestCancel=new f;close=new f;promptValueChange=new f;onEscapeKey(e){e.key==="Escape"&&(this.streaming?(e.stopPropagation(),this.promptRequestCancel.emit()):this.close.emit())}textArea;contextMenu;calculateMeasurement=na;commandMenuIcon=Fn;sendIcon=vt;stopGenerationIcon=vi;isListening=!1;commandMenuItems=[];messages={};maxRows=hp;initialRows=fp;_outputActions=this.defaultOutputActions;_promptCommands=[];direction;localizationSubs=new Ae;subs=new Ae;constructor(e,t,n,s){this.ngZone=e,this.renderer=t,this.element=n,this.localization=s,Ce(jt),this.localization||(this.localization=Cn(M)),this.direction=this.localization?.rtl?"rtl":"ltr",this.localizationSubs.add(this.localization.changes.subscribe(({rtl:a})=>{this.direction=a?"rtl":"ltr"}))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{ge()&&setTimeout(()=>{this.subs.add(this.renderer.listen("document","click",e=>{this.outsideClickClose(e)}))})})}ngOnDestroy(){this.subs.unsubscribe(),this.localizationSubs.unsubscribe(),this.contextMenu?.hide()}focus(){this.textArea&&this.textArea.focus()}onActionClick(e){let t={action:e,output:this.promptOutput};this.outputActionClick.emit(t),this.handleDefaultActions(e)}handleDefaultActions(e){switch(e.name){case"copy":navigator.clipboard.writeText(this.promptOutput.output);break;case"retry":this.promptRequest.emit({prompt:this.promptOutput?.prompt,isRetry:!0});break;case"discard":this.close.emit();break}}handleSpeechResult(e){e.alternatives&&e.alternatives.length>0&&(ce(this.promptValue)||(this.promptValue=""),this.promptValue+=e.alternatives[0].transcript+" ")}onClick(e){this.commandExecute.next(e)}handlePromptValueChange(e){this.promptValue=e,this.promptValueChange.emit(e)}handleTextAreaKeydown(e){e.key==="Enter"&&!e.shiftKey&&!this.streaming&&(e.preventDefault(),this.handlePromptRequest())}onCommandButtonClick(e){e.preventDefault(),e.stopPropagation(),this.contextMenu&&this.contextMenu.show(this.popupElement)}onCommandClick(e){e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault());let t=q({},e.item.originalCommand);this.commandExecute.emit(t)}messageFor(e){return this.messages?.[e]?this.messages[e]:this.localization?.get(e)}handlePromptRequest(){if(this.streaming){this.promptRequestCancel.emit();return}if(!this.promptValue)return;let e={prompt:this.promptValue};this.promptRequest.emit(e)}mergeWithDefaultActions(e){return!e||e.length===0?[]:e.map(t=>{let n=Ht.find(s=>s.name===t?.name);return n?q(q({},n),t):t})}transformCommands=e=>e.map(t=>({text:t.text,icon:t.icon,svgIcon:t.svgIcon,disabled:t.disabled,originalCommand:t,items:t.children?this.transformCommands(t.children):void 0}));outsideClickClose(e){this.element.nativeElement.contains(e.target)||this.ngZone.run(()=>{this.close.emit()})}static \u0275fac=function(t){return new(t||i)(u(j),u(X),u(k),u(M,12))};static \u0275cmp=L({type:i,selectors:[["kendo-inlineaiprompt-content"]],viewQuery:function(t,n){if(t&1&&(P(He,5),P(Iu,5)),t&2){let s;O(s=C())&&(n.textArea=s.first),O(s=C())&&(n.contextMenu=s.first)}},hostVars:7,hostBindings:function(t,n){t&1&&E("keydown",function(a){return n.onEscapeKey(a)}),t&2&&(N("dir",n.dirAttr),Pe("max-height",n.maxHeightStyle)("width",n.widthStyle),G("k-prompt",n.className))},inputs:{popupElement:"popupElement",promptValue:"promptValue",placeholder:"placeholder",promptOutput:"promptOutput",enableSpeechToText:"enableSpeechToText",streaming:"streaming",width:"width",maxHeight:"maxHeight",appendTo:"appendTo",outputActions:"outputActions",promptCommands:"promptCommands",outputTemplate:"outputTemplate"},outputs:{promptRequest:"promptRequest",commandExecute:"commandExecute",outputActionClick:"outputActionClick",promptRequestCancel:"promptRequestCancel",close:"close",promptValueChange:"promptValueChange"},exportAs:["kendoInlineAIPromptContent"],features:[K([M,{provide:fe,useValue:"kendo.inlineaiprompt"}])],decls:12,vars:20,consts:()=>{let e;e=$localize`:kendo.inlineaiprompt.commandsButtonTitle|Sets the Commands button title.:Command Menu`;let t;t=$localize`:kendo.inlineaiprompt.generateButtonTitle|Sets the Generate button title.:Generate`;let n;return n=$localize`:kendo.inlineaiprompt.speechToTextButtonTitle|Sets the Speech to Text button title.:Speech to Text`,[["kendoContextMenu",""],["commandMenuButton",""],["kendoInlineAIPromptLocalizedMessages","","commandsButtonTitle",e,"generateButtonTitle",t,"speechToTextButtonTitle",n],[1,"k-prompt-content"],[1,"k-prompt-view"],["width","100%",4,"ngIf"],["resizable","auto","flow","horizontal",3,"valueChange","keydown","value","rows","placeholder","showPrefixSeparator","selectOnFocus","maxResizableRows"],["kendoButton","","fillMode","flat","icon","menu",3,"svgIcon","click",4,"ngIf"],["kendoSpeechToTextButton","","fillMode","flat",3,"result","start","end",4,"ngIf"],["kendoButton","","fillMode","flat",1,"k-prompt-send",3,"click","ngClass","disabled","svgIcon","icon"],[1,"k-hidden",3,"select","alignToAnchor","items","appendTo"],["width","100%"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],["kendoButton","",3,"fillMode","themeColor","rounded","icon","svgIcon","click",4,"ngIf"],["class","k-spacer",4,"ngIf"],["kendoButton","",3,"click","fillMode","themeColor","rounded","icon","svgIcon"],[1,"k-spacer"],["kendoButton","","fillMode","flat","icon","menu",3,"click","svgIcon"],["kendoSpeechToTextButton","","fillMode","flat",3,"result","start","end"]]},template:function(t,n){if(t&1){let s=R();Q(0,2),d(1,"div",3)(2,"div",4),h(3,ku,5,3,"kendo-card",5),d(4,"kendo-textarea",6),E("valueChange",function(p){return m(s),g(n.handlePromptValueChange(p))})("keydown",function(p){return m(s),g(n.handleTextAreaKeydown(p))}),d(5,"kendo-textarea-prefix"),h(6,Uu,2,2,"button",7)(7,wu,1,1,"button",8),_(),d(8,"kendo-textarea-suffix")(9,"button",9),E("click",function(){return m(s),g(n.handlePromptRequest())}),_()()()()(),d(10,"kendo-contextmenu",10,0),E("select",function(p){return m(s),g(n.onCommandClick(p))}),_()}t&2&&(l(3),r("ngIf",n.promptOutput),l(),r("value",n.promptValue?n.promptValue:null)("rows",n.initialRows)("placeholder",n.placeholder)("showPrefixSeparator",!0)("selectOnFocus",!0)("maxResizableRows",n.maxRows),l(2),r("ngIf",n.promptCommands&&n.promptCommands.length>0),l(),r("ngIf",n.enableSpeechToText),l(2),r("ngClass",Se(17,Mu,n.streaming,n.streaming))("disabled",!n.streaming&&(!(n.promptValue!=null&&n.promptValue.trim())||n.isListening))("svgIcon",n.streaming?n.stopGenerationIcon:n.sendIcon)("icon",n.streaming?"stop-sm":"paper-plane"),N("title",n.messageFor("generateButtonTitle")),l(),r("alignToAnchor",!0)("items",n.commandMenuItems)("appendTo",n.appendTo))},dependencies:[Oe,H,oe,ne,ia,ae,at,He,Rt,rt,_t,vs,Es,Ss],encapsulation:2})}return i})(),sa=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(u(B,8))};static \u0275dir=D({type:i,selectors:[["","kendoInlineAIPromptOutputTemplate",""]]})}return i})(),Ap=(()=>{class i{ngZone;element;promptValue="";placeholder;promptOutput;enableSpeechToText=!0;streaming=!1;width=550;maxHeight;defaultOutputActions=Ht;outputActions=Ht;promptCommands;set popupSettings(e){this._popupSettings=q(q({},To),e)}get popupSettings(){return this._popupSettings}promptRequest=new f;commandExecute=new f;outputActionClick=new f;promptRequestCancel=new f;close=new f;promptValueChange=new f;popupElement;popupViewContainer;contentComponent;outputTemplate;calculateMeasurement=na;_popupSettings=To;subs=new Ae;constructor(e,t){this.ngZone=e,this.element=t,Ce(jt)}ngAfterViewInit(){this.contentComponent&&this.popupElement&&(this.contentComponent.popupElement=this.popupElement),this.ngZone.onStable.pipe(it(1)).subscribe(()=>{this.contentComponent&&this.popupViewContainer&&(this.contentComponent.appendTo=this.popupViewContainer)})}ngOnDestroy(){this.subs.unsubscribe()}focus(){this.contentComponent?.textArea&&this.contentComponent.textArea.focus()}onPromptRequest(e){this.promptRequest.emit(e)}onCommandExecute(e){this.commandExecute.emit(e)}onOutputActionClick(e){this.outputActionClick.emit(e)}onPromptRequestCancel(){this.promptRequestCancel.emit()}onClose(){this.close.emit()}onPromptValueChange(e){this.promptValueChange.emit(e)}static \u0275fac=function(t){return new(t||i)(u(j),u(k))};static \u0275cmp=L({type:i,selectors:[["kendo-inlineaiprompt"]],contentQueries:function(t,n,s){if(t&1&&F(s,sa,5),t&2){let a;O(a=C())&&(n.outputTemplate=a.first)}},viewQuery:function(t,n){if(t&1&&(P(ot,5,k),P(ot,5,qt),P(xo,5)),t&2){let s;O(s=C())&&(n.popupElement=s.first),O(s=C())&&(n.popupViewContainer=s.first),O(s=C())&&(n.contentComponent=s.first)}},inputs:{promptValue:"promptValue",placeholder:"placeholder",promptOutput:"promptOutput",enableSpeechToText:"enableSpeechToText",streaming:"streaming",width:"width",maxHeight:"maxHeight",outputActions:"outputActions",promptCommands:"promptCommands",popupSettings:"popupSettings"},outputs:{promptRequest:"promptRequest",commandExecute:"commandExecute",outputActionClick:"outputActionClick",promptRequestCancel:"promptRequestCancel",close:"close",promptValueChange:"promptValueChange"},exportAs:["kendoInlineAIPrompt"],features:[K([M,{provide:fe,useValue:"kendo.inlineaiprompt"}])],decls:3,vars:22,consts:()=>{let e;e=$localize`:kendo.inlineaiprompt.commandsButtonTitle|Sets the Commands button title.:Command Menu`;let t;t=$localize`:kendo.inlineaiprompt.generateButtonTitle|Sets the Generate button title.:Generate`;let n;return n=$localize`:kendo.inlineaiprompt.speechToTextButtonTitle|Sets the Speech to Text button title.:Speech to Text`,[["kendoInlineAIPromptLocalizedMessages","","commandsButtonTitle",e,"generateButtonTitle",t,"speechToTextButtonTitle",n],[3,"anchor","anchorAlign","offset","popupAlign","animate","collision","positionMode","margin","popupClass"],[3,"promptRequest","commandExecute","outputActionClick","promptRequestCancel","close","promptValueChange","promptValue","placeholder","promptOutput","enableSpeechToText","streaming","maxHeight","outputActions","promptCommands","outputTemplate"]]},template:function(t,n){t&1&&(Q(0,0),d(1,"kendo-popup",1)(2,"kendo-inlineaiprompt-content",2),E("promptRequest",function(a){return n.onPromptRequest(a)})("commandExecute",function(a){return n.onCommandExecute(a)})("outputActionClick",function(a){return n.onOutputActionClick(a)})("promptRequestCancel",function(){return n.onPromptRequestCancel()})("close",function(){return n.onClose()})("promptValueChange",function(a){return n.onPromptValueChange(a)}),_()()),t&2&&(l(),Pe("width",n.calculateMeasurement(n.width)),r("anchor",n.popupSettings==null?null:n.popupSettings.anchor)("anchorAlign",n.popupSettings==null?null:n.popupSettings.anchorAlign)("offset",n.popupSettings==null?null:n.popupSettings.offset)("popupAlign",n.popupSettings==null?null:n.popupSettings.popupAlign)("animate",n.popupSettings==null?null:n.popupSettings.animate)("collision",n.popupSettings==null?null:n.popupSettings.collision)("positionMode",n.popupSettings==null?null:n.popupSettings.positionMode)("margin",n.popupSettings==null?null:n.popupSettings.margin)("popupClass",(n.popupSettings==null?null:n.popupSettings.popupClass)||"k-prompt-popup"),l(),Pe("width",n.width),r("promptValue",n.promptValue)("placeholder",n.placeholder)("promptOutput",n.promptOutput)("enableSpeechToText",n.enableSpeechToText)("streaming",n.streaming)("maxHeight",n.maxHeight)("outputActions",n.outputActions)("promptCommands",n.promptCommands)("outputTemplate",n.outputTemplate==null?null:n.outputTemplate.templateRef))},dependencies:[ot,xo,ia],encapsulation:2})}return i})(),vp=(()=>{class i extends zt{service;constructor(e){super(),this.service=e}get override(){return!0}static \u0275fac=function(t){return new(t||i)(u(M))};static \u0275cmp=L({type:i,selectors:[["kendo-inlineaiprompt-messages"]],features:[K([{provide:zt,useExisting:z(()=>i)}]),w],decls:0,vars:0,template:function(t,n){},encapsulation:2})}return i})(),Sp=[Ku,$u,ju,Vu,zu,Bu,yo,ko,Uo,wo],Ep=[_p,mp,Go,Qo,qo,Ho,Jo,Xo,Wo,gp,Fo,ea,ta,jo,$o,zo,Yo],Np=[Ap,sa,vp],l_=[...Sp,...Ep,...Np];export{Uo as a,wo as b,Ku as c,Bu as d,ju as e,$u as f,_p as g};
