import{p as Ht,s as Ut,t as $t}from"./chunk-5WUEOOI5.js";import{Cb as Kt,Cc as _e,Eb as jt,Fb as K,Kb as D,Lb as Ne,Nb as Gt,Ob as j,Pb as L,Qb as W,Rb as w,Va as Lt,Wa as zt,Xa as Pt,a as Rt,b as Ei,ea as At,ka as Ft,mc as R,n as je,o as Ge,p as He,va as Bt}from"./chunk-JUZ3M5FN.js";import{$a as oe,$b as St,Ab as Se,Cb as xt,Da as v,Dc as _t,E as ht,Ea as Ce,Ec as Tt,F,Fc as he,Ga as se,Gb as De,Gc as Mt,Hb as p,Hc as Et,Ic as Vt,K as ut,Kc as we,Mb as le,Nb as Le,O as Ae,Ob as z,P as pt,Pb as P,Qb as It,R as ft,Ra as m,Rb as ye,Sa as re,Sb as Ct,Tb as ze,Uc as Ot,Va as ae,Vc as Pe,Wa as l,Xc as ue,Ya as bt,Zb as ke,_ as Fe,_c as Ke,a as U,aa as mt,ac as Dt,b as dt,bb as x,bc as yt,ca as ve,cc as kt,db as de,ea as Ti,eb as C,ga as Mi,h as E,ia as be,ja as y,jb as V,kb as u,lb as ce,m as k,mb as _,n as ct,oa as gt,pc as wt,q as lt,qc as X,s as $,ua as N,ub as T,va as xe,vb as O,w as Re,wa as Ie,wb as B,wc as Nt,xb as Q,yb as Z,za as vt,zb as Be}from"./chunk-KVYG4BGC.js";Nt();Nt();Ti();Ei();Mi();var Vi=["kendoTreeViewGroup",""],Oi=(i,s)=>({$implicit:i,index:s}),Ri=i=>({index:i});function Ai(i,s){if(i&1){let e=Se();T(0,"span",13),De("click",function(){xe(e);let n=p(),r=n.$implicit,a=n.index,d=p();return Ie(d.expandNode(d.nodeIndex(a),r,!d.isExpanded(r,d.nodeIndex(a))))}),B(1,"kendo-icon-wrapper",14),O()}if(i&2){let e=p(),t=e.$implicit,n=e.index,r=p();_("k-disabled",!r.isItemExpandable(t,n)),u("kendoTreeViewLoading",r.nodeIndex(n)),m(),u("name",r.getFontIcon(t,r.nodeIndex(n)))("svgIcon",r.getSvgIcon(t,r.nodeIndex(n)))}}function Fi(i,s){if(i&1){let e=Se();T(0,"kendo-checkbox",15,0),De("checkedStateChange",function(){xe(e);let n=It(1),r=p().index,a=p();return Ie(a.checkNode(a.nodeIndex(r),n))}),O()}if(i&2){let e=p(),t=e.$implicit,n=e.index,r=p();u("disabled",r.isItemDisabled(t,n))("size",r.size)("checkedState",r.getCheckBoxState(t,r.nodeIndex(n)))("tabindex",-1)("inputAttributes",r.getCheckboxAttributes(n))}}function Bi(i,s){}function Li(i,s){if(i&1&&(Q(0),C(1,Bi,0,0,"ng-template",16),Z()),i&2){let e=p(),t=e.$implicit,n=e.index,r=p();m(),u("ngTemplateOutlet",r.nodeTemplateRef)("ngTemplateOutletContext",Dt(2,Oi,t,r.nodeIndex(n)))}}function zi(i,s){if(i&1&&(Q(0),ye(1),Z()),i&2){let e=p().$implicit,t=p();m(),ze(" ",t.nodeText(e)," ")}}function Pi(i,s){if(i&1&&B(0,"ul",17),i&2){let e=p(),t=e.$implicit,n=e.index,r=p();u("size",r.size)("nodes",r.fetchChildren)("loadOnDemand",r.loadOnDemand)("checkboxes",r.checkboxes)("expandIcons",r.expandIcons)("selectable",r.selectable)("touchActions",r.touchActions)("children",r.children)("hasChildren",r.hasChildren)("isChecked",r.isChecked)("isDisabled",r.isDisabled)("hasCheckbox",r.hasCheckbox)("disabled",r.isItemDisabled(t,n))("expandDisabledNodes",r.expandDisabledNodes)("isExpanded",r.isExpanded)("isSelected",r.isSelected)("isVisible",r.isVisible)("nodeTemplateRef",r.nodeTemplateRef)("loadMoreButtonTemplateRef",r.loadMoreButtonTemplateRef)("parentIndex",r.nodeIndex(n))("parentDataItem",t)("textField",r.nextFields)("loadMoreService",r.loadMoreService)("@toggle",!0)("trackBy",r.trackBy)("disableParentNodesOnly",r.disableParentNodesOnly)}}function Ki(i,s){if(i&1&&(T(0,"li",3)(1,"div",4),C(2,Ai,2,5,"span",5)(3,Fi,2,5,"kendo-checkbox",6),T(4,"span",7)(5,"span",8),Q(6,9),C(7,Li,2,5,"ng-container",10)(8,zi,2,1,"ng-container",11),Z(),O()()(),C(9,Pi,1,26,"ul",12),O()),i&2){let e=s.$implicit,t=s.index,n=p();_("k-hidden",!n.isVisible(e,n.nodeIndex(t))),u("dataItem",e)("index",n.nodeIndex(t))("parentDataItem",n.parentDataItem)("parentIndex",n.parentIndex)("loadOnDemand",n.loadOnDemand)("checkable",n.checkboxes)("isChecked",n.isChecked(e,n.nodeIndex(t)))("isDisabled",n.isItemDisabled(e,t))("isVisible",n.isVisible(e,n.nodeIndex(t)))("expandable",n.expandIcons&&n.hasChildren(e))("isExpanded",n.isExpanded(e,n.nodeIndex(t)))("selectable",n.selectable)("isSelected",n.isSelected(e,n.nodeIndex(t))),V("aria-setsize",n.totalNodesCount)("data-treeindex",n.nodeIndex(t)),m(),u("ngClass",n.setItemClasses(n.data.length,t)),m(),u("ngIf",n.expandIcons&&n.hasChildren(e)),m(),u("ngIf",n.checkboxes&&n.hasCheckbox(e,n.nodeIndex(t))),m(),ce("touch-action",n.touchActions?"":"none"),_("k-disabled",n.isItemDisabled(e,t)),u("id",n.nodeIndex(t))("dataItem",e)("index",n.nodeIndex(t))("initialSelection",n.isSelected(e,n.nodeIndex(t)))("isSelected",n.isSelected),V("data-treeindex",n.nodeIndex(t)),m(2),u("ngSwitch",n.hasTemplate),m(),u("ngSwitchCase",!0),m(2),u("ngIf",n.isExpanded(e,n.nodeIndex(t))&&n.hasChildren(e))}}function ji(i,s){i&1&&B(0,"span",23)}function Gi(i,s){}function Hi(i,s){if(i&1&&C(0,Gi,0,0,"ng-template",16),i&2){let e=p(2);u("ngTemplateOutlet",e.loadMoreButtonTemplateRef)("ngTemplateOutletContext",St(2,Ri,e.loadMoreButtonIndex))}}function Ui(i,s){if(i&1&&(Q(0),ye(1),Z()),i&2){let e=p(2);m(),ze(" ",e.loadMoreTitle," ")}}function $i(i,s){if(i&1&&(T(0,"li",18)(1,"div",19),C(2,ji,1,0,"span",20),T(3,"span",21)(4,"span",8),C(5,Hi,1,4,null,22)(6,Ui,2,1,"ng-container",22),O()()()()),i&2){let e=p();_("k-treeview-load-more-checkboxes-container",e.checkboxes),u("selectable",!1)("checkable",!1)("expandable",!1)("index",e.loadMoreButtonIndex)("parentDataItem",e.parentDataItem)("parentIndex",e.parentIndex),V("data-treeindex",e.loadMoreButtonIndex),m(2),u("ngIf",e.loadingMoreNodes),m(),u("index",e.loadMoreButtonIndex),V("data-treeindex",e.loadMoreButtonIndex),m(2),u("ngIf",e.loadMoreButtonTemplateRef),m(),u("ngIf",!e.loadMoreButtonTemplateRef)}}var Qi=["assetsContainer"],Zi=["searchbox"];function Xi(i,s){if(i&1&&B(0,"kendo-icon-wrapper",8),i&2){let e=p(2);u("svgIcon",e.searchIcon)}}function Wi(i,s){if(i&1){let e=Se();T(0,"span",5)(1,"kendo-textbox",6,1),De("valueChange",function(n){xe(e);let r=p();return Ie(r.filterChange.emit(n))}),C(3,Xi,1,1,"ng-template",7),O()()}if(i&2){let e=p();m(),u("size",e.size)("value",e.filter)("clearButton",!0)("placeholder",e.filterInputPlaceholder)}}var qi=(i,s,e,t)=>({text:i,action:s,sourceItem:e,destinationItem:t});function Yi(i,s){if(i&1&&(Q(0),B(1,"kendo-icon-wrapper",1),T(2,"span"),ye(3),O(),Z()),i&2){let e=p();m(),u("name",e.statusIconClass)("svgIcon",e.statusSVGIcon),m(2),Ct(e.text)}}function Ji(i,s){}function en(i,s){if(i&1&&C(0,Ji,0,0,"ng-template",2),i&2){let e=p();u("ngTemplateOutlet",e.template)("ngTemplateOutletContext",kt(2,qi,e.text,e.action,e.sourceItem,e.destinationItem))}}var tn=(i,s,e)=>({action:i,sourceItem:s,destinationItem:e});function nn(i,s){i&1&&(T(0,"div",2),B(1,"div",3)(2,"div",4),O())}function sn(i,s){}function rn(i,s){i&1&&C(0,sn,0,0,"ng-template")}function an(i,s){if(i&1&&C(0,rn,1,0,"ng-template",5),i&2){let e=p();u("ngTemplateOutlet",e.template)("ngTemplateOutletContext",yt(2,tn,e.action,e.sourceItem,e.destinationItem))}}var on={name:"@progress/kendo-angular-treeview",productName:"Kendo UI for Angular",productCode:"KENDOUIANGULAR",productCodes:["KENDOUIANGULAR"],publishDate:1745303933,version:"18.5.2",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/"},pe=class{changes=new v;notify(){this.changes.emit()}},dn=()=>!1,cn=()=>"none",ln=()=>!1,hn=()=>!0,un=()=>!0,ci=()=>!1,li=()=>!0,pn=(i,s)=>s,ge=(()=>{class i{changes=new k;expand(e,t){this.changes.next({dataItem:t,index:e,expand:!0})}collapse(e,t){this.changes.next({dataItem:t,index:e,expand:!1})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),te=(()=>{class i{INDEX_SEPARATOR="_";nodeIndex(e="",t=""){return`${t}${t?this.INDEX_SEPARATOR:""}${e}`}indexForLevel(e,t){return e.split(this.INDEX_SEPARATOR).slice(0,t).join(this.INDEX_SEPARATOR)}lastLevelIndex(e=""){let t=e.split(this.INDEX_SEPARATOR);return t.length?parseInt(t[t.length-1],10):NaN}level(e){return e.split(this.INDEX_SEPARATOR).length}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),st=(()=>{class i{changes=new k;notifyLoaded(e){this.changes.next(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),fn=/^(?:a|input|select|option|textarea|button|object)$/i,H=(i,s)=>{let e=i.matches||i.msMatchesSelector||i.webkitMatchesSelector;return e?e.call(i,s.toLowerCase()):!1},Y=(i,s)=>{if(!document.documentElement.contains(i))return null;let e=i;for(;e!==null&&e.nodeType===1;){if(H(e,s))return e;e=e.parentElement||e.parentNode}return null},hi=()=>{},o=i=>i!=null,ui=i=>i==null,Qt=i=>Array.isArray(i),mn=i=>ui(i)||i.trim().length===0,rt=i=>typeof i=="boolean",J=i=>{let s="li.k-treeview-item";return j()?i.closest?i.closest(s):Y(i,s):null},Zt=i=>{if(i.tagName){let s=i.tagName.toLowerCase(),e=i.getAttribute("tabIndex"),t=e==="-1",n=e!==null&&!t;return fn.test(s)&&(n=!i.disabled&&!t),n}return!1},at=i=>{let s=".k-treeview-leaf:not(.k-treeview-load-more-button),.k-treeview-item,.k-treeview";if(!j())return null;let e=i;for(;e&&!H(e,s);)e=e.parentNode;if(e)return H(e,".k-treeview-leaf:not(.k-treeview-load-more-button)")},gn=i=>{if(!o(i))return null;let s=".k-treeview-leaf:not(.k-treeview-load-more-button)";return H(i,s)?i:i.querySelector(s)},Xt=i=>o(Y(i,".k-treeview-leaf.k-treeview-load-more-button")),vn=(i,s)=>{for(;i&&!s(i);)i=i.parentNode;return i},We=(i,s)=>!!vn(i,e=>e===s),Wt=i=>i.nativeElement.querySelector('li[tabindex="0"]');var qe=i=>i?i.getAttribute("data-treeindex"):"",M=i=>(i||{}).index,Te=(i,s)=>!o(i)&&!o(s)?!0:o(i)&&o(s)&&i.item.dataItem===s.item.dataItem,g=i=>o(i)?i.item.dataItem:i,q=i=>i&&Array.isArray(i)&&i.length!==0,pi=(i,s,{operator:e,ignoreCase:t,mode:n},r,a=0)=>{let d=typeof r=="string"?r:r[a];i.forEach(c=>{let f=(typeof e=="string"?In(d,e,t):e)(c.dataItem,s);c.isMatch=f,c.visible=f,c.containsMatches=!1,f&&fi(c.parent),c.children&&c.children.length>0&&(n==="strict"||!f?pi(c.children,s,{operator:e,ignoreCase:t,mode:n},r,a+1):mi(c.children))})},fi=i=>{o(i)&&(i.containsMatches=!0,i.visible=!0,o(i.parent)&&!i.parent.containsMatches&&fi(i.parent))},mi=i=>{i.forEach(s=>{s.visible=!0,s.children&&mi(s.children)})},bn={contains:(i,s)=>i.indexOf(s)>=0,doesnotcontain:(i,s)=>i.indexOf(s)===-1,startswith:(i,s)=>i.lastIndexOf(s,0)===0,doesnotstartwith:(i,s)=>i.lastIndexOf(s,0)===-1,endswith:(i,s)=>i.indexOf(s,i.length-s.length)>=0,doesnotendwith:(i,s)=>i.indexOf(s,i.length-s.length)<0},xn=(i,s)=>(e,t)=>s?i(e.toLowerCase(),t.toLowerCase()):i(e,t),In=(i,s,e)=>(t,n)=>xn(bn[s],e)(D(i)(t),n),fe=(i,s)=>[i,s].filter(e=>o(e)).join("_"),Cn=(i,s,e)=>o(i)?{dataItem:i,index:fe(e,s)}:null,gi=(i,s)=>{if(!o(i)||i.children.length===0)return[];let e=i.children;return o(s)&&(e=e.filter(s)),e.forEach(t=>e=e.concat(gi(t,s))),e},qt=(i,s)=>i.size!==s.size?!1:Array.from(i).every(e=>s.has(e)),Ue=(i,s)=>({small:`k-${i}-sm`,medium:`k-${i}-md`,large:`k-${i}-lg`})[s],Ye=i=>i||{},$e=i=>Ye(i).children||[],Qe=i=>{if(!Array.isArray(i)||i.length===0)return null;let e=i.length-1;for(let t=e;t>=0;t-=1){let n=i[t];if(n.visible)return n}return null},Je=class{ib=new te;nodes=[];firstVisibleNode(){return(this.nodes||[]).find(s=>s.visible)}lastVisibleNode(){let s=Qe(this.nodes);for(;o(s)&&$e(s).length>0;){let e=$e(s),t=Qe(e);if(!o(t))return s;s=t}return s}closestNode(s){let{prev:e}=Ye(this.findNode(s)),t=e||this.firstVisibleNode();return Ye(t).index===s?this.visibleSibling(t,1):t}firstFocusableNode(){return this.nodes.find(s=>!s.disabled&&s.visible)}findNode(s){return this.find(s,this.nodes)}findParent(s){let e=this.ib.level(s)-1;return this.findNode(this.ib.indexForLevel(s,e))}findVisibleChild(s){let e=this.findNode(s);return $e(e).find(n=>n.visible)}findVisiblePrev(s){let e=s.index,t=this.findParent(e),n=this.ib.lastLevelIndex(e),a=this.container(t).slice(0,n).every(h=>!h.visible);if(n===0||a)return t;let d=this.findNode(e),c=this.visibleSibling(d,-1);if(c){let h=this.container(c);for(;h.length>0&&h.some(f=>f.visible);)c=Qe(h),h=this.container(c)}return c}findVisibleNext(s){let e=this.container(s),t=e.some(n=>n.visible);return e.length===0||!t?this.visibleSibling(s,1):e.find(n=>n.visible)}registerItem(s,e,t,n=!1,r=!0){let a=[],d=this.ib.level(e),c=this.findParent(e);if(c||d===1){let h={id:s,children:a,index:e,parent:c,disabled:t,loadMoreButton:n,visible:r};this.insert(h,c)}}unregisterItem(s,e){let t=this.find(e,this.nodes);if(!t||t.id!==s)return;let n=this.container(t.parent);n.splice(n.indexOf(t),1)}childLevel(s){let e=s.filter(t=>o(t));return!e||!e.length?1:this.ib.level(e[0].index)}container(s){return s?s.children:this.nodes}find(s,e){let t=this.childLevel(e),n=this.ib.indexForLevel(s,t),r=t===this.ib.level(s),a=e.find(d=>d&&d.index===n);return a?r?a:this.find(s,a.children):null}insert(s,e){this.container(e).splice(this.ib.lastLevelIndex(s.index),0,s)}visibleSibling(s,e){if(!s)return null;let t=this.findParent(s.index),n=this.container(t),r=n.indexOf(s)+e,a=n[r];for(;o(a);){if(a.visible)return a;r+=e,a=n[r]}return this.visibleSibling(t,e)}},ie=(()=>{class i{localization;expands=new k;moves=new k;checks=new k;selects=new k;deselectAllButCurrentItem=new k;loadMore=new k;navigable=!0;selection="single";isTreeViewActive=!1;get model(){return this._model}set model(e){this._model=e}actions={[R.ArrowUp]:()=>this.activate(this.model.findVisiblePrev(this.focusableItem),!0),[R.ArrowDown]:()=>this.activate(this.model.findVisibleNext(this.focusableItem),!0),[R.ArrowLeft]:()=>!this.isLoadMoreButton&&this.expand({expand:this.localization.rtl,intercept:this.localization.rtl?this.moveToFirstVisibleChild:this.moveToParent}),[R.ArrowRight]:()=>!this.isLoadMoreButton&&this.expand({expand:!this.localization.rtl,intercept:this.localization.rtl?this.moveToParent:this.moveToFirstVisibleChild}),[R.Home]:()=>this.activate(this.model.firstVisibleNode(),!0),[R.End]:()=>this.activate(this.model.lastVisibleNode(),!0),[R.Enter]:e=>this.handleEnter(e),[R.Space]:()=>this.handleSpace()};activeItem;isFocused=!1;shouldScroll=!1;_model=new Je;get activeIndex(){return M(this.activeItem)||null}get isActiveExpanded(){return this.activeItem&&this.activeItem.children.length>0}get isLoadMoreButton(){return this.activeItem&&this.activeItem.loadMoreButton}get focusableItem(){return this.activeItem||this.model.firstFocusableNode()}constructor(e){this.localization=e,this.moveToFirstVisibleChild=this.moveToFirstVisibleChild.bind(this),this.moveToParent=this.moveToParent.bind(this)}activate(e,t=!1){!this.navigable||!e||this.isActive(M(e))||(this.isFocused=!0,this.activeItem=e||this.activeItem,this.shouldScroll=t,this.notifyMove())}activateParent(e){this.activate(this.model.findParent(e))}activateIndex(e){e&&this.activate(this.model.findNode(e))}activateClosest(e){!e||M(this.focusableItem)!==e||(this.activeItem=this.model.closestNode(e),this.notifyMove())}activateFocusable(){this.activeItem||(this.activeItem=this.model.firstVisibleNode(),this.notifyMove())}deactivate(){!this.navigable||!this.isFocused||(this.isFocused=!1,this.notifyMove())}checkIndex(e){this.isDisabled(e)||this.checks.next(e)}selectIndex(e){this.isDisabled(e)||this.selects.next(e)}notifyLoadMore(e){o(e)&&this.loadMore.next(e)}isActive(e){return e?this.isFocused&&this.activeIndex===e:!1}isFocusable(e){return M(this.focusableItem)===e}isDisabled(e){return e?this.model.findNode(e).disabled:!1}registerItem(e,t,n,r=!1,a=!0){let d=this.model.findNode(t);o(d)&&(this.model.unregisterItem(d.id,d.index),this.isActive(t)&&this.deactivate()),this.model.registerItem(e,t,n,r,a)}updateItem(e,t,n=!0){let r=this.model.findNode(e);o(r)&&this.isActive(e)&&this.deactivate(),r.disabled=t,r.visible=n}unregisterItem(e,t){this.isActive(t)&&this.activateParent(t),this.model.unregisterItem(e,t)}move(e){if(!this.navigable)return;let t=this.actions[e.keyCode];t&&(t(e),e.preventDefault())}expand({expand:e,intercept:t}){let n=M(this.activeItem);!n||t(n)||this.notifyExpand(e)}moveToParent(){return this.isActiveExpanded?!1:(this.activate(this.model.findParent(M(this.activeItem))),!0)}moveToFirstVisibleChild(){return this.isActiveExpanded?(this.activate(this.model.findVisibleChild(M(this.activeItem))),!0):!1}notifyExpand(e){this.expands.next(this.navigationState(e))}notifyMove(){this.moves.next(this.navigationState())}navigationState(e=!1){return{expand:e,index:this.activeIndex,isFocused:this.isFocused,shouldScroll:this.shouldScroll}}handleEnter(e){this.navigable&&(this.isLoadMoreButton?this.notifyLoadMore(this.activeIndex):e.ctrlKey||e.metaKey?this.selectIndex(this.activeIndex):this.selection==="multiple"?this.deselectAllButCurrentItem.next({dataItem:this.activeItem,index:this.activeIndex}):this.selectIndex(this.activeIndex))}handleSpace(){this.navigable&&(this.isLoadMoreButton?this.notifyLoadMore(this.activeIndex):this.checkIndex(this.activeIndex))}static \u0275fac=function(t){return new(t||i)(gt(K))};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),ot=(()=>{class i{changes=new k;childrenLoaded(e,t){this.changes.next({item:e,children:t})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),Sn=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(l(re,8))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewNodeTemplate",""]]})}return i})(),Dn=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(l(re,8))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewLoadMoreButtonTemplate",""]]})}return i})(),Ee=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),vi=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),Ve=(()=>{class i{changes=new k;firstIndex;isFirstSelected(e){return this.firstIndex===e}setFirstSelected(e,t){this.firstIndex===e&&t===!1?this.firstIndex=null:!this.firstIndex&&t&&(this.firstIndex=e)}select(e,t){this.changes.next({dataItem:t,index:e})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),yn=/\d+$/,Oe=(()=>{class i{map=new Map;reset(){this.map.clear()}registerItem(e,t){let n={children:[],item:e,parent:this.item(M(t))};this.map.set(e.index,n)}registerChildren(e,t){let n=this.item(e);n&&(n.children=t)}unregisterItem(e,t){let n=this.item(e);n&&n.item.dataItem===t&&(this.map.delete(e),n.parent&&n.parent.children&&(n.parent.children=n.parent.children.filter(r=>r.dataItem!==t)))}replaceItem(e,t,n){t&&(this.unregisterItem(e,t.dataItem),this.registerItem(t,n),this.addToParent(t,n))}itemLookup(e){let t=this.item(e);return t?{children:this.mapChildren(t.children),item:t.item,parent:t.parent}:null}hasItem(e){return this.map.has(e)}item(e){return this.map.get(e)||null}addToParent(e,t){if(t){let n=this.item(t.index),r=parseInt(yn.exec(e.index)[0],10);n.children=n.children||[],n.children.splice(r,0,e)}}mapChildren(e=[]){return e.map(t=>{let{item:n,parent:r,children:a}=this.item(t.index);return{children:this.mapChildren(a),item:n,parent:r}})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),kn=(()=>{class i{element;navigationService;selectionService;renderer;dataItem;index;initialSelection=!1;isSelected=ci;subscriptions=new E;constructor(e,t,n,r){this.element=e,this.navigationService=t,this.selectionService=n,this.renderer=r,this.subscriptions.add(this.navigationService.moves.subscribe(this.updateFocusClass.bind(this))),this.subscriptions.add(this.navigationService.selects.pipe(F(a=>a===this.index)).subscribe(a=>this.selectionService.select(a,this.dataItem))),this.subscriptions.add(this.selectionService.changes.subscribe(()=>{this.updateSelectionClass(this.isSelected(this.dataItem,this.index))}))}ngOnChanges(e){e.initialSelection&&this.updateSelectionClass(this.initialSelection),e.index&&this.updateFocusClass()}ngOnDestroy(){this.subscriptions.unsubscribe()}updateFocusClass(){this.render(this.navigationService.isActive(this.index),"k-focus")}updateSelectionClass(e){this.render(e,"k-selected")}render(e,t){let n=e?"addClass":"removeClass";this.renderer[n](this.element.nativeElement,t)}static \u0275fac=function(t){return new(t||i)(l(se),l(ie),l(Ve),l(ae))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewItemContent",""]],inputs:{dataItem:"dataItem",index:"index",initialSelection:"initialSelection",isSelected:"isSelected"},features:[N]})}return i})(),wn=(()=>{class i{expandService;loadingService;cd;get loading(){return this._loading}set loading(e){this._loading=e,this.cd.markForCheck()}index;_loading=!1;subscription;constructor(e,t,n){this.expandService=e,this.loadingService=t,this.cd=n}ngOnInit(){let e=this.loadingService.changes.pipe(F(t=>t===this.index));this.subscription=this.expandService.changes.pipe(F(({index:t})=>t===this.index),ve(({expand:t})=>{!t&&this.loading&&(this.loading=!1)}),F(({expand:t})=>t),Fe(t=>$(t).pipe(pt(100),mt(e)))).subscribe(()=>this.loading=!0),this.subscription.add(e.subscribe(()=>this.loading=!1))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(l(ge),l(st),l(X))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewLoading",""]],hostVars:2,hostBindings:function(t,n){t&2&&_("k-i-loading",n.loading)},inputs:{index:[0,"kendoTreeViewLoading","index"]}})}return i})(),Yt=(i,s)=>({dataItem:s,index:i}),Nn=0,_n="treeitem",Tn="button",Mn=(()=>{class i{element;expandService;navigationService;selectionService;lookupService;renderer;ib;dataItem;index;parentDataItem;parentIndex;role=_n;loadOnDemand=!0;checkable;selectable;expandable;set isChecked(e){e==="checked"?this.ariaChecked="true":e==="indeterminate"?this.ariaChecked="mixed":this.ariaChecked="false"}isDisabled=!1;isVisible=!0;get isExpanded(){return this._isExpanded||!1}set isExpanded(e){this._isExpanded=e}get isSelected(){return this._isSelected||!1}set isSelected(e){this._isSelected=e}get isButton(){return this.role===Tn}get treeItem(){return Yt(this.index,this.dataItem)}get parentTreeItem(){return this.parentDataItem?Yt(this.parentIndex,this.parentDataItem):null}ariaChecked="false";id=Nn++;_isExpanded;_isSelected;isInitialized=!1;subscriptions=[];constructor(e,t,n,r,a,d,c){this.element=e,this.expandService=t,this.navigationService=n,this.selectionService=r,this.lookupService=a,this.renderer=d,this.ib=c,this.subscribe()}ngOnInit(){this.loadOnDemand&&!this.isButton&&this.lookupService.registerItem(this.treeItem,this.parentTreeItem),this.registerNavigationItem(),this.isInitialized=!0,this.setAttribute("role",this.role),this.setAriaAttributes(),this.updateTabIndex()}ngOnChanges(e){let{index:t}=e;W(["index","checkable","isChecked","expandable","isExpanded","selectable","isSelected"],e)&&this.setAriaAttributes(),this.loadOnDemand&&!this.isButton&&this.moveLookupItem(e),this.moveNavigationItem(t),W(["isDisabled","isVisible"],e)&&this.updateNodeAvailability()}ngOnDestroy(){this.navigationService.unregisterItem(this.id,this.index),this.loadOnDemand&&!this.isButton&&this.lookupService.unregisterItem(this.index,this.dataItem),this.subscriptions=this.subscriptions.reduce((e,t)=>(t.unsubscribe(),e),[])}subscribe(){this.subscriptions=[this.navigationService.moves.subscribe(e=>{this.updateTabIndex(),this.focusItem(e.shouldScroll)}),this.navigationService.expands.pipe(F(({index:e})=>e===this.index&&!this.isDisabled)).subscribe(({expand:e})=>this.expand(e))]}registerNavigationItem(){this.navigationService.registerItem(this.id,this.index,this.isDisabled,this.isButton,this.isVisible),this.activateItem()}activateItem(){if(this.isDisabled)return;let e=this.navigationService,t=this.selectionService,n=this.index;t.setFirstSelected(n,this.isSelected),!e.isActive(n)&&t.isFirstSelected(n)&&e.activateIndex(n)}expand(e){this.expandService[e?"expand":"collapse"](this.index,this.dataItem)}isFocusable(){return!this.isDisabled&&this.navigationService.isFocusable(this.index)}focusItem(e=!1){this.isInitialized&&this.navigationService.isActive(this.index)&&this.element.nativeElement.focus({preventScroll:!e})}moveLookupItem(e={}){let{dataItem:t,index:n,parentDataItem:r,parentIndex:a}=e;if(n&&n.firstChange||!t&&!n&&!r&&!a)return;let d=(n||{}).previousValue||this.index;this.lookupService.replaceItem(d,this.treeItem,this.parentTreeItem)}moveNavigationItem(e={}){let{currentValue:t,firstChange:n,previousValue:r}=e;!n&&o(t)&&o(r)&&(this.navigationService.unregisterItem(this.id,r),this.navigationService.registerItem(this.id,t,this.isDisabled,this.isButton))}updateNodeAvailability(){let e=this.navigationService;this.isDisabled||!this.isVisible&&this.navigationService.isTreeViewActive?e.activateClosest(this.index):e.activateFocusable(),e.updateItem(this.index,this.isDisabled,this.isVisible)}setAriaAttributes(){this.setAttribute("aria-level",this.ib.level(this.index).toString()),this.setAttribute("aria-expanded",this.expandable?this.isExpanded.toString():null),this.setAttribute("aria-selected",this.selectable?this.isSelected.toString():null),this.setAttribute("aria-checked",this.checkable?this.ariaChecked:null)}updateTabIndex(){this.setAttribute("tabIndex",this.isFocusable()?"0":"-1")}setAttribute(e,t){if(!o(t)){this.renderer.removeAttribute(this.element.nativeElement,e);return}this.renderer.setAttribute(this.element.nativeElement,e,t)}static \u0275fac=function(t){return new(t||i)(l(se),l(ge),l(ie),l(Ve),l(Oe),l(ae),l(te))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewItem",""]],inputs:{dataItem:"dataItem",index:"index",parentDataItem:"parentDataItem",parentIndex:"parentIndex",role:"role",loadOnDemand:"loadOnDemand",checkable:"checkable",selectable:"selectable",expandable:"expandable",isChecked:"isChecked",isDisabled:"isDisabled",isVisible:"isVisible",isExpanded:"isExpanded",isSelected:"isSelected"},features:[N]})}return i})(),Jt="k-treeview-top",ei="k-treeview-mid",Ze="k-treeview-bot",En=(()=>{class i{expandService;loadingService;indexBuilder;treeViewLookupService;navigationService;nodeChildrenService;dataChangeNotification;changeDetectorRef;localization;renderer;caretAltDownIcon=Ge;caretAltRightIcon=je;caretAltLeftIcon=He;loadMoreTitle;kGroupClass=!0;get role(){return this.parentIndex?"group":"tree"}checkboxes;expandIcons;disabled;selectable;touchActions;disableParentNodesOnly;loadOnDemand=!0;trackBy;nodes;textField="";parentDataItem;parentIndex;nodeTemplateRef;loadMoreButtonTemplateRef;loadMoreService;size="medium";expandDisabledNodes;initialNodesLoaded=!1;loadingMoreNodes=!1;isItemExpandable=(e,t)=>this.expandDisabledNodes||!this.isItemDisabled(e,t);getFontIcon(e,t){return this.isExpanded(e,t)?"caret-alt-down":this.localization.rtl?"caret-alt-left":"caret-alt-right"}getSvgIcon(e,t){return this.isExpanded(e,t)?Ge:this.localization.rtl?He:je}get moreNodesAvailable(){return!o(this.loadMoreService)||this.data.length===0?!1:this.pageSize<this.totalNodesCount}get pageSize(){return o(this.loadMoreService)?this.loadMoreService.getGroupSize(this.parentDataItem):null}set pageSize(e){this.loadMoreService.setGroupSize(this.parentDataItem,e)}get data(){if(o(this.pageSize)){let e=this.pageSize>0?this.pageSize:0;return this._data.slice(0,e)}return this._data}set data(e){this._data=e,this.registerLoadedNodes(this.data)}get loadMoreButtonIndex(){return this.loadMoreService?this.nodeIndex(this.data.length):null}get totalNodesCount(){return this.loadMoreService?this.loadMoreService.getTotalNodesCount(this.parentDataItem,this._data.length):this.data.length}_data=[];nodesSubscription;loadMoreNodesSubscription;singleRecordSubscriptions=new E;localizationSubscriptions=new E;constructor(e,t,n,r,a,d,c,h,f,b){this.expandService=e,this.loadingService=t,this.indexBuilder=n,this.treeViewLookupService=r,this.navigationService=a,this.nodeChildrenService=d,this.dataChangeNotification=c,this.changeDetectorRef=h,this.localization=f,this.renderer=b}isChecked=()=>"none";isDisabled=()=>!1;hasCheckbox=()=>!0;isExpanded=()=>!1;isVisible=()=>!0;isSelected=()=>!1;children=()=>$([]);hasChildren=()=>!1;get hasTemplate(){return o(this.nodeTemplateRef)}expandNode(e,t,n){n?this.expandService.expand(e,t):this.expandService.collapse(e,t)}checkNode(e,t){this.navigationService.checkIndex(e),this.navigationService.activateIndex(e),t?.input&&this.renderer.removeClass(t.input.nativeElement,"k-focus")}nodeIndex(e){return this.indexBuilder.nodeIndex(e.toString(),this.parentIndex)}nodeText(e){let t=Qt(this.textField)?this.textField[0]:this.textField;return D(t)(e)}getCheckBoxState(e,t){let n=this.isChecked(e,t);return n==="indeterminate"?n:n==="checked"}getCheckboxAttributes(e){return{"aria-hidden":"true",role:"none","aria-labelledby":this.nodeIndex(e)}}ngOnDestroy(){o(this.nodesSubscription)&&this.nodesSubscription.unsubscribe(),o(this.loadMoreNodesSubscription)&&this.loadMoreNodesSubscription.unsubscribe(),this.singleRecordSubscriptions.unsubscribe(),this.localizationSubscriptions.unsubscribe()}ngOnInit(){this.subscribeToNodesChange(),this.singleRecordSubscriptions.add(this.dataChangeNotification.changes.subscribe(this.subscribeToNodesChange.bind(this))),this.singleRecordSubscriptions.add(this.navigationService.loadMore.pipe(F(e=>e===this.loadMoreButtonIndex)).subscribe(this.loadMoreNodes.bind(this))),this.localizationSubscriptions.add(this.localization.changes.subscribe(this.l10nChange.bind(this)))}ngOnChanges(e){e.parentIndex&&this.loadOnDemand&&this.setNodeChildren(this.mapToTreeItem(this.data)),this.localization.get("loadMore")&&(this.loadMoreTitle=this.localization.get("loadMore"))}l10nChange(){this.localization.get("loadMore")&&(this.loadMoreTitle=this.localization.get("loadMore")),this.changeDetectorRef.markForCheck()}fetchChildren(e,t){return this.children(e).pipe(ut(()=>(this.loadingService.notifyLoaded(t),lt)),ve(()=>this.loadingService.notifyLoaded(t)))}get nextFields(){return Qt(this.textField)?this.textField.length>1?this.textField.slice(1):this.textField:[this.textField]}loadMoreNodes(){o(this.loadMoreService.loadMoreNodes)?this.fetchMoreNodes():this.loadMoreLocalNodes()}isItemDisabled(e,t){return this.disabled&&!this.disableParentNodesOnly||this.isDisabled(e,this.nodeIndex(t))}setItemClasses(e,t){return e===1?this.parentIndex?Ze:`${Jt} ${Ze}`:t===0?Jt:t>0&&t<e-1?ei:t===this.totalNodesCount-1?Ze:ei}loadMoreLocalNodes(){let e=this.loadMoreButtonIndex;this.pageSize+=this.loadMoreService.getInitialPageSize(this.parentDataItem),this.registerLoadedNodes(this.data),this.changeDetectorRef.detectChanges(),this.reselectItemAt(e)}fetchMoreNodes(){this.loadingMoreNodes||(this.loadingMoreNodes=!0,o(this.loadMoreNodesSubscription)&&this.loadMoreNodesSubscription.unsubscribe(),this.loadMoreNodesSubscription=this.loadMoreService.loadMoreNodes({dataItem:this.parentDataItem,skip:this.data.length,take:this.loadMoreService.getInitialPageSize(this.parentDataItem)}).pipe(ft(()=>this.loadingMoreNodes=!1)).subscribe(e=>{if(!(Array.isArray(e)&&e.length>0))return;let t=this.loadMoreButtonIndex;this.pageSize+=e.length,this.data=this.data.concat(e),this.navigationService.isActive(t)&&(this.changeDetectorRef.detectChanges(),this.reselectItemAt(t))}))}setNodeChildren(e){this.treeViewLookupService.registerChildren(this.parentIndex,e)}mapToTreeItem(e){return this.parentIndex?e.map((t,n)=>({dataItem:t,index:this.nodeIndex(n)})):[]}emitChildrenLoaded(e){if(!this.parentIndex)return;let t=e.filter(n=>n.dataItem);this.nodeChildrenService.childrenLoaded({dataItem:this.parentDataItem,index:this.parentIndex},t)}subscribeToNodesChange(){this.nodesSubscription&&this.nodesSubscription.unsubscribe(),this.nodesSubscription=this.nodes(this.parentDataItem,this.parentIndex).subscribe(e=>{this.data=e,this.initialNodesLoaded=!0})}reselectItemAt(e){o(e)&&(this.navigationService.deactivate(),this.navigationService.activateIndex(e))}registerLoadedNodes(e=[]){let t=this.mapToTreeItem(e);this.loadOnDemand&&this.setNodeChildren(t),this.emitChildrenLoaded(t)}static \u0275fac=function(t){return new(t||i)(l(ge),l(st),l(te),l(Oe),l(ie),l(ot),l(pe),l(X),l(K),l(ae))};static \u0275cmp=oe({type:i,selectors:[["","kendoTreeViewGroup",""]],hostVars:3,hostBindings:function(t,n){t&2&&(V("role",n.role),_("k-treeview-group",n.kGroupClass))},inputs:{checkboxes:"checkboxes",expandIcons:"expandIcons",disabled:"disabled",selectable:"selectable",touchActions:"touchActions",disableParentNodesOnly:"disableParentNodesOnly",loadOnDemand:"loadOnDemand",trackBy:"trackBy",nodes:"nodes",textField:"textField",parentDataItem:"parentDataItem",parentIndex:"parentIndex",nodeTemplateRef:"nodeTemplateRef",loadMoreButtonTemplateRef:"loadMoreButtonTemplateRef",loadMoreService:"loadMoreService",size:"size",expandDisabledNodes:"expandDisabledNodes",isChecked:"isChecked",isDisabled:"isDisabled",hasCheckbox:"hasCheckbox",isExpanded:"isExpanded",isVisible:"isVisible",isSelected:"isSelected",children:"children",hasChildren:"hasChildren"},features:[N],attrs:Vi,decls:2,vars:3,consts:[["checkbox",""],["class","k-treeview-item","kendoTreeViewItem","",3,"k-hidden","dataItem","index","parentDataItem","parentIndex","loadOnDemand","checkable","isChecked","isDisabled","isVisible","expandable","isExpanded","selectable","isSelected",4,"ngFor","ngForOf","ngForTrackBy"],["class","k-treeview-item","kendoTreeViewItem","","role","button",3,"k-treeview-load-more-checkboxes-container","selectable","checkable","expandable","index","parentDataItem","parentIndex",4,"ngIf"],["kendoTreeViewItem","",1,"k-treeview-item",3,"dataItem","index","parentDataItem","parentIndex","loadOnDemand","checkable","isChecked","isDisabled","isVisible","expandable","isExpanded","selectable","isSelected"],[3,"ngClass"],["class","k-treeview-toggle",3,"k-disabled","kendoTreeViewLoading","click",4,"ngIf"],[3,"disabled","size","checkedState","tabindex","inputAttributes","checkedStateChange",4,"ngIf"],["kendoTreeViewItemContent","",1,"k-treeview-leaf",3,"id","dataItem","index","initialSelection","isSelected"],[1,"k-treeview-leaf-text"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["kendoTreeViewGroup","","role","group",3,"size","nodes","loadOnDemand","checkboxes","expandIcons","selectable","touchActions","children","hasChildren","isChecked","isDisabled","hasCheckbox","disabled","expandDisabledNodes","isExpanded","isSelected","isVisible","nodeTemplateRef","loadMoreButtonTemplateRef","parentIndex","parentDataItem","textField","loadMoreService","trackBy","disableParentNodesOnly",4,"ngIf"],[1,"k-treeview-toggle",3,"click","kendoTreeViewLoading"],[3,"name","svgIcon"],[3,"checkedStateChange","disabled","size","checkedState","tabindex","inputAttributes"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["kendoTreeViewGroup","","role","group",3,"size","nodes","loadOnDemand","checkboxes","expandIcons","selectable","touchActions","children","hasChildren","isChecked","isDisabled","hasCheckbox","disabled","expandDisabledNodes","isExpanded","isSelected","isVisible","nodeTemplateRef","loadMoreButtonTemplateRef","parentIndex","parentDataItem","textField","loadMoreService","trackBy","disableParentNodesOnly"],["kendoTreeViewItem","","role","button",1,"k-treeview-item",3,"selectable","checkable","expandable","index","parentDataItem","parentIndex"],[1,"k-treeview-bot"],["class","k-icon k-i-loading",4,"ngIf"],["kendoTreeViewItemContent","",1,"k-treeview-leaf","k-treeview-load-more-button",3,"index"],[4,"ngIf"],[1,"k-icon","k-i-loading"]],template:function(t,n){t&1&&C(0,Ki,10,33,"li",1)(1,$i,7,14,"li",2),t&2&&(u("ngForOf",n.data)("ngForTrackBy",n.trackBy),m(),u("ngIf",n.initialNodesLoaded&&n.moreNodesAvailable))},dependencies:[i,Tt,Mn,_t,he,wn,_e,Ht,kn,Mt,Et,we,Vt],encapsulation:2,data:{animation:[Ot("toggle",[Ke("void => *",[ue({height:0}),Pe("0.1s ease-in",ue({height:"*"}))]),Ke("* => void",[ue({height:"*"}),Pe("0.1s ease-in",ue({height:0}))])])]}})}return i})(),ti=(()=>{class i extends Kt{loadMore;static \u0275fac=(()=>{let e;return function(n){return(e||(e=vt(i)))(n||i)}})();static \u0275dir=x({type:i,selectors:[["kendo-treeview-messages-base"]],inputs:{loadMore:"loadMore"},standalone:!1,features:[de]})}return i})(),Vn=(()=>{class i extends ti{service;constructor(e){super(),this.service=e}static \u0275fac=function(t){return new(t||i)(l(K))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewLocalizedMessages",""]],features:[ke([{provide:ti,useExisting:be(()=>i)}]),de]})}return i})(),ii=0,On="https://www.telerik.com/kendo-angular-ui/components/treeview/load-more-button/",Rn=[ge,te,Oe,st,ot,ie,Ve,pe,K,{provide:jt,useValue:"kendo.treeview"},{provide:Ee,useExisting:be(()=>ee)},{provide:vi,useExisting:be(()=>ee)}],ee=(()=>{class i{element;changeDetectorRef;expandService;navigationService;nodeChildrenService;selectionService;treeViewLookupService;ngZone;renderer;dataChangeNotification;localization;searchIcon=Bt;classNames=!0;get direction(){return this.localization.rtl?"rtl":"ltr"}assetsContainer;searchbox;filterInputPlaceholder="";expandDisabledNodes;set animate(e){this._animate=e}get animate(){return!this._animate}fetchNodes=()=>this.data;childrenLoaded=new v;onBlur=new v;onFocus=new v;expand=new v;collapse=new v;nodeDragStart=new v;nodeDrag=new v;filterStateChange=new v;nodeDrop=new v;nodeDragEnd=new v;addItem=new v;removeItem=new v;checkedChange=new v;selectionChange=new v;filterChange=new v;nodeClick=new v;nodeDblClick=new v;nodeTemplateQuery;set nodeTemplateRef(e){this._nodeTemplateRef=e}get nodeTemplateRef(){return this._nodeTemplateRef||this.nodeTemplateQuery}loadMoreButtonTemplateQuery;set loadMoreButtonTemplateRef(e){this._loadMoreButtonTemplateRef=e}get loadMoreButtonTemplateRef(){return this._loadMoreButtonTemplateRef||this.loadMoreButtonTemplateQuery}trackBy=pn;set nodes(e){this.data.next(e||[]),this.dataChangeNotification.notify()}get nodes(){return this.data.value}textField;get hasChildren(){return this._hasChildren||dn}set hasChildren(e){this._hasChildren=e,this.expandIcons=!!(this._isExpanded&&this._hasChildren)}get isChecked(){return this._isChecked||cn}set isChecked(e){this._isChecked=e,this.checkboxes=!!this._isChecked}isDisabled=ln;hasCheckbox=hn;get isExpanded(){return this._isExpanded||un}set isExpanded(e){this._isExpanded=e,this.expandIcons=!!(this._isExpanded&&this._hasChildren)}get isSelected(){return this._isSelected||ci}set isSelected(e){this._isSelected=e,this.selectable=!!this._isSelected}isVisible=li;navigable=!0;children=()=>$([]);loadOnDemand=!0;filterable=!1;filter="";set size(e){let t=e||"medium";this.size!=="none"&&this.renderer.removeClass(this.element.nativeElement,Ue("treeview",this.size)),this.renderer.addClass(this.element.nativeElement,Ue("treeview",t)),this._size=e}get size(){return this._size}get isActive(){return this.navigationService.isTreeViewActive}get treeviewId(){return`treeview_${this._nextId}`}disableParentNodesOnly=!1;loadMoreService;editService;checkboxes=!1;expandIcons=!1;selectable=!1;touchActions=!0;data=new ct([]);_animate=!0;_isChecked;_isExpanded;_isSelected;_hasChildren;_nodeTemplateRef;_loadMoreButtonTemplateRef;_size="medium";subscriptions=new E;domSubscriptions=[];_nextId=ii;constructor(e,t,n,r,a,d,c,h,f,b,A){this.element=e,this.changeDetectorRef=t,this.expandService=n,this.navigationService=r,this.nodeChildrenService=a,this.selectionService=d,this.treeViewLookupService=c,this.ngZone=h,this.renderer=f,this.dataChangeNotification=b,this.localization=A,Rt(on),ii++}ngOnChanges(e){this.navigationService.navigable=!!this.navigable,W(["nodes","children","hasChildren","loadOnDemand"],e,!1)&&!this.loadOnDemand&&this.preloadChildNodes()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.domSubscriptions.forEach(e=>e())}ngOnInit(){this.subscriptions.add(this.nodeChildrenService.changes.subscribe(e=>this.childrenLoaded.emit(e))),this.subscriptions.add(this.expandService.changes.subscribe(({index:e,dataItem:t,expand:n})=>n?this.expand.emit({index:e,dataItem:t}):this.collapse.emit({index:e,dataItem:t}))),this.subscriptions.add(this.navigationService.checks.subscribe(e=>this.checkedChange.emit(this.treeViewLookupService.itemLookup(e)))),this.subscriptions.add(this.selectionService.changes.subscribe(e=>{w(this.selectionChange)&&this.ngZone.run(()=>{this.selectionChange.emit(e)})})),this.element&&this.ngZone.runOutsideAngular(()=>{this.attachDomHandlers()}),this.size&&this.renderer.addClass(this.element.nativeElement,Ue("treeview",this.size))}ngAfterViewInit(){this.searchbox&&(this.renderer.setAttribute(this.searchbox.input.nativeElement,"role","searchbox"),this.renderer.setAttribute(this.searchbox.input.nativeElement,"aria-controls",this.treeviewId),this.renderer.setAttribute(this.searchbox.input.nativeElement,"aria-label","searchbar"))}blur(){if(!j())return;let e=Wt(this.element);document.activeElement===e&&e.blur()}focus(e){let t=e||M(this.navigationService.focusableItem);this.navigationService.activateIndex(t);let n=Wt(this.element);n&&n.focus()}itemLookup(e){return this.treeViewLookupService.itemLookup(e)}rebindChildren(){this.dataChangeNotification.notify()}expandNode(e,t){this.expandService.expand(t,e)}collapseNode(e,t){this.expandService.collapse(t,e)}getNodePageSize(e){return this.verifyLoadMoreService(),this.loadMoreService.getGroupSize(e)}setNodePageSize(e,t){this.verifyLoadMoreService(),this.loadMoreService.setGroupSize(e,t)}preloadChildNodes(){this.treeViewLookupService.reset(),this.registerLookupItems(this.nodes)}attachDomHandlers(){let e=this.element.nativeElement;this.clickHandler=this.clickHandler.bind(this),this.domSubscriptions.push(this.renderer.listen(e,"contextmenu",this.clickHandler),this.renderer.listen(e,"click",this.clickHandler),this.renderer.listen(e,"dblclick",this.clickHandler),this.renderer.listen(e,"focusin",this.focusHandler.bind(this)),this.renderer.listen(e,"focusout",this.blurHandler.bind(this)),this.renderer.listen(e,"keydown",this.keydownHandler.bind(this)))}focusHandler(e){let t;if(H(e.target,".k-treeview-item")?t=e.target:Zt(e.target)||(t=J(e.target)),t){let n=qe(e.target);if(this.navigationService.isDisabled(n))return;this.navigationService.activateIndex(n),!this.isActive&&w(this.onFocus)&&this.ngZone.run(()=>{this.onFocus.emit()}),this.navigationService.isTreeViewActive=!0}}blurHandler(e){this.isActive&&H(e.target,".k-treeview-item")&&(!e.relatedTarget||!H(e.relatedTarget,".k-treeview-item")||!We(e.relatedTarget,this.element.nativeElement))&&(this.navigationService.deactivate(),this.navigationService.isTreeViewActive=!1,w(this.onBlur)&&this.ngZone.run(()=>{this.onBlur.emit()}))}clickHandler(e){let t=e.target;if(e.type==="contextmenu"&&!w(this.nodeClick)||e.type==="click"&&!w(this.nodeClick)&&!w(this.selectionChange)&&!Xt(t)||e.type==="dblclick"&&!w(this.nodeDblClick)||Zt(t)||!at(t)&&!Xt(t)||!We(t,this.element.nativeElement))return;let n=qe(J(t));!n||this.navigationService.isDisabled(n)||this.ngZone.run(()=>{let r=this.treeViewLookupService.itemLookup(n);if(e.type==="click")if(this.navigationService.model.findNode(n).loadMoreButton){this.navigationService.notifyLoadMore(n);return}else this.navigationService.selectIndex(n);(e.type==="dblclick"?this.nodeDblClick:this.nodeClick).emit({item:r.item,originalEvent:e,type:e.type})})}keydownHandler(e){this.isActive&&this.navigable&&this.ngZone.run(()=>{this.navigationService.move(e)})}verifyLoadMoreService(){if(wt()&&!o(this.loadMoreService))throw new Error(`To use the TreeView paging functionality, you need to assign the \`kendoTreeViewLoadMore\` directive. See ${On}.`)}registerLookupItems(e,t=null){if(!o(e)||e.length===0)return;let n=M(t),r=e.map((a,d)=>Cn(a,d,n));o(t)&&this.treeViewLookupService.registerChildren(n,r),r.forEach(a=>{this.treeViewLookupService.registerItem(a,t),this.hasChildren(a.dataItem)&&this.children(a.dataItem).subscribe(d=>this.registerLookupItems(d,a))})}static \u0275fac=function(t){return new(t||i)(l(se),l(X),l(ge),l(ie),l(ot),l(Ve),l(Oe),l(Ce),l(ae),l(pe),l(K))};static \u0275cmp=oe({type:i,selectors:[["kendo-treeview"]],contentQueries:function(t,n,r){if(t&1&&(le(r,Sn,5),le(r,Dn,5)),t&2){let a;z(a=P())&&(n.nodeTemplateQuery=a.first),z(a=P())&&(n.loadMoreButtonTemplateQuery=a.first)}},viewQuery:function(t,n){if(t&1&&(Le(Qi,7,bt),Le(Zi,5)),t&2){let r;z(r=P())&&(n.assetsContainer=r.first),z(r=P())&&(n.searchbox=r.first)}},hostVars:4,hostBindings:function(t,n){t&2&&(xt("@.disabled",n.animate),V("dir",n.direction),_("k-treeview",n.classNames))},inputs:{filterInputPlaceholder:"filterInputPlaceholder",expandDisabledNodes:"expandDisabledNodes",animate:"animate",nodeTemplateRef:[0,"nodeTemplate","nodeTemplateRef"],loadMoreButtonTemplateRef:[0,"loadMoreButtonTemplate","loadMoreButtonTemplateRef"],trackBy:"trackBy",nodes:"nodes",textField:"textField",hasChildren:"hasChildren",isChecked:"isChecked",isDisabled:"isDisabled",hasCheckbox:"hasCheckbox",isExpanded:"isExpanded",isSelected:"isSelected",isVisible:"isVisible",navigable:"navigable",children:"children",loadOnDemand:"loadOnDemand",filterable:"filterable",filter:"filter",size:"size",disableParentNodesOnly:"disableParentNodesOnly"},outputs:{childrenLoaded:"childrenLoaded",onBlur:"blur",onFocus:"focus",expand:"expand",collapse:"collapse",nodeDragStart:"nodeDragStart",nodeDrag:"nodeDrag",filterStateChange:"filterStateChange",nodeDrop:"nodeDrop",nodeDragEnd:"nodeDragEnd",addItem:"addItem",removeItem:"removeItem",checkedChange:"checkedChange",selectionChange:"selectionChange",filterChange:"filterChange",nodeClick:"nodeClick",nodeDblClick:"nodeDblClick"},exportAs:["kendoTreeView"],features:[ke(Rn),N],decls:5,vars:24,consts:()=>{let e;return e=$localize`:kendo.treeview.loadMore|The title of the Load More button:Load more...`,[["assetsContainer",""],["searchbox",""],["kendoTreeViewLocalizedMessages","","loadMore",e],["class","k-treeview-filter",4,"ngIf"],["kendoTreeViewGroup","","role","tree",1,"k-treeview-lines",3,"size","loadOnDemand","checkboxes","expandIcons","selectable","touchActions","children","hasChildren","isChecked","isDisabled","hasCheckbox","disableParentNodesOnly","isExpanded","isSelected","isVisible","nodeTemplateRef","loadMoreButtonTemplateRef","textField","nodes","loadMoreService","trackBy","expandDisabledNodes"],[1,"k-treeview-filter"],[3,"valueChange","size","value","clearButton","placeholder"],["kendoTextBoxPrefixTemplate",""],["innerCssClass","k-input-icon","name","search",3,"svgIcon"]]},template:function(t,n){t&1&&(Be(0,2),C(1,Wi,4,4,"span",3),B(2,"ul",4),Be(3,null,0)),t&2&&(m(),u("ngIf",n.filterable),m(),u("size",n.size)("loadOnDemand",n.loadOnDemand)("checkboxes",n.checkboxes)("expandIcons",n.expandIcons)("selectable",n.selectable)("touchActions",n.touchActions)("children",n.children)("hasChildren",n.hasChildren)("isChecked",n.isChecked)("isDisabled",n.isDisabled)("hasCheckbox",n.hasCheckbox)("disableParentNodesOnly",n.disableParentNodesOnly)("isExpanded",n.isExpanded)("isSelected",n.isSelected)("isVisible",n.isVisible)("nodeTemplateRef",n.nodeTemplateRef==null?null:n.nodeTemplateRef.templateRef)("loadMoreButtonTemplateRef",n.loadMoreButtonTemplateRef==null?null:n.loadMoreButtonTemplateRef.templateRef)("textField",n.textField)("nodes",n.fetchNodes)("loadMoreService",n.loadMoreService)("trackBy",n.trackBy)("expandDisabledNodes",n.expandDisabledNodes),V("id",n.treeviewId))},dependencies:[Vn,he,$t,Ut,_e,En],encapsulation:2})}return i})(),An=(i,s)=>i.filter(e=>e===s).length>0,ni=i=>s=>i===s?!0:s.split?s.split("_").reduce(({key:e,result:t},n)=>(e+=n,i===e||t?{result:!0}:(e+="_",{key:e,result:!1})),{key:"",result:!1}).result:!1,Rs=(()=>{class i{treeView;zone;set isChecked(e){this.treeView.isChecked=e}checkKey;checkedKeys;checkable;checkedKeysChange=new v;subscriptions=new E;get options(){let e={checkChildren:!0,checkParents:!0,enabled:!0,mode:"multiple",uncheckCollapsedChildren:!1};if(!o(this.checkable)||typeof this.checkable=="string")return e;let t=rt(this.checkable)?{enabled:this.checkable}:this.checkable;return Object.assign(e,t)}checkActions={multiple:e=>this.checkMultiple(e),single:e=>this.checkSingle(e)};state=new Set;clickSubscription;lastChange;constructor(e,t){this.treeView=e,this.zone=t,this.subscriptions.add(this.treeView.checkedChange.subscribe(r=>this.check(r)));let n=[];this.subscriptions.add(this.treeView.childrenLoaded.pipe(F(()=>this.options.checkChildren&&this.treeView.loadOnDemand),ve(r=>n.push(r)),Fe(()=>this.zone.onStable.pipe(Ae(1)))).subscribe(()=>this.addCheckedItemsChildren(n))),this.treeView.isChecked=this.isItemChecked.bind(this)}ngOnChanges(e){e.checkable&&(this.treeView.checkboxes=this.options.enabled,this.toggleCheckOnClick()),L("checkedKeys",e,!1)&&e.checkedKeys.currentValue!==this.lastChange&&(this.state=new Set(e.checkedKeys.currentValue))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.unsubscribeClick()}isItemChecked(e,t){return this.checkKey?this.state.has(this.itemKey({dataItem:e,index:t}))?"checked":"none":this.isIndexChecked(t)}isIndexChecked(e){let t=Array.from(this.state).filter(ni(e));if(An(t,e))return"checked";let{mode:n,checkParents:r}=this.options;return n==="multiple"&&r&&t.length?"indeterminate":"none"}itemKey(e){if(!o(this.checkKey))return e.index;if(typeof this.checkKey=="string"&&o(e.dataItem))return e.dataItem[this.checkKey];if(typeof this.checkKey=="function")return this.checkKey(e)}check(e){let{enabled:t,mode:n}=this.options,r=this.checkActions[n]||hi;t&&r(e)}checkSingle(e){let t=this.itemKey(e.item),n=this.state.has(t);this.state.clear(),n||this.state.add(t),this.notify()}checkMultiple(e){this.checkNode(e),this.options.checkParents&&this.checkParents(e.parent),this.notify()}toggleCheckOnClick(){this.unsubscribeClick(),this.options.checkOnClick&&(this.clickSubscription=this.treeView.nodeClick.subscribe(e=>{if(e.type==="click"){let t=this.treeView.itemLookup(e.item.index);this.check(t)}}))}unsubscribeClick(){this.clickSubscription&&(this.clickSubscription.unsubscribe(),this.clickSubscription=null)}checkNode(e){if(!o(e.item.dataItem)||this.treeView.isDisabled(e.item.dataItem,e.item.index)||!this.treeView.hasCheckbox(e.item.dataItem,e.item.index))return;let t=this.itemKey(e.item);if(!o(t))return;let n=[t];if(this.options.checkChildren){let a=gi(e,({item:d})=>this.treeView.disableParentNodesOnly||this.options.checkDisabledChildren?this.treeView.isVisible(d.dataItem,d.index):this.treeView.isVisible(d.dataItem,d.index)&&!this.treeView.isDisabled(d.dataItem,d.index)&&this.treeView.hasCheckbox(d.dataItem,d.index));n.push(...a.filter(d=>this.options.checkDisabledChildren||!this.treeView.isDisabled(d.item.dataItem,d.item.index)||this.treeView.hasCheckbox(d.item.dataItem,d.item.index)).map(({item:d})=>this.itemKey(d)))}let r=!this.state.has(t);n.forEach(a=>{if(r)this.state.add(a);else if(this.state.delete(a),this.options.uncheckCollapsedChildren&&this.options.mode==="multiple"&&this.treeView.loadOnDemand){if(this.checkKey&&this.treeView.hasChildren(e.item.dataItem)){this.uncheckChildren(e.item.dataItem,e.item.index);return}Array.from(this.state).filter(ni(e.item.index)).forEach(c=>this.state.delete(c))}})}uncheckChildren(e,t){this.treeView.children(e).subscribe(n=>n.forEach((r,a)=>{let d=`${t}_${a}`;this.state.delete(this.itemKey({dataItem:r,index:d})),this.treeView.hasChildren(r)&&this.uncheckChildren(r,d)}))}checkParents(e){if(!o(e))return;let t=e;for(;t;){let n=this.itemKey(t.item),r=this.treeView.isDisabled(t.item.dataItem,t.item.index),a=t.children.every(c=>this.state.has(this.itemKey(c)));this.treeView.hasCheckbox(t.item.dataItem,t.item.index)&&(!r||this.options.checkDisabledChildren)&&a?this.state.add(n):this.state.delete(n),t=t.parent}}allChildrenSelected(e){return e.every(t=>{let n=this.allChildrenSelected(t.children);return this.state.has(this.itemKey(t.item))&&n})}notify(){this.lastChange=Array.from(this.state),this.checkedKeysChange.emit(this.lastChange)}addCheckedItemsChildren(e){if(!o(e)||e.length===0)return;let t=this.state.size,n=new Set;e.forEach(a=>{let d=this.itemKey(a.item);this.state.has(d)&&a.children.forEach(c=>{(!this.treeView.isDisabled(a.item.dataItem,a.item.index)&&!this.treeView.isDisabled(c.dataItem,c.index)&&this.treeView.hasCheckbox(a.item.dataItem,a.item.index)&&this.treeView.hasCheckbox(c.dataItem,c.index)||this.treeView.disableParentNodesOnly||this.options.checkDisabledChildren)&&this.state.add(this.itemKey(c)),this.treeView.disableParentNodesOnly&&!this.options.checkDisabledChildren&&(this.treeView.isDisabled(c.dataItem,c.index)||!this.treeView.hasCheckbox(c.dataItem,c.index))&&n.add(this.itemKey(c))})}),n.forEach(a=>this.state.delete(a)),t!==this.state.size&&this.zone.run(()=>this.notify())}static \u0275fac=function(t){return new(t||i)(l(ee),l(Ce))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewCheckable",""]],inputs:{isChecked:"isChecked",checkKey:[0,"checkBy","checkKey"],checkedKeys:"checkedKeys",checkable:[0,"kendoTreeViewCheckable","checkable"]},outputs:{checkedKeysChange:"checkedKeysChange"},features:[N]})}return i})();var As=(()=>{class i{treeview;set editService(e){this.treeview.editService=e}subscriptions=new E;constructor(e){this.treeview=e,this.subscriptions.add(this.treeview.addItem.subscribe(this.handleAdd.bind(this))),this.subscriptions.add(this.treeview.removeItem.subscribe(this.handleRemove.bind(this)))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleAdd(e){if(!o(this.treeview.editService))throw new Error("No `editService` provided. Either provide your own implementation or use this directive in combination with one of the data binding directives (`kendoTreeViewHierarchyBinding` or `kendoTreeViewFlatDataBinding`).");this.treeview.editService.add(e)}handleRemove(e){if(!o(this.treeview.editService))throw new Error("No `editService` provided. Either provide your own implementation or use this directive in combination with one of the data binding directives (`kendoTreeViewHierarchyBinding` or `kendoTreeViewFlatDataBinding`).");this.treeview.editService.remove(e)}static \u0275fac=function(t){return new(t||i)(l(ee))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewDragAndDropEditing",""]],inputs:{editService:"editService"}})}return i})(),I=function(i){return i[i.Add=0]="Add",i[i.InsertTop=1]="InsertTop",i[i.InsertBottom=2]="InsertBottom",i[i.InsertMiddle=3]="InsertMiddle",i[i.Invalid=4]="Invalid",i}(I||{}),S=function(i){return i[i.Over=0]="Over",i[i.Before=1]="Before",i[i.After=2]="After",i}(S||{}),me=function(i){return i[i.Up=-1]="Up",i[i.Down=1]="Down",i}(me||{}),Me=class{prevented=!1;preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}},et=class extends Me{sourceTree;destinationTree;sourceItem;destinationItem;dropPosition;originalEvent;isValid=!0;constructor(s,e){super(),Object.assign(this,s),this.originalEvent=e}setValid(s){this.isValid=s}},tt=class extends Me{sourceItem;originalEvent;constructor(s){super(),Object.assign(this,s)}};var Fn=(()=>{class i{cdr;hostClasses=!0;text;action;sourceItem;destinationItem;template;posistionStyle="fixed";get statusIconClass(){switch(this.action){case I.Add:return"plus";case I.InsertTop:return"insert-top";case I.InsertBottom:return"insert-bottom";case I.InsertMiddle:return"insert-middle";case I.Invalid:default:return"cancel"}}get statusSVGIcon(){switch(this.action){case I.Add:return Ft;case I.InsertTop:return Lt;case I.InsertBottom:return Pt;case I.InsertMiddle:return zt;case I.Invalid:default:return At}}constructor(e){this.cdr=e}detectChanges(){this.cdr.detectChanges()}static \u0275fac=function(t){return new(t||i)(l(X))};static \u0275cmp=oe({type:i,selectors:[["kendo-treeview-drag-clue"]],hostVars:6,hostBindings:function(t,n){t&2&&(ce("position",n.posistionStyle),_("k-header",n.hostClasses)("k-drag-clue",n.hostClasses))},decls:2,vars:2,consts:[[4,"ngIf"],["innerCssClass","k-drag-status",3,"name","svgIcon"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){t&1&&C(0,Yi,4,3,"ng-container",0)(1,en,1,7,null,0),t&2&&(u("ngIf",!n.template),m(),u("ngIf",n.template))},dependencies:[he,_e,we],encapsulation:2,changeDetection:0})}return i})(),bi=(()=>{class i{get componentRef(){if(!o(this._componentRef))throw new Error("The `initalize` method must be called before calling other service methods.");return this._componentRef}set componentRef(e){this._componentRef=e}get element(){return this.componentRef.location.nativeElement}_componentRef;ngOnDestroy(){o(this._componentRef)&&(this.element.parentElement.removeChild(this.element),this.componentRef.destroy(),this.componentRef=null)}show(){this.element.style.display=""}hide(){this.element.style.display="none"}move(e,t,n=0){this.element.style.left=`${e+n}px`,this.element.style.top=`${t+n}px`}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),Bn=Ln(()=>{if(!(j()&&o(document.body)))return!1;let i=10,s=document.createElement("div");s.style.transform="matrix(10, 0, 0, 10, 0, 0)";let e=document.createElement("div");e.innerText="child",e.style.position="fixed",e.style.top=`${i}px`,s.appendChild(e),document.body.appendChild(s);let t=s.children[0].getBoundingClientRect().top!==i;return document.body.removeChild(s),t});function Ln(i){let s,e=!1;return(...t)=>(e||(s=i(...t),e=!0),s)}var zn=i=>{if(!(i&&Bn()))return{left:0,top:0};let s=i.parentElement;for(;s&&window.getComputedStyle(s).transform==="none";)s=s.parentElement;if(s){let e=s.getBoundingClientRect();return{left:e.left-s.scrollLeft,top:e.top-s.scrollTop}}return{left:0,top:0}},Pn=(i,s)=>{if(!(o(i)&&o(s)))return I.Invalid;switch(i){case S.Over:return I.Add;case S.Before:return o(J(s).previousElementSibling)?I.InsertMiddle:I.InsertTop;case S.After:return o(J(s).nextElementSibling)?I.InsertMiddle:I.InsertBottom;default:return I.Invalid}},si=(i,s,e,t,n)=>{if(!(o(i)&&o(s)&&o(t)&&o(n)))return;let r=Y(s,".k-treeview-top, .k-treeview-mid, .k-treeview-bot");if(!o(r))return;let a=gn(r),d=We(r,J(i));if(!o(a)||a===i||d)return;let c=a.getBoundingClientRect(),h=c.height/(at(s)?4:2),f=e-n.top,b=c.top-n.top;return f<b+h?S.Before:f>=b+c.height-h?S.After:S.Over},G=(i,s)=>{if(!(o(i)&&o(s)))return null;let e=J(s),t=qe(e),n=i.itemLookup(t);return o(n)&&o(n.item.dataItem)?n:null},xi=(i,s,e)=>{o(i)&&s.length===0&&e.isExpanded(i.item.dataItem,i.item.index)&&e.collapseNode(i.item.dataItem,i.item.index)},Ii=(i,s)=>{s.isExpanded(i.item.dataItem,i.item.index)||s.expandNode(i.item.dataItem,i.item.index)},Xe=i=>j()&&o(document.elementFromPoint)?document.elementFromPoint(i.clientX,i.clientY):i.target,Ci=(i,s)=>{let e=i.split("_"),t=s.split("_");if(e.length<t.length)return i;let n=t.length-1,r=t.slice(0,n).join("_"),a=e.slice(0,n).join("_"),d=t.length-1,c=Number(t[d]),h=Number(e[d]);return r===a&&h>c?(e[d]=String(h-1),e.join("_")):i},Kn=new RegExp("(auto|scroll)"),jn=i=>{for(;o(i)&&i.nodeName!=="HTML";){let s=i.scrollHeight>i.clientHeight,e=Kn.test(getComputedStyle(i).overflowY);if(s&&e)return i;i=i.parentNode}return i},Gn=i=>Math.floor(i.scrollTop)<=0,Hn=i=>Math.ceil(i.scrollTop)>=i.scrollHeight-i.clientHeight,ri=(i,s,e)=>{if(!(o(i)&&j()))return;let t=i.scrollTop,n=s,r=0;for(;t===i.scrollTop&&!(e===me.Up&&Gn(i))&&!(e===me.Down&&Hn(i))&&r<20;)i.scrollTop+=n*e,n+=1,r+=1},Un=10,$n=200,ai=(()=>{class i extends bi{returnAnimation;scrollInterval;constructor(){super()}initialize(e,t){o(this._componentRef)&&this.ngOnDestroy(),this.componentRef=e.createComponent(Fn),this.hide(),this.componentRef.instance.template=t,this.componentRef.changeDetectorRef.detectChanges()}ngOnDestroy(){this.cancelReturnAnimation(),this.cancelScroll(),super.ngOnDestroy()}move(e,t){super.move(e,t,Un)}animateDragClueToElementPosition(e){if(!(o(e)&&o(this.element.animate))){this.hide();return}let t=e.getBoundingClientRect(),n=this.element.getBoundingClientRect();this.returnAnimation=this.element.animate([{transform:"translate(0, 0)"},{transform:`translate(${t.left-n.left}px, ${t.top-n.top}px)`}],$n),this.returnAnimation.onfinish=()=>this.hide()}cancelReturnAnimation(){o(this.returnAnimation)&&(this.returnAnimation.cancel(),this.returnAnimation=null)}updateDragClueData(e,t,n){let r=this.componentRef.instance;e===r.action&&Te(t,r.sourceItem)&&Te(n,r.destinationItem)||(r.action=e,r.sourceItem=t,r.destinationItem=n,r.detectChanges())}updateText(e){e!==this.componentRef.instance.text&&(this.componentRef.instance.text=e,this.componentRef.instance.detectChanges())}scrollIntoView({step:e,interval:t}){this.cancelScroll();let n=jn(this.element);if(!o(n))return;let r=n.getBoundingClientRect(),a=this.element.getBoundingClientRect(),d=Math.max(r.top,0),c=d+a.height,h=d+Math.min(r.bottom,n.clientHeight);a.top<c?this.scrollInterval=setInterval(()=>ri(n,e,me.Up),t):a.bottom>h&&(this.scrollInterval=setInterval(()=>ri(n,e,me.Down),t))}cancelScroll(){o(this.scrollInterval)&&(clearInterval(this.scrollInterval),this.scrollInterval=null)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),Qn=(()=>{class i{changeDetectorRef;hostClass=!0;template;position="fixed";pointerEvents="none";action;sourceItem;destinationItem;constructor(e){this.changeDetectorRef=e}detectChanges(){this.changeDetectorRef.detectChanges()}static \u0275fac=function(t){return new(t||i)(l(X))};static \u0275cmp=oe({type:i,selectors:[["kendo-treeview-drop-hint"]],hostVars:6,hostBindings:function(t,n){t&2&&(ce("position",n.position)("pointer-events",n.pointerEvents),_("k-drop-hint-container",n.hostClass))},decls:2,vars:2,consts:[["class","k-drop-hint k-drop-hint-h",4,"ngIf"],[4,"ngIf"],[1,"k-drop-hint","k-drop-hint-h"],[1,"k-drop-hint-start"],[1,"k-drop-hint-line"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){t&1&&C(0,nn,3,0,"div",0)(1,an,1,6,null,1),t&2&&(u("ngIf",!n.template),m(),u("ngIf",n.template))},dependencies:[he,we],encapsulation:2,changeDetection:0})}return i})(),oi=(()=>{class i extends bi{constructor(){super()}initialize(e,t){o(this._componentRef)&&this.ngOnDestroy(),this.componentRef=e.createComponent(Qn),this.hide(),this.componentRef.instance.template=t,this.componentRef.changeDetectorRef.detectChanges()}updateDropHintData(e,t,n){let r=this.componentRef.instance;e===r.action&&Te(t,r.sourceItem)&&Te(n,r.destinationItem)||(r.action=e,r.sourceItem=t,r.destinationItem=n,r.detectChanges())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac})}return i})(),Zn=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(l(re,8))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewDragClueTemplate",""]]})}return i})(),Xn=(()=>{class i{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(t){return new(t||i)(l(re,8))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewDropHintTemplate",""]]})}return i})(),Wn={enabled:!0,step:1,interval:1},qn=(()=>{class i{element;zone;treeview;dragClueService;dropHintService;allowCopy=!1;dropZoneTreeViews=[];startDragAfter=5;autoScroll=!0;dragClueTemplate;dropHintTemplate;userSelectStyle="none";draggable;draggedItem;pendingDragStartEvent;get scrollSettings(){let e=typeof this.autoScroll=="boolean"?{enabled:this.autoScroll}:this.autoScroll;return Object.assign({},Wn,e)}containerOffset={top:0,left:0};constructor(e,t,n,r,a){this.element=e,this.zone=t,this.treeview=n,this.dragClueService=r,this.dropHintService=a,this.treeview.touchActions=!1}ngAfterContentInit(){this.initalizeDraggable(),this.dragClueService.initialize(this.treeview.assetsContainer,this.dragClueTemplate&&this.dragClueTemplate.templateRef),this.dropHintService.initialize(this.treeview.assetsContainer,this.dropHintTemplate&&this.dropHintTemplate.templateRef)}ngOnDestroy(){this.draggable.destroy()}handlePress({originalEvent:e}){at(e.target)&&(this.draggedItem=Y(e.target,".k-treeview-leaf"),this.pendingDragStartEvent=e)}handleDrag({originalEvent:e,clientX:t,clientY:n}){if(this.shouldInitiateDragStart({clientX:t,clientY:n})&&this.initiateDragStart(),!o(this.draggedItem)||o(this.pendingDragStartEvent))return;let r=Xe(e);w(this.treeview.nodeDrag)&&this.zone.run(()=>this.notifyDrag(e,r));let a=this.getTargetTreeView(r),d=si(this.draggedItem,r,n,a,this.containerOffset),c=Y(r,".k-treeview-top, .k-treeview-mid, .k-treeview-bot"),h=Pn(d,r),f=G(this.treeview,this.draggedItem),b=G(a,r);this.updateDropHintState(d,c,h,f,b),this.updateDragClueState(h,t,n,f,b),this.scrollSettings.enabled&&this.dragClueService.scrollIntoView(this.scrollSettings)}handleRelease({originalEvent:e,clientY:t}){if(this.scrollSettings.enabled&&this.dragClueService.cancelScroll(),!o(this.draggedItem)||o(this.pendingDragStartEvent)){this.pendingDragStartEvent=null,this.draggedItem=null;return}let n=Xe(e),r=this.treeview,a=this.getTargetTreeView(n),d=si(this.draggedItem,n,t,this.getTargetTreeView(n),this.containerOffset),c=G(r,this.draggedItem),h=G(a,n);o(h)&&o(d)?this.zone.run(()=>this.notifyDrop({sourceItem:c,destinationItem:h,dropPosition:d,sourceTree:r,destinationTree:a},e)):this.dragClueService.animateDragClueToElementPosition(this.draggedItem),w(this.treeview.nodeDragEnd)&&this.zone.run(()=>this.notifyDragEnd({sourceItem:c,destinationItem:h,originalEvent:e})),this.dropHintService.hide(),this.draggedItem=null}updateDropHintState(e,t,n,r,a){if(!o(t)||e===S.Over||!o(e)){this.dropHintService.hide();return}let d=t.getBoundingClientRect(),h=e===S.Before?d.top:d.top+d.height;this.dropHintService.updateDropHintData(n,r,a),this.dropHintService.move(d.left-this.containerOffset.left,h-this.containerOffset.top),this.dropHintService.show()}updateDragClueState(e,t,n,r,a){this.dragClueService.move(t-this.containerOffset.left,n-this.containerOffset.top),this.dragClueService.updateDragClueData(e,r,a),this.dragClueService.show()}initalizeDraggable(){this.draggable=new Gt({press:this.handlePress.bind(this),drag:this.handleDrag.bind(this),release:this.handleRelease.bind(this)}),this.zone.runOutsideAngular(()=>this.draggable.bindTo(this.element.nativeElement))}notifyDragStart(e,t){let n=G(this.treeview,t),r=new tt({sourceItem:n,originalEvent:e});return this.treeview.nodeDragStart.emit(r),r}notifyDrag(e,t){let n={sourceItem:G(this.treeview,this.draggedItem),destinationItem:G(this.getTargetTreeView(t),t),originalEvent:e};this.treeview.nodeDrag.emit(n)}notifyDrop(e,t){let n=new et(e,t);e.destinationTree.nodeDrop.emit(n),this.disableAnimationsForNextTick(e.destinationTree),e.sourceTree!==e.destinationTree&&this.disableAnimationsForNextTick(e.sourceTree),!n.isDefaultPrevented()&&n.isValid?(this.dragClueService.hide(),e.destinationTree.addItem.emit(e),t.ctrlKey&&this.allowCopy||e.sourceTree.removeItem.emit(e)):n.isDefaultPrevented()?this.dragClueService.hide():n.isValid||this.dragClueService.animateDragClueToElementPosition(this.draggedItem)}notifyDragEnd(e){this.treeview.nodeDragEnd.emit(e)}getTargetTreeView(e){let t=this.treeview.element.nativeElement.tagName,n=Y(e,t);return[this.treeview,...this.dropZoneTreeViews].find(r=>o(r)&&r.element.nativeElement===n)}disableAnimationsForNextTick(e){e.animate||(e.animate=!1,this.zone.runOutsideAngular(()=>setTimeout(()=>e.animate=!0)))}shouldInitiateDragStart(e){return o(this.pendingDragStartEvent)?Math.sqrt(Math.pow(this.pendingDragStartEvent.clientX-e.clientX,2)+Math.pow(this.pendingDragStartEvent.clientY-e.clientY,2))>=this.startDragAfter:!1}initiateDragStart(){if(w(this.treeview.nodeDragStart)&&this.zone.run(()=>this.notifyDragStart(this.pendingDragStartEvent,Xe(this.pendingDragStartEvent))).isDefaultPrevented()){this.pendingDragStartEvent=null,this.draggedItem=null;return}this.dragClueService.cancelReturnAnimation(),this.dragClueService.updateText(this.draggedItem.innerText),this.containerOffset=zn(this.draggedItem),this.pendingDragStartEvent=null}static \u0275fac=function(t){return new(t||i)(l(se),l(Ce),l(ee),l(ai),l(oi))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewDragAndDrop",""]],contentQueries:function(t,n,r){if(t&1&&(le(r,Zn,5),le(r,Xn,5)),t&2){let a;z(a=P())&&(n.dragClueTemplate=a.first),z(a=P())&&(n.dropHintTemplate=a.first)}},hostVars:8,hostBindings:function(t,n){t&2&&ce("user-select",n.userSelectStyle)("-ms-user-select",n.userSelectStyle)("-moz-user-select",n.userSelectStyle)("-webkit-user-select",n.userSelectStyle)},inputs:{allowCopy:"allowCopy",dropZoneTreeViews:"dropZoneTreeViews",startDragAfter:"startDragAfter",autoScroll:"autoScroll"},features:[ke([ai,oi])]})}return i})(),Yn={maxAutoExpandResults:-1,expandMatches:!1,expandedOnClear:"none"},Fs=(()=>{class i{component;set isExpanded(e){this.component.isExpanded=e}expandKey;expandOnFilter=!1;get filterExpandSettings(){let e=rt(this.expandOnFilter)?{enabled:this.expandOnFilter}:dt(U({},this.expandOnFilter),{enabled:!0});return Object.assign({},Yn,e)}expandedKeysChange=new v;expandedKeys;subscriptions=new E;state=new Set;originalExpandedKeys=new Set;isFiltered=!1;lastChange;constructor(e){this.component=e,this.subscriptions.add(ht(this.component.expand.pipe(Re(t=>U({expand:!0},t))),this.component.collapse.pipe(Re(t=>U({expand:!1},t)))).subscribe(this.toggleExpand.bind(this))),this.component.filterStateChange&&this.subscriptions.add(this.component.filterStateChange.subscribe(this.handleAutoExpand.bind(this))),this.component.isExpanded=(t,n)=>this.state.has(this.itemKey({dataItem:t,index:n}))}ngOnChanges(e){L("expandedKeys",e,!1)&&e.expandedKeys.currentValue!==this.lastChange&&(this.state=new Set(e.expandedKeys.currentValue))}ngOnDestroy(){this.subscriptions.unsubscribe()}itemKey(e){if(this.expandKey){if(typeof this.expandKey=="string")return e.dataItem[this.expandKey];if(typeof this.expandKey=="function")return this.expandKey(e)}return e.index}toggleExpand({index:e,dataItem:t,expand:n}){let r=this.itemKey({index:e,dataItem:t}),a=this.state.has(r),d=!1;a&&!n?(this.state.delete(r),d=!0):!a&&n&&(this.state.add(r),d=!0),d&&this.notify()}handleAutoExpand({nodes:e,matchCount:t,term:n}){if(!this.filterExpandSettings.enabled)return;let{maxAutoExpandResults:r,expandMatches:a,expandedOnClear:d}=this.filterExpandSettings;this.isFiltered||(this.originalExpandedKeys=new Set(this.state));let c=this.isFiltered&&!n,h=r!==-1&&t>r;if(c||h){switch(d){case"initial":{qt(this.state,this.originalExpandedKeys)||(this.state=this.originalExpandedKeys,this.notify());break}case"all":{this.state=new Set(e.reduce((A,ne)=>(this.getEveryExpandKey(A,ne),A),[])),this.notify();break}case"unchanged":break;case"none":default:{this.state.size!==0&&(this.state.clear(),this.notify());break}}this.isFiltered=!1;return}let b=new Set(e.reduce((A,ne)=>(this.updateExpandedNodes(A,ne,a),A),[]));qt(this.state,b)||(this.state=b,this.notify()),this.isFiltered=!0}updateExpandedNodes=(e,t,n)=>{(t.containsMatches||t.isMatch&&n&&q(t.children))&&e.push(this.itemKey({dataItem:t.dataItem,index:t.index})),q(t.children)&&t.children.forEach(r=>{this.updateExpandedNodes(e,r,n)})};getEveryExpandKey=(e,t)=>{q(t.children)&&e.push(this.itemKey({dataItem:t.dataItem,index:t.index})),q(t.children)&&t.children.forEach(n=>{this.getEveryExpandKey(e,n)})};notify(){this.lastChange=Array.from(this.state),this.expandedKeysChange.emit(this.lastChange)}static \u0275fac=function(t){return new(t||i)(l(vi))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewExpandable",""]],inputs:{isExpanded:"isExpanded",expandKey:[0,"expandBy","expandKey"],expandOnFilter:"expandOnFilter",expandedKeys:"expandedKeys"},outputs:{expandedKeysChange:"expandedKeysChange"},features:[N]})}return i})(),Jn=(...i)=>s=>i.reduceRight((e,t)=>t(e),s),Si=(i,s,e)=>{if(!o(i.loadMoreService))return;let t=i.getNodePageSize(s);i.setNodePageSize(e,t)},Di=(i,s)=>{if(!o(i.loadMoreService))return;let e=i.getNodePageSize(s);i.setNodePageSize(s,e+1)},yi=(i,s)=>{if(!o(i.loadMoreService))return;let e=i.getNodePageSize(s);i.setNodePageSize(s,e-1)},it=class{flatBinding;movedItemNewIndex;constructor(s){this.flatBinding=s}add({sourceItem:s,destinationItem:e,dropPosition:t,sourceTree:n,destinationTree:r}){let a=Object.assign({},g(s));if(t===S.Over){Ii(e,r);let c=D(this.flatBinding.idField)(g(e));Ne(this.flatBinding.parentIdField)(a,c);let f=this.getLastVisibleChildNodeIndex(r,this.flatBinding.originalData,g(e))+1;this.flatBinding.originalData.splice(f,0,a),this.rebindData();let b=this.fetchChildNodes(g(e),r).indexOf(a);this.movedItemNewIndex=fe(e.item.index,b)}else{let c=t===S.After?1:0,h=this.flatBinding.originalData.indexOf(g(e))+c;this.flatBinding.originalData.splice(h,0,a);let f=D(this.flatBinding.parentIdField)(g(e));Ne(this.flatBinding.parentIdField)(a,f),this.rebindData();let b=e.parent?e.parent.item.index:null,ne=(e.parent?this.fetchChildNodes(g(e.parent),r):r.nodes).indexOf(a);this.movedItemNewIndex=fe(b,ne)}n!==r&&this.addChildNodes(a,n);let d=t===S.Over?g(e):g(e.parent);Di(r,d),Si(r,g(s),a),n!==r&&!r.loadOnDemand&&r.preloadChildNodes(),n!==r&&(r.changeDetectorRef.detectChanges(),r.focus(this.movedItemNewIndex))}remove({sourceItem:s,sourceTree:e,destinationTree:t}){let n=g(s),r=this.flatBinding.originalData.indexOf(n);this.flatBinding.originalData.splice(r,1),e!==t&&this.removeChildNodes(n,e),this.rebindData();let a=s.parent?s.parent.children:[];if(xi(s.parent,a,e),yi(e,g(s.parent)),e.loadOnDemand||e.preloadChildNodes(),e===t){t.changeDetectorRef.detectChanges();let d=Ci(this.movedItemNewIndex,s.item.index);t.focus(d)}}addChildNodes(s,e){let t=this.fetchAllDescendantNodes(s,e);this.flatBinding.originalData.push(...t)}removeChildNodes(s,e){this.fetchAllDescendantNodes(s,e).forEach(n=>{let r=this.flatBinding.originalData.indexOf(n);this.flatBinding.originalData.splice(r,1)})}fetchAllDescendantNodes(s,e){let t=this.fetchChildNodes(s,e);return t.forEach(n=>t=t.concat(this.fetchAllDescendantNodes(n,e)||[])),t}fetchChildNodes(s,e){if(!s)return[];let t=[];return e.children(s).pipe(Ae(1)).subscribe(n=>t=t.concat(n||[])),t}getLastVisibleChildNodeIndex(s,e,t){if(!o(s.loadMoreService)||!s.hasChildren(t))return e.length;let n=s.loadMoreService.getGroupSize(t),r=this.fetchChildNodes(t,s).slice(0,n),a=r[r.length-1];return e.indexOf(a)}rebindData(){this.flatBinding.nodes=this.flatBinding.originalData,this.flatBinding.updateNodes(this.flatBinding.originalData)}},di={operator:"contains",ignoreCase:!0,mode:"lenient"},ki=(()=>{class i{component;filterData;visibleNodes=new Set;set filterSettings(e){this._filterSettings=U(U({},di),e)}get filterSettings(){return this._filterSettings}_filterSettings=di;set filter(e){this.handleFilterChange(e)}constructor(e){this.component=e}handleFilterChange(e){this.filterData&&(this.resetNodesVisibility(this.filterData),e&&pi(this.filterData,e,this.filterSettings,this.component.textField),this.updateVisibleNodes(this.filterData),o(this.component.filterStateChange)&&this.component.filterStateChange.emit({nodes:this.filterData,matchCount:this.visibleNodes.size,term:e,filterSettings:this.filterSettings}))}updateVisibleNodes(e){e.forEach(t=>{t.visible&&this.visibleNodes.add(t.dataItem),t.children&&this.updateVisibleNodes(t.children)})}resetNodesVisibility(e){this.visibleNodes.clear(),e.forEach(t=>{t.visible=!0,t.children&&this.resetNodesVisibility(t.children)})}static \u0275fac=function(t){return new(t||i)(l(Ee))};static \u0275dir=x({type:i,inputs:{filterSettings:"filterSettings",filter:"filter"},standalone:!1})}return i})(),wi=(i,s,e)=>s.filter(t=>i(t)===e),es=new te,Ni=(i,s,e,t,n=null,r="")=>q(i)?i.map((a,d)=>{let c=es.nodeIndex(d.toString(),r),h={dataItem:a,index:c,parent:n,visible:!0};return h.children=Ni(wi(D(e),s||[],D(t)(a)),s,e,t,h,c),h}):[],Bs=(()=>{class i extends ki{component;set nodes(e){this._nodes=e}get nodes(){return this._nodes}_nodes;parentIdField;idField;loadOnDemand=!0;set isVisible(e){this.component.isVisible=e}originalData=[];constructor(e){super(e),this.component=e,this.component.isVisible=t=>this.visibleNodes.has(t)}ngOnInit(){if(o(this.parentIdField)&&o(this.idField)){let e=t=>wi(D(this.parentIdField),this.originalData||[],D(this.idField)(t));this.component.hasChildren=t=>e(t).length>0,this.component.children=t=>$(e(t)),this.component.editService=new it(this),this.component.filterChange.subscribe(this.handleFilterChange.bind(this)),this.component.filter&&this.handleFilterChange(this.component.filter),!this.loadOnDemand&&o(this.component.preloadChildNodes)&&this.component.preloadChildNodes()}}ngOnChanges(e){L("parentIdField",e,!1)&&(this.nodes=this.originalData,this.updateNodes(this.originalData)),L("nodes",e,!1)&&this.updateNodes(e.nodes.currentValue),W(["nodes","loadOnDemand"],e)&&!this.loadOnDemand&&o(this.component.preloadChildNodes)&&this.component.preloadChildNodes()}updateNodes(e){if(this.originalData=e||[],mn(this.parentIdField))this.component.nodes=this.originalData.slice(0);else{let t=D(this.parentIdField);this.component.nodes=this.originalData.filter(Jn(ui,t)),this.filterData=Ni(this.component.nodes,this.originalData,this.parentIdField,this.idField),this.updateVisibleNodes(this.filterData)}}static \u0275fac=function(t){return new(t||i)(l(Ee))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewFlatDataBinding",""]],inputs:{nodes:"nodes",parentIdField:"parentIdField",idField:"idField",loadOnDemand:"loadOnDemand",isVisible:"isVisible"},features:[de,N]})}return i})(),nt=class{hierarchyBinding;movedItemNewIndex;constructor(s){this.hierarchyBinding=s}add({sourceItem:s,destinationItem:e,dropPosition:t,sourceTree:n,destinationTree:r}){let a=Object.assign({},g(s));if(t===S.Over){Ii(e,r);let c=this.childrenFor(g(e)),h=o(r.loadMoreService)?Math.min(r.loadMoreService.getGroupSize(g(e)),c.length):c.length;c.splice(h,0,a),Ne(this.hierarchyBinding.childrenField)(g(e),c),this.movedItemNewIndex=fe(e.item.index,h)}else{let c=this.getParentNodes(e,r),h=t===S.After?1:0,f=c.indexOf(g(e))+h;c.splice(f,0,a);let b=e.parent?e.parent.item.index:null;this.movedItemNewIndex=fe(b,f)}let d=t===S.Over?g(e):g(e.parent);Di(r,d),Si(r,g(s),a),n!==r&&!r.loadOnDemand&&r.preloadChildNodes(),n!==r&&(r.changeDetectorRef.detectChanges(),r.focus(this.movedItemNewIndex))}remove({sourceItem:s,sourceTree:e,destinationTree:t}){let n=this.getParentNodes(s,e),r=n.indexOf(g(s));if(n.splice(r,1),xi(s.parent,n,e),yi(e,g(s.parent)),e.loadOnDemand||e.preloadChildNodes(),e===t){t.changeDetectorRef.detectChanges();let a=Ci(this.movedItemNewIndex,s.item.index);t.focus(a)}}getParentNodes(s,e){return o(s.parent)?this.childrenFor(g(s.parent)):e.nodes}childrenFor(s){return D(this.hierarchyBinding.childrenField)(s)||[]}},ts=new te,_i=(i,s,e=null,t="")=>q(i)?i.map((n,r)=>{let a=ts.nodeIndex(r.toString(),t),d={dataItem:n,index:a,parent:e,visible:!0};return d.children=_i(D(s)(n),s,d,a),d}):[],Ls=(()=>{class i extends ki{component;dragAndDropDirective;set childrenField(e){if(!e)throw new Error("'childrenField' cannot be empty");this._childrenField=e}get childrenField(){return this._childrenField}set nodes(e){this._nodes=e}get nodes(){return this._nodes}_nodes;set isVisible(e){this.component.isVisible=e}loadOnDemand=!0;_childrenField;originalData=[];constructor(e,t){super(e),this.component=e,this.dragAndDropDirective=t;let n=!o(this.dragAndDropDirective);this.component.isVisible=n?r=>this.visibleNodes.has(r):li}ngOnInit(){o(this.childrenField)&&(this.component.children=e=>$(D(this.childrenField)(e)),this.component.hasChildren=e=>{let t=D(this.childrenField)(e);return!!(t&&t.length)},this.component.editService=new nt(this),this.component.filterChange.subscribe(this.handleFilterChange.bind(this)),this.component.filter&&this.handleFilterChange(this.component.filter),!this.loadOnDemand&&o(this.component.preloadChildNodes)&&this.component.preloadChildNodes())}ngOnChanges(e){L("childrenField",e,!1)&&(this.nodes=this.originalData,this.updateNodes(this.originalData)),L("nodes",e,!1)&&this.updateNodes(e.nodes.currentValue),W(["nodes","loadOnDemand"],e)&&!this.loadOnDemand&&o(this.component.preloadChildNodes)&&this.component.preloadChildNodes()}updateNodes(e){this.originalData=e||[],this.filterData=_i(e,this.childrenField)||[],this.updateVisibleNodes(this.filterData)}static \u0275fac=function(t){return new(t||i)(l(Ee),l(qn,9))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewHierarchyBinding",""]],inputs:{childrenField:"childrenField",nodes:"nodes",isVisible:"isVisible",loadOnDemand:"loadOnDemand"},features:[de,N]})}return i})();var zs=(()=>{class i{treeView;navigationService;set isSelected(e){this.treeView.isSelected=e}selectKey;selection;selectedKeys;selectedKeysChange=new v;get getAriaMultiselectable(){return this.options.mode==="multiple"}subscriptions=new E;get options(){let e={enabled:!0,mode:"single"};if(!o(this.selection)||typeof this.selection=="string")return e;let t=rt(this.selection)?{enabled:this.selection}:this.selection;return Object.assign(e,t)}selectActions={multiple:e=>this.selectMultiple(e),single:e=>this.selectSingle(e)};state=new Set;lastChange;constructor(e,t){this.treeView=e,this.navigationService=t,this.subscriptions.add(this.treeView.selectionChange.subscribe(this.select.bind(this))),this.treeView.isSelected=(n,r)=>this.state.has(this.itemKey({dataItem:n,index:r})),this.navigationService.deselectAllButCurrentItem.subscribe(n=>{this.selectSingle(n)})}ngOnChanges(e){L("selectedKeys",e,!1)&&e.selectedKeys.currentValue!==this.lastChange&&(this.state=new Set(e.selectedKeys.currentValue));let t=typeof this.selection=="boolean"&&this.selection;this.navigationService.selection=t?"single":this.selection?.mode}ngOnDestroy(){this.subscriptions.unsubscribe()}itemKey(e){if(!this.selectKey)return e.index;if(typeof this.selectKey=="string")return e.dataItem[this.selectKey];if(typeof this.selectKey=="function")return this.selectKey(e)}select(e){let{enabled:t,mode:n}=this.options,r=this.selectActions[n]||hi;t&&r(e)}selectSingle(e){let t=this.itemKey(e);this.state.has(t)||(this.state.clear(),this.state.add(t),this.notify())}selectMultiple(e){let t=this.itemKey(e),n=this.state.has(t);o(t)&&(n?this.state.delete(t):this.state.add(t),this.notify())}notify(){this.lastChange=Array.from(this.state),this.selectedKeysChange.emit(this.lastChange)}static \u0275fac=function(t){return new(t||i)(l(ee),l(ie))};static \u0275dir=x({type:i,selectors:[["","kendoTreeViewSelectable",""]],hostVars:1,hostBindings:function(t,n){t&2&&V("aria-multiselectable",n.getAriaMultiselectable)},inputs:{isSelected:"isSelected",selectKey:[0,"selectBy","selectKey"],selection:[0,"kendoTreeViewSelectable","selection"],selectedKeys:"selectedKeys"},outputs:{selectedKeysChange:"selectedKeysChange"},features:[N]})}return i})();export{Sn as a,Ee as b,vi as c,ee as d,Rs as e,As as f,I as g,S as h,Zn as i,qn as j,Fs as k,Bs as l,Ls as m,zs as n};
