import{B as Ct,C as De,m as Nt,r as Ot,t as St}from"./chunk-EGEGUZEI.js";import"./chunk-2BXKDYIE.js";import"./chunk-F535I4SB.js";import"./chunk-DPP5YR5E.js";import{c as Rt}from"./chunk-5QBFDO7N.js";import{v as Q}from"./chunk-WY6GZB3U.js";import{Aa as ht,Ba as ft,C as lt,Cb as ye,Eb as Me,Fb as O,I as _t,J as pt,K as me,L as Ce,M as ue,N as Re,O as Ie,S as mt,Sb as Le,Vb as ce,a as Oe,db as xe,e as Se,eb as At,fa as ut,kc as vt,mc as S,nc as Et,p as st,q as rt,r as at,ra as dt,s as ct,za as gt}from"./chunk-PJWNB2CH.js";import{$a as x,A as $e,Aa as ee,Ac as G,Bc as tt,C as je,Ca as z,Cb as h,Cc as nt,Db as c,Fc as ae,Gc as it,Ib as J,Ic as ot,Jb as P,K as We,Ka as te,Kb as M,Lb as L,Mb as V,Na as r,Nb as f,Oa as ne,Ob as W,Pb as C,Ra as _e,Sa as m,Sb as ie,T as Qe,Tb as oe,Ub as se,Vb as R,Xa as E,Xb as pe,Za as k,ab as u,ea as w,ec as Ye,f as ve,fa as Y,fb as N,fc as et,gb as a,hb as Ee,ia as qe,ib as y,ic as re,k as U,ka as Je,kb as Ze,lc as Ne,p as ze,qa as Xe,qb as l,ra as d,rb as _,sa as g,sb as T,tb as H,u as He,ub as $,va as le,vb as q,wb as v,za as I,zc as j}from"./chunk-BZNEOQID.js";var X=class t{responses=new U;submit(s){let e=s.length,n=`"${s}" contains exactly ${e} symbols.`;setTimeout(()=>this.responses.next(n),1e3)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac})};var Bt=["messageBoxInput"],Lt=t=>({"aria-label":t});function zt(t,s){if(t&1){let e=v();T(0,"kendo-textbox-separator"),l(1,"button",6),h("click",function(){d(e);let i=c(3);return g(i.sendClick())}),_()}if(t&2){let e=c(3);r(),a("svgIcon",e.sendIcon)("tabindex",0),N("title",e.textFor("send"))}}function Ht(t,s){if(t&1){let e=v();l(0,"kendo-textbox",4,0),h("keydown",function(i){d(e);let o=c(2);return g(o.inputKeydown(i))}),u(2,zt,2,3,"ng-template",5),_()}if(t&2){let e=c(2);a("inputAttributes",pe(2,Lt,e.textFor("messageBoxInputLabel")))("placeholder",e.textFor("messagePlaceholder"))}}function $t(t,s){if(t&1){let e=v();l(0,"kendo-textarea",7,0),h("keydown",function(i){d(e);let o=c(2);return g(o.textAreaKeydown(i))}),l(2,"kendo-textarea-suffix")(3,"button",6),h("click",function(){d(e);let i=c(2);return g(i.sendClick())}),_()()()}if(t&2){let e=c(2);a("rows",3)("inputAttributes",pe(7,Lt,e.textFor("messageBoxInputLabel")))("placeholder",e.textFor("messagePlaceholder"))("showSuffixSeparator",!0),r(3),a("svgIcon",e.sendIcon)("tabindex",0),N("title",e.textFor("send"))}}function jt(t,s){if(t&1&&(H(0),u(1,Ht,3,4,"kendo-textbox",2)(2,$t,4,9,"kendo-textarea",3),$()),t&2){let e=c();r(),a("ngIf",e.type==="textbox"),r(),a("ngIf",e.type==="textarea")}}function Wt(t,s){}function Qt(t,s){if(t&1&&u(0,Wt,0,0,"ng-template",8),t&2){let e=c();a("ngTemplateOutlet",e.messageBoxTemplate==null?null:e.messageBoxTemplate.templateRef)}}var Dt=["item"];function qt(t,s){if(t&1){let e=v();l(0,"span",2,0),h("click",function(){let i=d(e).$implicit,o=c();return g(o.actionClick(i))})("keydown",function(i){let o=d(e).$implicit,p=c();return g(p.actionKeydown(i,o))}),f(2),_()}if(t&2){let e=s.$implicit,n=s.index,i=s.first,o=s.last,p=c();y("k-selected",p.isSelected(n))("k-focus",p.isSelected(n))("k-first",i)("k-last",o),N("tabindex",0),r(2),C(" ",e.title||e.value," ")}}var Jt=t=>({$implicit:t});function Xt(t,s){if(t&1&&(l(0,"time",4),f(1),_()),t&2){let e=c();N("aria-hidden",!e.selected),r(),C(" ",e.formatTimeStamp(e.message.timestamp)," ")}}function Zt(t,s){t&1&&q(0)}function Yt(t,s){if(t&1&&(l(0,"div",6),u(1,Zt,1,0,"ng-container",7),_()),t&2){let e=c(2);r(),a("ngTemplateOutlet",e.template.templateRef)("ngTemplateOutletContext",pe(2,Jt,e.message))}}function en(t,s){if(t&1&&(l(0,"div",6),f(1),_()),t&2){let e=c(2);r(),C(" ",e.message.text," ")}}function tn(t,s){if(t&1&&(H(0),u(1,Yt,2,4,"div",5)(2,en,2,1,"div",5),$()),t&2){let e=c();r(),a("ngIf",e.template),r(),a("ngIf",!e.template&&e.message.text)}}function nn(t,s){if(t&1&&(l(0,"span",8),f(1),_()),t&2){let e=c();r(),C(" ",e.message.status," ")}}function on(t,s){t&1&&(l(0,"div",6)(1,"div",9),T(2,"span")(3,"span")(4,"span"),_()())}function sn(t,s){t&1&&q(0)}function rn(t,s){if(t&1&&(H(0),u(1,sn,1,0,"ng-container",2),$()),t&2){let e=c();r(),a("ngTemplateOutlet",e.template.templateRef)("ngTemplateOutletContext",e.context)}}function an(t,s){if(t&1&&(l(0,"h5",7),f(1),_()),t&2){let e=c(2);r(),C(" ",e.attachment.title," ")}}function cn(t,s){if(t&1&&(l(0,"h6",8),f(1),_()),t&2){let e=c(2);r(),C(" ",e.attachment.subtitle," ")}}function ln(t,s){if(t&1&&T(0,"img"),t&2){let e=c(2);N("src",e.attachment.content,te)}}function _n(t,s){if(t&1&&(H(0),f(1),$()),t&2){let e=c(2);r(),C(" ",e.attachment.content," ")}}function pn(t,s){if(t&1&&(l(0,"div",3)(1,"div",4),u(2,an,2,1,"h5",5)(3,cn,2,1,"h6",6)(4,ln,1,1,"img",0)(5,_n,2,1,"ng-container",0),_()()),t&2){let e=c();r(2),a("ngIf",e.attachment.title),r(),a("ngIf",e.attachment.subtitle),r(),a("ngIf",e.image),r(),a("ngIf",e.unknown)}}var mn=["deck"];function un(t,s){if(t&1){let e=v();l(0,"button",5),h("click",function(){d(e);let i=c();return g(i.scrollTo(-1))}),_()}if(t&2){let e=c();a("svgIcon",e.chevronLeftIcon),N("title",e.textFor("messageAttachmentLeftArrow"))}}function dn(t,s){if(t&1){let e=v();l(0,"kendo-chat-attachment",6,1),h("click",function(){let i=d(e).index,o=c();return g(o.itemClick(i))})("keydown",function(i){let o=d(e).$implicit,p=c();return g(p.itemKeydown(i,o))}),_()}if(t&2){let e=s.$implicit,n=s.index,i=s.first,o=s.last,p=c();y("k-selected",p.isSelected(n))("k-focus",p.isSelected(n))("k-card-wrap",!0)("k-first",i)("k-last",o),a("attachment",e)("template",p.template),N("tabindex",p.tabbable&&p.isSelected(n)?"0":"-1")}}function gn(t,s){if(t&1){let e=v();l(0,"button",7),h("click",function(){d(e);let i=c();return g(i.scrollTo(1))}),_()}if(t&2){let e=c();a("svgIcon",e.chevronRightIcon),N("title",e.textFor("messageAttachmentRightArrow"))}}function hn(t,s){if(t&1&&(l(0,"div",10),f(1),_()),t&2){let e=c().$implicit,n=c();r(),C(" ",n.formatTimeStamp(e.timestamp)," ")}}function fn(t,s){if(t&1&&(l(0,"p",15),f(1),_()),t&2){let e=c(2).$implicit;r(),W(e.author.name)}}function An(t,s){if(t&1&&(l(0,"div",16)(1,"span",17),T(2,"img",18),_()()),t&2){let e=c(2).$implicit,n=c();r(2),a("alt",n.textFor("messageAvatarAlt")),N("src",e.author.avatarUrl,te)}}function vn(t,s){if(t&1&&(l(0,"div",16)(1,"span",17),T(2,"img",21),_()()),t&2){let e=c().$implicit;r(2),a("src",e.user==null?null:e.user.avatarUrl,te)}}function En(t,s){if(t&1&&T(0,"kendo-chat-attachment",22),t&2){let e=c().$implicit,n=c(3);a("attachment",e.attachments[0])("template",n.attachmentTemplate)}}function Nn(t,s){if(t&1){let e=v();H(0),u(1,vn,3,1,"div",13),l(2,"kendo-chat-message",19,0),h("click",function(){d(e);let i=V(3),o=c(3);return g(o.select(i))})("focus",function(){d(e);let i=V(3),o=c(3);return g(o.select(i))}),_(),u(4,En,1,2,"kendo-chat-attachment",20),$()}if(t&2){let e=s.$implicit,n=s.first,i=s.last,o=c(2),p=o.$implicit,A=o.last,D=c();r(),a("ngIf",e.user==null?null:e.user.avatarUrl),r(),y("k-only",p.messages.length===1)("k-first",p.messages.length>1&&n)("k-last",p.messages.length>1&&i),a("message",e)("tabbable",A&&i)("template",D.messageTemplate),r(2),a("ngIf",e.attachments&&e.attachments.length===1)}}function On(t,s){if(t&1&&(l(0,"div",11),u(1,fn,2,1,"p",12)(2,An,3,2,"div",13)(3,Nn,5,11,"ng-container",14),_()),t&2){let e=c().$implicit,n=c();y("k-alt",n.isOwnMessage(e.messages[0]))("k-no-avatar",!e.author.avatarUrl),r(),a("ngIf",e.author.name),r(),a("ngIf",e.author.avatarUrl),r(),a("ngForOf",e.messages)}}function Sn(t,s){if(t&1){let e=v();l(0,"kendo-chat-message-attachments",23,1),h("click",function(){d(e);let i=V(1),o=c(2);return g(o.select(i))})("focus",function(){d(e);let i=V(1),o=c(2);return g(o.select(i))}),_()}if(t&2){let e=c(),n=e.$implicit,i=e.last,o=c();a("attachments",n.attachments)("layout",n.attachmentLayout)("localization",o.localization)("tabbable",i)("template",o.attachmentTemplate)}}function Cn(t,s){if(t&1){let e=v();l(0,"kendo-chat-suggested-actions",24,2),h("dispatch",function(i){d(e);let o=c().$implicit,p=c();return g(p.dispatchAction(i,p.last(o.messages)))})("click",function(){d(e);let i=V(1),o=c(2);return g(o.select(i))})("focus",function(){d(e);let i=V(1),o=c(2);return g(o.select(i))}),_()}if(t&2){let e=c(),n=e.$implicit,i=e.last;a("actions",n.actions)("tabbable",i)}}function Rn(t,s){if(t&1&&(H(0)(1,5),u(2,hn,2,1,"div",6)(3,On,4,7,"div",7)(4,Sn,2,5,"kendo-chat-message-attachments",8)(5,Cn,2,2,"kendo-chat-suggested-actions",9),$()()),t&2){let e=s.$implicit;r(),a("ngSwitch",e.type),r(),a("ngSwitchCase","date-marker"),r(),a("ngSwitchCase","message-group"),r(),a("ngSwitchCase","attachment-group"),r(),a("ngSwitchCase","action-group")}}var In=["messageBox"],xn=["messageList"],yn=["content"];function Mn(t,s){if(t&1){let e=v();l(0,"button",9),h("click",function(){let i=d(e).index,o=c();return g(o.viewChange(i))}),f(1),_()}if(t&2){let e=s.$implicit,n=s.index,i=c();a("svgIcon",e.svgIcon)("icon",e.icon)("selected",n===i.activeView),r(),C(" ",e.buttonText," ")}}function Ln(t,s){}function Dn(t,s){if(t&1&&u(0,Ln,0,0,"ng-template",10),t&2){let e=c();a("ngTemplateOutlet",e.toolbarActionsTemplate==null?null:e.toolbarActionsTemplate.templateRef)}}function wn(t,s){t&1&&q(0)}function kn(t,s){if(t&1){let e=v();l(0,"div",11)(1,"div",12)(2,"button",13),h("click",function(){d(e);let i=c();return g(i.handleGenerateOutput())}),f(3),_()()()}if(t&2){let e=c();r(2),a("svgIcon",e.sparklesIcon),r(),W(e.messageFor("generateOutput"))}}function Tn(t,s){if(t&1){let e=v();l(0,"kendo-panelbar",1),h("itemClick",function(i){d(e);let o=c();return g(o.itemClickHandler(i))}),_()}if(t&2){let e=c();a("items",e.panelBarItems)("animate",!1)("selectable",!1)}}var bn=["kendoAIPromptOutputCard",""];function Gn(t,s){if(t&1){let e=v();H(0),T(1,"span",8),l(2,"button",9),h("click",function(){d(e);let i=c();return g(i.handleRating("positive"))}),_(),l(3,"button",10),h("click",function(){d(e);let i=c();return g(i.handleRating("negative"))}),_(),$()}if(t&2){let e=c();r(2),a("svgIcon",e.positiveRatingIcon),r(),a("svgIcon",e.negativeRatingIcon)}}function Un(t,s){if(t&1&&T(0,"div",3),t&2){let e=s.$implicit;a("promptOutput",e)}}function Pn(t,s){if(t&1&&(l(0,"div",1),u(1,Un,1,1,"div",2),_()),t&2){let e=c();r(),a("ngForOf",e.promptOutputs)}}function Vn(t,s){if(t&1){let e=v();l(0,"div",8),h("click",function(){let i=d(e).$implicit,o=c(4);return g(o.suggestionClick(i))}),f(1),_()}if(t&2){let e=s.$implicit;r(),C(" ",e," ")}}function Kn(t,s){if(t&1&&(l(0,"div",6),u(1,Vn,2,1,"div",7),_()),t&2){let e=c(3);N("id",e.contentId),r(),a("ngForOf",e.promptSuggestions)}}function Fn(t,s){if(t&1){let e=v();l(0,"div",3)(1,"button",4),h("click",function(){d(e);let i=c(2);return g(i.showSuggestions=!i.showSuggestions)}),f(2),_(),u(3,Kn,2,2,"div",5),_()}if(t&2){let e=c(2);r(),a("icon",e.suggestionsIcons.font)("svgIcon",e.suggestionsIcons.svg),N("aria-controls",e.contentId)("aria-expanded",e.showSuggestions),r(),C(" ",e.messageFor("promptSuggestions")," "),r(),a("ngIf",e.showSuggestions)}}function Bn(t,s){if(t&1){let e=v();l(0,"kendo-textarea",1),se("valueChange",function(i){d(e);let o=c();return oe(o.textAreaValue,i)||(o.textAreaValue=i),g(i)}),_(),u(1,Fn,4,6,"div",2)}if(t&2){let e=c();a("placeholder",e.messageFor("promptPlaceholder"))("rows",1),ie("value",e.textAreaValue),r(),a("ngIf",e.promptSuggestions)}}function zn(t,s){if(t&1&&T(0,"img",6),t&2){let e=c();a("src",e.imageUrl,te)}}function Hn(t,s){if(t&1&&(l(0,"h5",7),f(1),_()),t&2){let e=c();r(),C(" ",e.title," ")}}function $n(t,s){if(t&1&&(l(0,"h6",8),f(1),_()),t&2){let e=c();r(),C(" ",e.subtitle," ")}}function jn(t,s){if(t&1){let e=v();l(0,"span",9)(1,"button",10),h("click",function(){let i=d(e).$implicit,o=c();return g(o.onClick(i))}),f(2),_()()}if(t&2){let e=s.$implicit;r(2),C(" ",e.title," ")}}var wt=(()=>{class t{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(n){return new(n||t)(m(ne,8))};static \u0275dir=k({type:t,selectors:[["","kendoChatAttachmentTemplate",""]]})}return t})(),he=class{message;constructor(s){this.message=s}},Wn=()=>{},Qn={reply:(t,s)=>{s.sendMessage.emit(new he({author:s.user,text:t.value,timestamp:new Date}))},call:t=>{window.open("tel:"+t.value)},openUrl:t=>{window.open(t.value)}},qn=t=>Qn[t.type]||Wn,kt=(()=>{class t{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(n){return new(n||t)(m(ne,8))};static \u0275dir=k({type:t,selectors:[["","kendoChatMessageTemplate",""]]})}return t})(),Tt={name:"@progress/kendo-angular-conversational-ui",productName:"Kendo UI for Angular",productCode:"KENDOUIANGULAR",productCodes:["KENDOUIANGULAR"],publishDate:1745304230,version:"18.5.2",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/"},bt=(()=>{class t{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(n){return new(n||t)(m(ne))};static \u0275dir=k({type:t,selectors:[["","kendoChatMessageBoxTemplate",""]]})}return t})(),Jn=(()=>{class t{borderColor="inherit";messageBoxInput;user;autoScroll;type;localization;messageBoxTemplate;sendMessage=new I;sendIcon=_t;sendClick(){let e=this.messageBoxInput,n=e.value;if(!n)return;let i={author:this.user,text:n,timestamp:new Date};this.sendMessage.emit(new he(i)),e.value=null,e.focus(),this.autoScroll=!0}inputKeydown(e){e.keyCode===S.Enter&&this.sendClick()}textAreaKeydown(e){if(!(e.keyCode===S.Enter))return;let i=e.metaKey||e.ctrlKey;!(e.shiftKey||e.metaKey||e.ctrlKey)&&(e.preventDefault(),this.sendClick()),i&&(this.messageBoxInput.value+=`\r
`)}textFor(e){return this.localization.get(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=E({type:t,selectors:[["kendo-message-box"]],viewQuery:function(n,i){if(n&1&&P(Bt,5),n&2){let o;M(o=L())&&(i.messageBoxInput=o.first)}},hostVars:2,hostBindings:function(n,i){n&2&&Ee("border-color",i.borderColor)},inputs:{user:"user",autoScroll:"autoScroll",type:"type",localization:"localization",messageBoxTemplate:"messageBoxTemplate"},outputs:{sendMessage:"sendMessage"},decls:2,vars:2,consts:[["messageBoxInput",""],[4,"ngIf"],["class","k-message-box",3,"inputAttributes","placeholder","keydown",4,"ngIf"],["class","k-message-box !k-align-items-end","resizable","none",3,"rows","inputAttributes","placeholder","showSuffixSeparator","keydown",4,"ngIf"],[1,"k-message-box",3,"keydown","inputAttributes","placeholder"],["kendoTextBoxSuffixTemplate",""],["kendoButton","","fillMode","flat","icon","paper-plane",1,"k-chat-send",3,"click","svgIcon","tabindex"],["resizable","none",1,"k-message-box","!k-align-items-end",3,"keydown","rows","inputAttributes","placeholder","showSuffixSeparator"],[3,"ngTemplateOutlet"]],template:function(n,i){n&1&&u(0,jt,3,2,"ng-container",1)(1,Qt,1,1,null,1),n&2&&(a("ngIf",!i.messageBoxTemplate),r(),a("ngIf",i.messageBoxTemplate))},dependencies:[G,Q,ae,St,De,Nt,Ot,Ct],encapsulation:2})}return t})(),ke=class{prevented=!1;preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}},Te=class extends ke{action;message;constructor(s,e){super(),this.action=s,this.message=e}},Xn=(t,s)=>{for(;t&&!s(t);)t=t.parentNode;return t},K=class{selected},Gt=(t,s)=>t&&s.author&&t.id===s.author.id,be=t=>t[t.length-1],Zn=(t,s)=>t&&s&&(s.getDate()!==t.getDate()||s.getMonth()!==t.getMonth()||s.getFullYear()!==t.getFullYear()),Yn=(t,s)=>{let e=s.timestamp,n=be(t);if(e&&(!n||Zn(e,n.timestamp))){let i={type:"date-marker",timestamp:e,trackBy:e.getTime()};t.push(i)}},ei=(t,s,e)=>{let n=be(t),i;if(Ne()&&!s.author)throw new Error("Author must be set for message: "+JSON.stringify(s));s.typing&&!e||(n&&n.type==="message-group"&&(i=n.messages),i&&Gt(s.author,be(i))?i.push(s):t.push({type:"message-group",messages:[s],author:s.author,timestamp:s.timestamp,trackBy:s}))},ti=t=>(s,e,n)=>{let i=n===t-1;return Yn(s,e),ei(s,e,i),e.attachments&&e.attachments.length>1&&s.push({type:"attachment-group",attachments:e.attachments,attachmentLayout:e.attachmentLayout,timestamp:e.timestamp,trackBy:e}),e.suggestedActions&&i&&s.push({type:"action-group",actions:e.suggestedActions,timestamp:e.timestamp,trackBy:e}),s},ni=t=>t.reduce(ti(t.length),[]),we=(()=>{class t extends K{actions;tabbable;dispatch=new I;defaultClass=!0;items;selectedIndex=0;keyHandlers={[S.Tab]:e=>this.changeSelectedIndex(e),[S.Enter]:(e,n)=>this.actionClick(n),[S.Space]:(e,n)=>this.actionClick(n)};isSelected(e){return this.selected&&this.selectedIndex===e}actionClick(e){this.dispatch.next(e)}actionKeydown(e,n){let i=this.keyHandlers[e.keyCode];i&&i(e,n)}focus(){}changeSelectedIndex(e){let n=e.shiftKey?-1:1,i=this.selectedIndex;this.selectedIndex=Math.max(0,Math.min(i+n,this.items.length-1))}static \u0275fac=(()=>{let e;return function(i){return(e||(e=le(t)))(i||t)}})();static \u0275cmp=E({type:t,selectors:[["kendo-chat-suggested-actions"]],viewQuery:function(n,i){if(n&1&&P(Dt,5),n&2){let o;M(o=L())&&(i.items=o)}},hostVars:2,hostBindings:function(n,i){n&2&&y("k-quick-replies",i.defaultClass)},inputs:{actions:"actions",tabbable:"tabbable"},outputs:{dispatch:"dispatch"},features:[R([{provide:K,useExisting:w(()=>t)}]),x],decls:1,vars:1,consts:[["item",""],["class","k-quick-reply","role","button",3,"k-selected","k-focus","k-first","k-last","click","keydown",4,"ngFor","ngForOf"],["role","button",1,"k-quick-reply",3,"click","keydown"]],template:function(n,i){n&1&&u(0,qt,3,10,"span",1),n&2&&a("ngForOf",i.actions)},dependencies:[j],encapsulation:2})}return t})(),xt=(()=>{class t extends K{element;intl;message;tabbable;template;cssClass=!0;selected;get tabIndex(){return this.tabbable?"0":"-1"}constructor(e,n){super(),this.element=e,this.intl=n}formatTimeStamp(e){return this.intl.formatDate(e,{datetime:"short"})}focus(){this.element.nativeElement.focus()}static \u0275fac=function(n){return new(n||t)(m(z),m(Se))};static \u0275cmp=E({type:t,selectors:[["kendo-chat-message"]],hostVars:7,hostBindings:function(n,i){n&2&&(N("tabIndex",i.tabIndex),y("k-message",i.cssClass)("k-selected",i.selected)("k-focus",i.selected))},inputs:{message:"message",tabbable:"tabbable",template:"template"},features:[R([{provide:K,useExisting:w(()=>t)}]),x],decls:5,vars:4,consts:[["typing",""],["class","k-message-time",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","k-message-status",4,"ngIf"],[1,"k-message-time"],["class","k-chat-bubble",4,"ngIf"],[1,"k-chat-bubble"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"k-message-status"],[1,"k-typing-indicator"]],template:function(n,i){if(n&1&&u(0,Xt,2,2,"time",1)(1,tn,3,2,"ng-container",2)(2,nn,2,1,"span",3)(3,on,5,0,"ng-template",null,0,re),n&2){let o=V(4);a("ngIf",i.message.timestamp),r(),a("ngIf",!i.message.typing)("ngIfElse",o),r(),a("ngIf",i.message.status)}},dependencies:[G,ae],encapsulation:2})}return t})(),Ut=(()=>{class t{set attachment(e){this._attachment=e,this.context={$implicit:this.attachment}}get attachment(){return this._attachment}template;get image(){return this.contentType.indexOf("image/")===0}get unknown(){return!this.image}context;get contentType(){return this.attachment.contentType||""}_attachment;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=E({type:t,selectors:[["kendo-chat-attachment"]],inputs:{attachment:"attachment",template:"template"},decls:2,vars:2,consts:[[4,"ngIf"],["class","k-card",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"k-card"],[1,"k-card-body"],["class","k-card-title",4,"ngIf"],["class","k-card-subtitle",4,"ngIf"],[1,"k-card-title"],[1,"k-card-subtitle"]],template:function(n,i){n&1&&u(0,rn,2,2,"ng-container",0)(1,pn,6,4,"div",1),n&2&&(a("ngIf",i.template),r(),a("ngIf",!i.template))},dependencies:[G,ae],encapsulation:2})}return t})(),ii=(()=>{class t extends K{zone;localizationService;chevronLeftIcon=ct;chevronRightIcon=rt;attachments;layout;tabbable;template;localization;get carousel(){return this.layout!=="list"}deck;items;scrollPosition=0;selectedIndex=0;scrollSubscription;direction;get showLeftArrow(){return this.carousel&&this.direction==="rtl"?this.scrollPosition>-1:this.scrollPosition>0}get showRightArrow(){return this.carousel&&this.direction==="rtl"?this.scrollPosition<0:this.scrollPosition<1}carouselKeyHandlers={[S.ArrowLeft]:e=>this.navigateTo(e,this.direction==="rtl"?1:-1),[S.ArrowRight]:e=>this.navigateTo(e,this.direction==="rtl"?-1:1)};listKeyHandlers={[S.ArrowUp]:e=>this.navigateTo(e,-1),[S.ArrowDown]:e=>this.navigateTo(e,1)};constructor(e,n){super(),this.zone=e,this.localizationService=n,this.direction=this.localizationService.rtl?"rtl":"ltr"}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.scrollSubscription=$e(this.deck.nativeElement,"scroll").pipe(We(100)).subscribe(()=>this.onScroll())})}ngOnDestroy(){this.scrollSubscription.unsubscribe()}isSelected(e){return this.selectedIndex===e}itemKeydown(e,n){let o=(this.layout==="list"?this.listKeyHandlers:this.carouselKeyHandlers)[e.keyCode];o&&o(e,n)}itemClick(e){this.select(e)}focus(){this.select(this.selectedIndex)}scrollTo(e){let n=this.deck.nativeElement,i=n.scrollWidth/this.items.length,o=n.scrollWidth-n.offsetWidth,p=n.scrollLeft+i*e;n.scrollLeft=this.direction==="rtl"?Math.min(0,o,p):Math.max(0,Math.min(o,p))}select(e){this.selectedIndex=e;let n=this.items.toArray()[e];n&&n.nativeElement.focus()}navigateTo(e,n){let i=this.selectedIndex,o=Math.max(0,Math.min(i+n,this.items.length-1));o!==i&&(this.select(o),e.preventDefault())}onScroll(){let e=this.deck.nativeElement;if(e.scrollWidth===0)return;let n=e.scrollLeft/(e.scrollWidth-e.offsetWidth);n!==this.scrollPosition&&this.zone.run(()=>{this.scrollPosition=n})}textFor(e){return this.localization.get(e)}static \u0275fac=function(n){return new(n||t)(m(ee),m(O))};static \u0275cmp=E({type:t,selectors:[["kendo-chat-message-attachments"]],viewQuery:function(n,i){if(n&1&&(P(mn,7,z),P(Dt,5,z)),n&2){let o;M(o=L())&&(i.deck=o.first),M(o=L())&&(i.items=o)}},hostVars:2,hostBindings:function(n,i){n&2&&y("k-card-deck-scrollwrap",i.carousel)},inputs:{attachments:"attachments",layout:"layout",tabbable:"tabbable",template:"template",localization:"localization"},features:[R([{provide:K,useExisting:w(()=>t)}]),x],decls:5,vars:7,consts:[["deck",""],["item",""],["kendoButton","","tabindex","-1","icon","chevron-left",3,"svgIcon","click",4,"ngIf"],[3,"attachment","template","k-selected","k-focus","k-card-wrap","k-first","k-last","click","keydown",4,"ngFor","ngForOf"],["kendoButton","","tabindex","-1","icon","chevron-right",3,"svgIcon","click",4,"ngIf"],["kendoButton","","tabindex","-1","icon","chevron-left",3,"click","svgIcon"],[3,"click","keydown","attachment","template"],["kendoButton","","tabindex","-1","icon","chevron-right",3,"click","svgIcon"]],template:function(n,i){n&1&&(u(0,un,1,2,"button",2),l(1,"div",null,0),u(3,dn,2,13,"kendo-chat-attachment",3),_(),u(4,gn,1,2,"button",4)),n&2&&(a("ngIf",i.showLeftArrow),r(),y("k-card-deck",i.carousel)("k-card-list",!i.carousel),r(2),a("ngForOf",i.attachments),r(),a("ngIf",i.showRightArrow))},dependencies:[G,Q,j,Ut],encapsulation:2})}return t})(),oi=(()=>{class t{element;intl;renderer;set messages(e){let n=e||[];this.view=ni(n),this._messages=n}get messages(){return this._messages}attachmentTemplate;messageTemplate;localization;user;executeAction=new I;navigate=new I;resize=new I;items;cssClass=!0;view=[];_messages;subs=new ve;selectedItem;keyActions={[S.Home]:e=>this.onHomeOrEndKeyDown("home"),[S.End]:e=>this.onHomeOrEndKeyDown("end"),[S.ArrowUp]:e=>this.navigateTo(e,-1),[S.ArrowDown]:e=>this.navigateTo(e,1),[S.Tab]:e=>this.onTabKeyDown(e)};constructor(e,n,i){this.element=e,this.intl=n,this.renderer=i}ngOnInit(){let e=this.element.nativeElement;this.subs.add(this.renderer.listen(e,"keydown",n=>this.onKeydown(n))),this.subs.add(this.renderer.listen(e,"focusout",n=>this.onBlur(n)))}ngAfterViewInit(){this.selectedItem=this.items.last}ngOnDestroy(){this.subs.unsubscribe()}onResize(){this.resize.emit()}formatTimeStamp(e){return this.intl.formatDate(e,{date:"full"})}onKeydown(e){let n=this.keyActions[e.keyCode];n&&n(e)}onBlur(e){let n=e.relatedTarget||document.activeElement;!Xn(n,o=>o===this.element.nativeElement)&&this.select(null)}isOwnMessage(e){return Gt(this.user,e)}dispatchAction(e,n){let i=new Te(e,n);this.executeAction.emit(i)}trackGroup(e,n){return n.trackBy}select(e){let n=this.selectedItem;n&&(n.selected=!1),e&&(e.selected=!0,this.selectedItem=e)}last(e){if(!(!e||e.length===0))return e[e.length-1]}onHomeOrEndKeyDown(e){let n=this.items.toArray();e==="home"?n[0].focus():n[n.length-1].focus()}onTabKeyDown(e){let n=this.items.toArray()[this.items.length-1],i=n instanceof we,o=n instanceof xt;e.target.blur(),(i||o)&&(this.select(n),n.focus(),this.navigate.emit())}navigateTo(e,n){let i=this.items.toArray(),o=this.selectedItem,p=i.indexOf(o),A=Math.max(0,Math.min(p+n,this.items.length-1)),D=i[A],b=D instanceof we;D!==o&&(b&&D.items.toArray()[0]?.nativeElement.focus(),this.select(D),D.focus(),this.navigate.emit(),e.preventDefault())}textFor(e){return this.localization.get(e)}static \u0275fac=function(n){return new(n||t)(m(z),m(Se),m(_e))};static \u0275cmp=E({type:t,selectors:[["kendo-chat-message-list"]],viewQuery:function(n,i){if(n&1&&P(K,5),n&2){let o;M(o=L())&&(i.items=o)}},hostVars:2,hostBindings:function(n,i){n&2&&y("k-message-list-content",i.cssClass)},inputs:{messages:"messages",attachmentTemplate:"attachmentTemplate",messageTemplate:"messageTemplate",localization:"localization",user:"user"},outputs:{executeAction:"executeAction",navigate:"navigate",resize:"resize"},decls:2,vars:2,consts:[["message",""],["attachments",""],["actions",""],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"resize"],[3,"ngSwitch"],["class","k-timestamp",4,"ngSwitchCase"],["class","k-message-group",3,"k-alt","k-no-avatar",4,"ngSwitchCase"],[3,"attachments","layout","localization","tabbable","template","click","focus",4,"ngSwitchCase"],[3,"actions","tabbable","dispatch","click","focus",4,"ngSwitchCase"],[1,"k-timestamp"],[1,"k-message-group"],["class","k-author",4,"ngIf"],["class","k-avatar k-avatar-md k-avatar-solid k-avatar-solid-primary k-rounded-full",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"k-author"],[1,"k-avatar","k-avatar-md","k-avatar-solid","k-avatar-solid-primary","k-rounded-full"],[1,"k-avatar-image"],[3,"alt"],[3,"click","focus","message","tabbable","template"],[3,"attachment","template",4,"ngIf"],[3,"src"],[3,"attachment","template"],[3,"click","focus","attachments","layout","localization","tabbable","template"],[3,"dispatch","click","focus","actions","tabbable"]],template:function(n,i){n&1&&(u(0,Rn,6,5,"ng-container",3),l(1,"kendo-resize-sensor",4),h("resize",function(){return i.onResize()}),_()),n&2&&a("ngForOf",i.view)("ngForTrackBy",i.trackGroup)},dependencies:[j,tt,nt,G,xt,Ut,ii,we,vt],encapsulation:2})}return t})(),si=2,ri=(()=>{class t{element;zone;renderer;autoScroll=!0;autoScrollChange=new I;overflowAnchor="none";scrolling=!1;unsubscribe;constructor(e,n,i){this.element=e,this.zone=n,this.renderer=i}ngOnInit(){this.zone.runOutsideAngular(()=>{this.unsubscribe=this.renderer.listen(this.element.nativeElement,"scroll",()=>this.onScroll())})}ngAfterViewInit(){this.scrollToBottom()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}onScroll(){if(this.scrolling)return;let e=this.element.nativeElement,n=e.scrollTop+e.offsetHeight,o=e.scrollHeight-n<si;this.autoScroll!==o&&this.zone.run(()=>{this.autoScroll=o,this.autoScrollChange.emit(this.autoScroll)})}scrollToBottom(){if(!this.autoScroll)return;let e=this.element.nativeElement;e.scrollTop=e.scrollHeight-e.clientHeight,this.scrolling=!0,this.zone.runOutsideAngular(()=>setTimeout(()=>this.scrolling=!1,1e3))}static \u0275fac=function(n){return new(n||t)(m(z),m(ee),m(_e))};static \u0275dir=k({type:t,selectors:[["","kendoChatScrollAnchor",""]],hostVars:2,hostBindings:function(n,i){n&2&&Ee("overflow-anchor",i.overflowAnchor)},inputs:{autoScroll:"autoScroll"},outputs:{autoScrollChange:"autoScrollChange"},exportAs:["scrollAnchor"]})}return t})(),fe=class de extends ye{messagePlaceholder;send;messageListLabel;messageBoxInputLabel;messageAttachmentLeftArrow;messageAttachmentRightArrow;messageAvatarAlt;static \u0275fac=(()=>{let e;return function(i){return(e||(e=le(de)))(i||de)}})();static \u0275dir=k({type:de,selectors:[["kendoConversationalUIMessages"]],inputs:{messagePlaceholder:"messagePlaceholder",send:"send",messageListLabel:"messageListLabel",messageBoxInputLabel:"messageBoxInputLabel",messageAttachmentLeftArrow:"messageAttachmentLeftArrow",messageAttachmentRightArrow:"messageAttachmentRightArrow",messageAvatarAlt:"messageAvatarAlt"},standalone:!1,features:[x]})},ai=class ge extends fe{service;constructor(e){super(),this.service=e}static \u0275fac=function(n){return new(n||ge)(m(O))};static \u0275dir=k({type:ge,selectors:[["","kendoChatLocalizedMessages",""]],features:[R([{provide:fe,useExisting:w(()=>ge)}]),x]})},Ue=(()=>{class t{localization;zone;messages;user;messageBoxType="textbox";sendMessage=new I;executeAction=new I;get className(){return"k-chat"}get dirAttr(){return this.direction}attachmentTemplate;messageTemplate;messageBoxTemplate;messageBox;messageList;get localizationText(){return this.localization}autoScroll=!0;direction;localizationChangeSubscription;constructor(e,n){this.localization=e,this.zone=n,Oe(Tt),this.direction=e.rtl?"rtl":"ltr",this.localizationChangeSubscription=e.changes.subscribe(({rtl:i})=>{this.direction=i?"rtl":"ltr"})}ngOnChanges(){this.zone.runOutsideAngular(()=>setTimeout(()=>{this.messageList.nativeElement.style.flex="1 1 auto"}))}ngAfterViewInit(){if(Ne()&&!this.user)throw new Error("User must be set and have a valid id.")}ngOnDestroy(){this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()}dispatchAction(e){this.executeAction.emit(e),e.isDefaultPrevented()||(qn(e.action)(e.action,this),this.messageBoxTemplate||this.messageBox.messageBoxInput.focus())}textFor(e){return this.localization.get(e)}static \u0275fac=function(n){return new(n||t)(m(O),m(ee))};static \u0275cmp=E({type:t,selectors:[["kendo-chat"]],contentQueries:function(n,i,o){if(n&1&&(J(o,wt,5),J(o,kt,5),J(o,bt,5)),n&2){let p;M(p=L())&&(i.attachmentTemplate=p.first),M(p=L())&&(i.messageTemplate=p.first),M(p=L())&&(i.messageBoxTemplate=p.first)}},viewQuery:function(n,i){if(n&1&&(P(In,5),P(xn,7)),n&2){let o;M(o=L())&&(i.messageBox=o.first),M(o=L())&&(i.messageList=o.first)}},hostVars:3,hostBindings:function(n,i){n&2&&(N("dir",i.dirAttr),Ze(i.className))},inputs:{messages:"messages",user:"user",messageBoxType:"messageBoxType"},outputs:{sendMessage:"sendMessage",executeAction:"executeAction"},features:[R([O,{provide:Me,useValue:"kendo.chat"}]),Xe],decls:7,vars:12,consts:()=>{let e;e=$localize`:kendo.chat.messagePlaceholder|The placholder text of the message text input:Type a message...`;let n;n=$localize`:kendo.chat.send|The text for the Send button:Send...`;let i;i=$localize`:kendo.chat.messageListLabel|The label text for the Message list:Message list`;let o;o=$localize`:kendo.chat.messageBoxInputLabel|The label text for the Message input box:Message`;let p;p=$localize`:kendo.chat.messageAttachmentLeftArrow|The text for the left arrow of the message attachments:Previous item`;let A;A=$localize`:kendo.chat.messageAttachmentRightArrow|The text for the right arrow of the message attachments:Next item`;let D;return D=$localize`:kendo.chat.messageAvatarAlt|The alt attribute text for the avatar:Avatar`,[["messageList","","anchor","scrollAnchor"],["messageBox",""],["kendoChatLocalizedMessages","","messagePlaceholder",e,"send",n,"messageListLabel",i,"messageBoxInputLabel",o,"messageAttachmentLeftArrow",p,"messageAttachmentRightArrow",A,"messageAvatarAlt",D],["aria-live","polite","role","log","kendoChatScrollAnchor","",1,"k-message-list","k-avatars",3,"autoScrollChange","autoScroll"],[3,"executeAction","resize","navigate","messages","messageTemplate","localization","attachmentTemplate","user"],[3,"sendMessage","messageBoxTemplate","type","user","autoScroll","localization"]]},template:function(n,i){if(n&1){let o=v();q(0,2),l(1,"div",3,0),se("autoScrollChange",function(A){return d(o),oe(i.autoScroll,A)||(i.autoScroll=A),g(A)}),l(4,"kendo-chat-message-list",4),h("executeAction",function(A){return d(o),g(i.dispatchAction(A))})("resize",function(){d(o);let A=V(3);return g(A.scrollToBottom())})("navigate",function(){return d(o),g(i.autoScroll=!1)}),_()(),l(5,"kendo-message-box",5,1),h("sendMessage",function(A){return d(o),g(i.sendMessage.emit(A))}),_()}n&2&&(r(),ie("autoScroll",i.autoScroll),N("aria-label",i.textFor("messageListLabel")),r(3),a("messages",i.messages)("messageTemplate",i.messageTemplate)("localization",i.localizationText)("attachmentTemplate",i.attachmentTemplate)("user",i.user),r(),a("messageBoxTemplate",i.messageBoxTemplate)("type",i.messageBoxType)("user",i.user)("autoScroll",i.autoScroll)("localization",i.localizationText))},dependencies:[ai,ri,oi,Jn],encapsulation:2})}return t})(),ci=new qe("COMMAND_TOKEN"),yt={prompt:Ie,output:xe,command:lt},Mt={prompt:"sparkles",output:"comment",command:"more-horizontal"},F=(()=>{class t{viewType;localization;hostClasses=!0;template;constructor(e,n){this.viewType=e,this.localization=n,this.viewType!=="custom"&&(this.icon=Mt[this.viewType],this.svgIcon=yt[this.viewType])}set buttonText(e){this._buttonText=e}get buttonText(){return ce(this._buttonText)?this._buttonText:this.messageFor(`${this.viewType}View`)}set icon(e){ce(e)?this._icon=e:this.icon=Mt[this.viewType]}get icon(){return this._icon}set svgIcon(e){ce(e)?this._svgIcon=e:this.svgIcon=yt[this.viewType]}get svgIcon(){return this._svgIcon}messageFor(e){return this.localization.get(e)}_buttonText;_icon;_svgIcon;static \u0275fac=function(n){return new(n||t)(m(ci),m(O))};static \u0275dir=k({type:t,viewQuery:function(n,i){if(n&1&&P(yn,7),n&2){let o;M(o=L())&&(i.template=o.first)}},hostVars:2,hostBindings:function(n,i){n&2&&y("k-prompt-view",i.hostClasses)},inputs:{buttonText:"buttonText",icon:"icon",svgIcon:"svgIcon"},standalone:!1})}return t})(),Z=(()=>{class t{aiPrompt;promptValue="";showOutputRating=!1;requestEvent=new U;executeEvent=new U;outputCopyEvent=new U;outputRatingChangeEvent=new U;promptCommands;promptOutputs;promptSuggestions;getFlattenPromptCommands(e=this.promptCommands){let n=[];return e.forEach(i=>{if(i.hasOwnProperty("children")){let o=i.children;n=n.concat(o),o.length>0&&this.getFlattenPromptCommands(o)}}),n.concat(this.promptCommands)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),Pt=(()=>{class t{templateRef;constructor(e){this.templateRef=e}static \u0275fac=function(n){return new(n||t)(m(ne,8))};static \u0275dir=k({type:t,selectors:[["","kendoAIPromptToolbarActionsTemplate",""]]})}return t})(),Ge=(()=>{class t{localizationService;focusableElements=[];currentFocusedIndex=0;constructor(e){this.localizationService=e}register(e){this.focusableElements.some(n=>n===e)||this.focusableElements.push(e)}unregister(e){this.currentFocusedIndex=0,this.focusableElements=this.focusableElements.filter(n=>n!==e)}isActive(e){return this.focusableElements[this.currentFocusedIndex]===e}setActiveIndex(e){this.currentFocusedIndex=Math.max(this.focusableElements.indexOf(e),0)}move(e){let n=e==="right"?1:-1;this.localizationService.rtl&&(n=-n),this.currentFocusedIndex+=n,this.currentFocusedIndex<0?this.currentFocusedIndex=this.focusableElements.length-1:this.currentFocusedIndex>=this.focusableElements.length&&(this.currentFocusedIndex=0),this.focusableElements[this.currentFocusedIndex].activate()}focusFirst(){this.focusableElements[this.currentFocusedIndex].activate()}static \u0275fac=function(n){return new(n||t)(Je(O))};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),Vt=(()=>{class t{host;navigationService;renderer;constructor(e,n,i){this.host=e,this.navigationService=n,this.renderer=i,n.register(this)}get element(){return this.host.nativeElement}ngAfterViewInit(){this.renderer.setAttribute(this.element,"tabindex",this.navigationService.isActive(this)?"0":"-1"),this.element.addEventListener("keydown",this.keyDownHandler,{capture:!0}),this.element.addEventListener("click",this.clickHandler,{capture:!0})}ngOnDestroy(){this.navigationService.unregister(this),this.element.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),this.element.removeEventListener("click",this.clickHandler,{capture:!0})}activate(){this.renderer.setAttribute(this.element,"tabindex","0"),this.element.focus()}keyDownHandler=e=>{let n=e.target===this.element,i=e.keyCode===S.ArrowLeft,o=e.keyCode===S.ArrowRight;!n||!(i||o)||(this.renderer.setAttribute(this.element,"tabindex","-1"),this.element.querySelectorAll(Et).forEach(A=>{this.renderer.setAttribute(A,"tabindex","-1")}),o?this.navigationService.move("right"):i&&this.navigationService.move("left"))};clickHandler=()=>{this.navigationService.setActiveIndex(this)};static \u0275fac=function(n){return new(n||t)(m(z),m(Ge),m(_e))};static \u0275dir=k({type:t,selectors:[["","kendoAIPromptToolbarFocusable",""]]})}return t})(),Ae=(()=>{class t extends ye{promptView;outputView;generateOutput;promptPlaceholder;copyOutput;retryGeneration;outputTitle;outputRetryTitle;promptSuggestions;static \u0275fac=(()=>{let e;return function(i){return(e||(e=le(t)))(i||t)}})();static \u0275dir=k({type:t,inputs:{promptView:"promptView",outputView:"outputView",generateOutput:"generateOutput",promptPlaceholder:"promptPlaceholder",copyOutput:"copyOutput",retryGeneration:"retryGeneration",outputTitle:"outputTitle",outputRetryTitle:"outputRetryTitle",promptSuggestions:"promptSuggestions"},standalone:!1,features:[x]})}return t})(),li=(()=>{class t extends Ae{service;constructor(e){super(),this.service=e}static \u0275fac=function(n){return new(n||t)(m(O))};static \u0275dir=k({type:t,selectors:[["","kendoAIPromptLocalizedMessages",""]],features:[R([{provide:Ae,useExisting:w(()=>t)}]),x]})}return t})(),Pe=(()=>{class t{localization;service;navigationService;ngZone;hostClasses=!0;get dirAttr(){return this.direction}constructor(e,n,i,o){this.localization=e,this.service=n,this.navigationService=i,this.ngZone=o,Oe(Tt),this.direction=e.rtl?"rtl":"ltr",this.subs.add(e.changes.subscribe(({rtl:p})=>{this.direction=p?"rtl":"ltr"}))}views;toolbarActionsTemplate;set activeView(e){this._activeView!==e&&(this._activeView=e,this.service.promptValue&&(this.service.promptValue=""))}get activeView(){return this._activeView}set promptCommands(e){this.service.promptCommands=e}set promptSuggestions(e){this.service.promptSuggestions=e}set promptOutputs(e){this.service.promptOutputs=e}set showOutputRating(e){this.service.showOutputRating=e}activeViewChange=new I;promptRequest=new I;commandExecute=new I;outputCopy=new I;outputRatingChange=new I;ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.service.aiPrompt=this,this.subs.add(this.service.requestEvent.subscribe(e=>this.promptRequest.emit(e))),this.subs.add(this.service.executeEvent.subscribe(e=>this.commandExecute.emit(e))),this.subs.add(this.service.outputCopyEvent.subscribe(e=>this.outputCopy.emit(e))),this.subs.add(this.service.outputRatingChangeEvent.subscribe(e=>this.outputRatingChange.emit(e)))})}ngOnDestroy(){this.subs.unsubscribe()}focus(){this.navigationService.focusFirst()}subs=new ve;get selectedView(){return this.viewsArray[this.activeView]}sparklesIcon=Ie;outputIcon=xe;get viewsArray(){return this.views?.toArray()}direction;_activeView=0;viewChange(e){e!==this.activeView&&(this.activeView=e,this.activeViewChange.emit(e))}messageFor(e){return this.localization.get(e)}get viewTemplate(){return this.selectedView?.viewType==="custom"?this.selectedView?.viewTemplate:this.selectedView?.template}handleGenerateOutput(){let n={prompt:this.service.promptValue,sender:this,isRetry:!1};this.promptRequest.emit(n)}static \u0275fac=function(n){return new(n||t)(m(O),m(Z),m(Ge),m(ee))};static \u0275cmp=E({type:t,selectors:[["kendo-aiprompt"]],contentQueries:function(n,i,o){if(n&1&&(J(o,Pt,5),J(o,F,4)),n&2){let p;M(p=L())&&(i.toolbarActionsTemplate=p.first),M(p=L())&&(i.views=p)}},hostVars:3,hostBindings:function(n,i){n&2&&(N("dir",i.dirAttr),y("k-prompt",i.hostClasses))},inputs:{activeView:"activeView",promptCommands:"promptCommands",promptSuggestions:"promptSuggestions",promptOutputs:"promptOutputs",showOutputRating:"showOutputRating"},outputs:{activeViewChange:"activeViewChange",promptRequest:"promptRequest",commandExecute:"commandExecute",outputCopy:"outputCopy",outputRatingChange:"outputRatingChange"},exportAs:["kendoAIPrompt"],features:[R([O,Z,Ge,{provide:Me,useValue:"kendo.aiprompt"}])],decls:9,vars:4,consts:()=>{let e;e=$localize`:kendo.aiprompt.promptView|The Toolbar button text for the Prompt view.:Ask AI`;let n;n=$localize`:kendo.aiprompt.outputView|The Toolbar button text for the Output view.:Output`;let i;i=$localize`:kendo.aiprompt.generateOutput|The text for the Generate button in the Prompt view.:Generate`;let o;o=$localize`:kendo.aiprompt.promptPlaceholder|The placeholder text for the Prompt View text area.:Ask or generate content with AI`;let p;p=$localize`:kendo.aiprompt.copyOutput|The Copy button text in each Output view card.:Copy`;let A;A=$localize`:kendo.aiprompt.retryGeneration|The Retry button text in each Output view card.:Retry`;let D;D=$localize`:kendo.aiprompt.outputTitle|The title of each Output view card.:Generated with AI`;let b;b=$localize`:kendo.aiprompt.outputRetryTitle|The title of each Output view retry card.:Generated with AI`;let Be;return Be=$localize`:kendo.aiprompt.promptSuggestions|The title of the Prompt suggestions button.:Prompt suggestions`,[["kendoAIPromptLocalizedMessages","","promptView",e,"outputView",n,"generateOutput",i,"promptPlaceholder",o,"copyOutput",p,"retryGeneration",A,"outputTitle",D,"outputRetryTitle",b,"promptSuggestions",Be],[1,"k-prompt-header"],["role","toolbar",1,"k-toolbar-flat","k-toolbar","k-toolbar-md"],["kendoButton","","kendoAIPromptToolbarFocusable","","type","button","fillMode","flat","rounded","full","themeColor","primary",3,"svgIcon","icon","selected","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"k-prompt-content"],[1,"k-prompt-view"],[4,"ngTemplateOutlet"],["class","k-prompt-footer",4,"ngIf"],["kendoButton","","kendoAIPromptToolbarFocusable","","type","button","fillMode","flat","rounded","full","themeColor","primary",3,"click","svgIcon","icon","selected"],[3,"ngTemplateOutlet"],[1,"k-prompt-footer"],[1,"k-actions","k-actions-start","k-actions-horizontal","k-prompt-actions"],["kendoButton","","type","button","themeColor","primary","rounded","full","icon","sparkles",3,"click","svgIcon"]]},template:function(n,i){n&1&&(q(0,0),l(1,"div",1)(2,"div",2),u(3,Mn,2,4,"button",3)(4,Dn,1,1,null,4),_()(),l(5,"div",5)(6,"div",6),u(7,wn,1,0,"ng-container",7),_()(),u(8,kn,4,2,"div",8)),n&2&&(r(3),a("ngForOf",i.viewsArray),r(),a("ngIf",i.toolbarActionsTemplate),r(3),a("ngTemplateOutlet",i.viewTemplate),r(),a("ngIf",(i.selectedView==null?null:i.selectedView.viewType)==="prompt"))},dependencies:[li,j,Q,Vt,G,ae],encapsulation:2})}return t})(),Ve=(()=>{class t extends F{service;constructor(e,n){super("command",e),this.service=n}panelBarItems=[];ngOnInit(){this.service.promptCommands&&(this.panelBarItems=this.getPanelBarItems(this.service.promptCommands))}itemClickHandler(e){if(e.item.children)return;let n=this.service.getFlattenPromptCommands().find(i=>i.id==e.item.id);if(n){let i={command:n,sender:this.service.aiPrompt,isRetry:!1};this.service.executeEvent.next(i)}}getPanelBarItems(e){return e.map(n=>({title:n.text,id:n.id,icon:n.icon,svgIcon:n.svgIcon,children:n.children?this.getPanelBarItems(n.children):null}))}static \u0275fac=function(n){return new(n||t)(m(O),m(Z))};static \u0275cmp=E({type:t,selectors:[["kendo-aiprompt-command-view"]],features:[R([{provide:F,useExisting:w(()=>t)}]),x],decls:2,vars:0,consts:[["content",""],[3,"itemClick","items","animate","selectable"]],template:function(n,i){n&1&&u(0,Tn,1,3,"ng-template",null,0,re)},dependencies:[Rt],encapsulation:2})}return t})(),_i=(()=>{class t extends Ae{service;constructor(e){super(),this.service=e}get override(){return!0}static \u0275fac=function(n){return new(n||t)(m(O))};static \u0275cmp=E({type:t,selectors:[["kendo-aiprompt-messages"]],features:[R([{provide:Ae,useExisting:w(()=>t)}]),x],decls:0,vars:0,template:function(n,i){},encapsulation:2})}return t})(),pi=(()=>{class t extends F{constructor(e){super("custom",e)}viewTemplate;static \u0275fac=function(n){return new(n||t)(m(O))};static \u0275cmp=E({type:t,selectors:[["kendo-aiprompt-custom-view"]],inputs:{viewTemplate:"viewTemplate"},features:[R([{provide:F,useExisting:w(()=>t)}]),x],decls:0,vars:0,template:function(n,i){},encapsulation:2})}return t})(),mi=(()=>{class t{localization;service;hostClass=!0;listItemRole="listitem";tabIndex=0;get ariaDescribedBy(){return this.titleId}ariaKeyShortcuts="Enter";promptOutput;constructor(e,n){this.localization=e,this.service=n}ngOnInit(){this.promptOutput?.rating==="positive"?(this.positiveRatingIcon=Re,this.negativeRatingIcon=me):this.promptOutput?.rating==="negative"&&(this.negativeRatingIcon=Ce,this.positiveRatingIcon=ue)}copyIcon=At;retryIcon=mt;positiveRatingIcon=ue;negativeRatingIcon=me;titleId=`k-output-card-${Le()}`;messageFor(e){return this.localization.get(e)}get showRating(){return this.service.showOutputRating}get outputTitle(){if(ce(this.promptOutput.title))return this.promptOutput.title;{let e=this.promptOutput.isRetry?"outputRetryTitle":"outputTitle";return this.messageFor(e)}}handleRetry(){if(this.promptOutput.commandId){let e={command:this.service.getFlattenPromptCommands().find(n=>n.id===this.promptOutput.commandId),sender:this.service.aiPrompt,isRetry:!0};this.service.executeEvent.next(e)}else{let e={prompt:this.promptOutput.prompt,sender:this.service.aiPrompt,isRetry:!0};this.service.requestEvent.next(e)}}handleCopy(){navigator.clipboard.writeText(this.promptOutput.output),this.service.outputCopyEvent.next(this.promptOutput)}handleRating(e){let n={promptOutput:this.promptOutput,rating:e};this.service.outputRatingChangeEvent.next(n),e==="positive"?(this.positiveRatingIcon=Re,this.negativeRatingIcon=me):(this.negativeRatingIcon=Ce,this.positiveRatingIcon=ue)}static \u0275fac=function(n){return new(n||t)(m(O),m(Z))};static \u0275cmp=E({type:t,selectors:[["","kendoAIPromptOutputCard",""]],hostVars:6,hostBindings:function(n,i){n&2&&(N("role",i.listItemRole)("tabindex",i.tabIndex)("aria-describedby",i.ariaDescribedBy)("aria-keyshortcuts",i.ariaKeyShortcuts),y("k-card",i.hostClass))},inputs:{promptOutput:"promptOutput"},attrs:bn,decls:14,vars:9,consts:[[1,"k-card-header"],[1,"k-card-title"],[1,"k-card-subtitle"],[1,"k-card-body"],[1,"k-actions","k-actions-start","k-actions-horizontal","k-card-actions"],["kendoButton","","fillMode","flat","themeColor","primary","rounded","full","icon","copy",3,"click","svgIcon"],["kendoButton","","fillMode","flat","rounded","full","icon","arrow-rotate-cw",3,"click","svgIcon"],[4,"ngIf"],[1,"k-spacer"],["kendoButton","","fillMode","flat","icon","thumb-up-outline",3,"click","svgIcon"],["kendoButton","","fillMode","flat","icon","thumb-down-outline",3,"click","svgIcon"]],template:function(n,i){n&1&&(l(0,"div",0)(1,"div",1),f(2),_(),l(3,"div",2),f(4),_()(),l(5,"div",3)(6,"p"),f(7),_()(),l(8,"div",4)(9,"button",5),h("click",function(){return i.handleCopy()}),f(10),_(),l(11,"button",6),h("click",function(){return i.handleRetry()}),f(12),_(),u(13,Gn,4,2,"ng-container",7),_()),n&2&&(r(),N("id",i.titleId),r(),C("",i.outputTitle," "),r(2),W(i.promptOutput.prompt),r(3),W(i.promptOutput.output),r(2),a("svgIcon",i.copyIcon),r(),W(i.messageFor("copyOutput")),r(),a("svgIcon",i.retryIcon),r(),W(i.messageFor("retryGeneration")),r(),a("ngIf",i.showRating))},dependencies:[Q,G],encapsulation:2})}return t})(),Ke=(()=>{class t extends F{service;constructor(e,n){super("output",e),this.service=n}get promptOutputs(){return this.service.promptOutputs}static \u0275fac=function(n){return new(n||t)(m(O),m(Z))};static \u0275cmp=E({type:t,selectors:[["kendo-aiprompt-output-view"]],features:[R([{provide:F,useExisting:w(()=>t)}]),x],decls:2,vars:0,consts:[["content",""],["role","list",1,"k-card-list"],["kendoAIPromptOutputCard","",3,"promptOutput",4,"ngFor","ngForOf"],["kendoAIPromptOutputCard","",3,"promptOutput"]],template:function(n,i){n&1&&u(0,Pn,2,1,"ng-template",null,0,re)},dependencies:[j,mi],encapsulation:2})}return t})(),Fe=(()=>{class t extends F{service;constructor(e,n){super("prompt",e),this.service=n}get suggestionsIcons(){return this.showSuggestions?{font:"chevron-up",svg:st}:{font:"chevron-down",svg:at}}showSuggestions=!0;contentId=`k-prompt-suggestions-${Le()}`;get promptSuggestions(){return this.service.promptSuggestions}set textAreaValue(e){this.service.promptValue=e}get textAreaValue(){return this.service.promptValue}suggestionClick(e){this.textAreaValue=this.service.promptValue=e}static \u0275fac=function(n){return new(n||t)(m(O),m(Z))};static \u0275cmp=E({type:t,selectors:[["kendo-aiprompt-prompt-view"]],features:[R([{provide:F,useExisting:w(()=>t)}]),x],decls:2,vars:0,consts:[["content",""],[3,"valueChange","placeholder","rows","value"],["class","k-prompt-expander",4,"ngIf"],[1,"k-prompt-expander"],["kendoButton","","fillMode","flat","type","button",3,"click","icon","svgIcon"],["class","k-prompt-expander-content","role","list",4,"ngIf"],["role","list",1,"k-prompt-expander-content"],["class","k-prompt-suggestion","role","listitem",3,"click",4,"ngFor","ngForOf"],["role","listitem",1,"k-prompt-suggestion",3,"click"]],template:function(n,i){n&1&&u(0,Bn,2,4,"ng-template",null,0,re)},dependencies:[De,G,Q,j],encapsulation:2})}return t})(),ui=(()=>{class t extends fe{service;constructor(e){super(),this.service=e}get override(){return!0}static \u0275fac=function(n){return new(n||t)(m(O))};static \u0275cmp=E({type:t,selectors:[["kendo-chat-messages"]],features:[R([{provide:fe,useExisting:w(()=>t)}]),x],decls:0,vars:0,template:function(n,i){},encapsulation:2})}return t})(),di=(()=>{class t{imageUrl;title;subtitle;actions;cssClass=!0;executeAction=new I;onClick(e){this.executeAction.next(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=E({type:t,selectors:[["kendo-chat-hero-card"]],hostVars:2,hostBindings:function(n,i){n&2&&y("k-card",i.cssClass)},inputs:{imageUrl:"imageUrl",title:"title",subtitle:"subtitle",actions:"actions"},outputs:{executeAction:"executeAction"},decls:6,vars:4,consts:[["class","k-card-image",3,"src",4,"ngIf"],[1,"k-card-body"],["class","k-card-title",4,"ngIf"],["class","k-card-subtitle",4,"ngIf"],[1,"k-card-actions","k-card-actions-vertical"],["class","k-card-action",4,"ngFor","ngForOf"],[1,"k-card-image",3,"src"],[1,"k-card-title"],[1,"k-card-subtitle"],[1,"k-card-action"],["kendoButton","","fillMode","flat",3,"click"]],template:function(n,i){n&1&&(u(0,zn,1,1,"img",0),l(1,"div",1),u(2,Hn,2,1,"h5",2)(3,$n,2,1,"h6",3),_(),l(4,"div",4),u(5,jn,3,1,"span",5),_()),n&2&&(a("ngIf",i.imageUrl),r(2),a("ngIf",i.title),r(),a("ngIf",i.subtitle),r(2),a("ngForOf",i.actions))},dependencies:[G,j,Q],encapsulation:2})}return t})(),gi=[Pe,Fe,Ke,Ve,pi,_i,Pt,Vt],hi=[Ue,ui,wt,kt,di,bt],Qi=[...gi,...hi];var Kt=class t{constructor(s){this.svc=s;let e={author:this.bot,suggestedActions:[{type:"reply",value:"Neat!"},{type:"reply",value:"Thanks, but this is boring."}],timestamp:new Date,text:"Hello, this is a demo bot. I don`t do much, but I can count symbols!"};this.feed=je(ze([e]),this.local,this.svc.responses.pipe(He(n=>({author:this.bot,text:n})))).pipe(Qe((n,i)=>[...n,i],[]))}closeIcon=ut;eye=dt;feed;user={id:1};bot={id:0};promptOutputs=[];activeView=0;idCounter=0;commands=[{text:"Command text 1",id:0,icon:"bell",svgIcon:gt},{text:"Command text 2",id:1,icon:"info",svgIcon:ht},{text:"Command text 3",id:2,icon:"question",svgIcon:ft},{text:"Command text 4",id:3,icon:"warning",svgIcon:pt}];suggestions=["Generate out-of-office email template","Write a LinkedIn post on the importance of work/life balance"];local=new U;sendMessage(s){this.local.next(s.message),this.local.next({author:this.bot,typing:!0}),s.message.text&&this.svc.submit(s.message.text)}onPromptRequest(s){s.prompt&&(this.createPromptOutput(s),this.activeView=1)}onCommandExecute(s){this.createPromptOutput(s),this.activeView=1}createPromptOutput(s){this.idCounter+=1;let e={title:s.isRetry?"Retry test title":"Test title",id:this.idCounter,prompt:s.prompt?s.prompt:s.command.text,output:"Test content",isRetry:s.isRetry,commandId:s.prompt?null:s.command.id};this.promptOutputs.unshift(e)}static \u0275fac=function(e){return new(e||t)(m(X))};static \u0275cmp=E({type:t,selectors:[["app-conversational-ui"]],features:[R([X])],decls:13,vars:8,consts:[[1,"container"],[1,"wrapper"],[1,"chat",3,"sendMessage","messages","user"],[1,"prompt",3,"promptRequest","commandExecute","activeViewChange","promptOutputs","promptCommands","promptSuggestions","activeView"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"div",1)(2,"p"),f(3,"Conversational UI"),_(),l(4,"kendo-chat",2),Ye(5,"async"),h("sendMessage",function(o){return n.sendMessage(o)}),_()(),l(6,"div",1)(7,"p"),f(8,"AI Prompt"),_(),l(9,"kendo-aiprompt",3),h("promptRequest",function(o){return n.onPromptRequest(o)})("commandExecute",function(o){return n.onCommandExecute(o)}),se("activeViewChange",function(o){return oe(n.activeView,o)||(n.activeView=o),o}),T(10,"kendo-aiprompt-prompt-view")(11,"kendo-aiprompt-output-view")(12,"kendo-aiprompt-command-view"),_()()()),e&2&&(r(4),a("messages",et(5,6,n.feed))("user",n.user),r(5),a("promptOutputs",n.promptOutputs)("promptCommands",n.commands)("promptSuggestions",n.suggestions),ie("activeView",n.activeView))},dependencies:[ot,it,Pe,Fe,Ke,Ve,Ue],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;height:440px;gap:100px;width:100%}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chat[_ngcontent-%COMP%]{width:400px}.prompt[_ngcontent-%COMP%]{flex-grow:1;max-width:400px;width:400px}"]})};export{Kt as ConversationalUiComponent};
